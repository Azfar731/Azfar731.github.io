import{j as C,r as j,R as At}from"./index-DNoHFxoK.js";var hl={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ru=function(n){const t=[];let e=0;for(let s=0;s<n.length;s++){let i=n.charCodeAt(s);i<128?t[e++]=i:i<2048?(t[e++]=i>>6|192,t[e++]=i&63|128):(i&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++s)&1023),t[e++]=i>>18|240,t[e++]=i>>12&63|128,t[e++]=i>>6&63|128,t[e++]=i&63|128):(t[e++]=i>>12|224,t[e++]=i>>6&63|128,t[e++]=i&63|128)}return t},Qf=function(n){const t=[];let e=0,s=0;for(;e<n.length;){const i=n[e++];if(i<128)t[s++]=String.fromCharCode(i);else if(i>191&&i<224){const r=n[e++];t[s++]=String.fromCharCode((i&31)<<6|r&63)}else if(i>239&&i<365){const r=n[e++],a=n[e++],l=n[e++],c=((i&7)<<18|(r&63)<<12|(a&63)<<6|l&63)-65536;t[s++]=String.fromCharCode(55296+(c>>10)),t[s++]=String.fromCharCode(56320+(c&1023))}else{const r=n[e++],a=n[e++];t[s++]=String.fromCharCode((i&15)<<12|(r&63)<<6|a&63)}}return t.join("")},bu={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let i=0;i<n.length;i+=3){const r=n[i],a=i+1<n.length,l=a?n[i+1]:0,c=i+2<n.length,h=c?n[i+2]:0,f=r>>2,m=(r&3)<<4|l>>4;let y=(l&15)<<2|h>>6,E=h&63;c||(E=64,a||(y=64)),s.push(e[f],e[m],e[y],e[E])}return s.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(Ru(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):Qf(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let i=0;i<n.length;){const r=e[n.charAt(i++)],l=i<n.length?e[n.charAt(i)]:0;++i;const h=i<n.length?e[n.charAt(i)]:64;++i;const m=i<n.length?e[n.charAt(i)]:64;if(++i,r==null||l==null||h==null||m==null)throw new Yf;const y=r<<2|l>>4;if(s.push(y),h!==64){const E=l<<4&240|h>>2;if(s.push(E),m!==64){const R=h<<6&192|m;s.push(R)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Yf extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Xf=function(n){const t=Ru(n);return bu.encodeByteArray(t,!0)},Xs=function(n){return Xf(n).replace(/\./g,"")},Jf=function(n){try{return bu.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zf(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tm=()=>Zf().__FIREBASE_DEFAULTS__,em=()=>{if(typeof process>"u"||typeof hl>"u")return;const n=hl.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},nm=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&Jf(n[1]);return t&&JSON.parse(t)},lo=()=>{try{return tm()||em()||nm()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},sm=n=>{var t,e;return(e=(t=lo())===null||t===void 0?void 0:t.emulatorHosts)===null||e===void 0?void 0:e[n]},im=n=>{const t=sm(n);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),s]:[t.substring(0,e),s]},xu=()=>{var n;return(n=lo())===null||n===void 0?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,s)=>{e?this.reject(e):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function om(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},s=t||"demo-project",i=n.iat||0,r=n.sub||n.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Xs(JSON.stringify(e)),Xs(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function am(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function lm(){var n;const t=(n=lo())===null||n===void 0?void 0:n.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function cm(){return!lm()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function um(){try{return typeof indexedDB=="object"}catch{return!1}}function hm(){return new Promise((n,t)=>{try{let e=!0;const s="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(s);i.onsuccess=()=>{i.result.close(),e||self.indexedDB.deleteDatabase(s),n(!0)},i.onupgradeneeded=()=>{e=!1},i.onerror=()=>{var r;t(((r=i.error)===null||r===void 0?void 0:r.message)||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dm="FirebaseError";class fn extends Error{constructor(t,e,s){super(e),this.code=t,this.customData=s,this.name=dm,Object.setPrototypeOf(this,fn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vu.prototype.create)}}class Vu{constructor(t,e,s){this.service=t,this.serviceName=e,this.errors=s}create(t,...e){const s=e[0]||{},i=`${this.service}/${t}`,r=this.errors[t],a=r?fm(r,s):"Error",l=`${this.serviceName}: ${a} (${i}).`;return new fn(i,l,s)}}function fm(n,t){return n.replace(mm,(e,s)=>{const i=t[s];return i!=null?String(i):`<${s}?>`})}const mm=/\{\$([^}]+)}/g;function Pr(n,t){if(n===t)return!0;const e=Object.keys(n),s=Object.keys(t);for(const i of e){if(!s.includes(i))return!1;const r=n[i],a=t[i];if(dl(r)&&dl(a)){if(!Pr(r,a))return!1}else if(r!==a)return!1}for(const i of s)if(!e.includes(i))return!1;return!0}function dl(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Du(n){return n&&n._delegate?n._delegate:n}class Zn{constructor(t,e,s){this.name=t,this.instanceFactory=e,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ce="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const s=new rm;if(this.instancesDeferred.set(e,s),this.isInitialized(e)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:e});i&&s.resolve(i)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const s=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(e=t==null?void 0:t.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(ym(t))try{this.getOrInitializeService({instanceIdentifier:Ce})}catch{}for(const[e,s]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(e);try{const r=this.getOrInitializeService({instanceIdentifier:i});s.resolve(r)}catch{}}}}clearInstance(t=Ce){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Ce){return this.instances.has(t)}getOptions(t=Ce){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:s,options:e});for(const[r,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(r);s===l&&a.resolve(i)}return i}onInit(t,e){var s;const i=this.normalizeInstanceIdentifier(e),r=(s=this.onInitCallbacks.get(i))!==null&&s!==void 0?s:new Set;r.add(t),this.onInitCallbacks.set(i,r);const a=this.instances.get(i);return a&&t(a,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,e){const s=this.onInitCallbacks.get(e);if(s)for(const i of s)try{i(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:gm(t),options:e}),this.instances.set(t,s),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=Ce){return this.component?this.component.multipleInstances?t:Ce:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function gm(n){return n===Ce?void 0:n}function ym(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new pm(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Q;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Q||(Q={}));const _m={debug:Q.DEBUG,verbose:Q.VERBOSE,info:Q.INFO,warn:Q.WARN,error:Q.ERROR,silent:Q.SILENT},Tm=Q.INFO,Em={[Q.DEBUG]:"log",[Q.VERBOSE]:"log",[Q.INFO]:"info",[Q.WARN]:"warn",[Q.ERROR]:"error"},wm=(n,t,...e)=>{if(t<n.logLevel)return;const s=new Date().toISOString(),i=Em[t];if(i)console[i](`[${s}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Mu{constructor(t){this.name=t,this._logLevel=Tm,this._logHandler=wm,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Q))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?_m[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Q.DEBUG,...t),this._logHandler(this,Q.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Q.VERBOSE,...t),this._logHandler(this,Q.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Q.INFO,...t),this._logHandler(this,Q.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Q.WARN,...t),this._logHandler(this,Q.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Q.ERROR,...t),this._logHandler(this,Q.ERROR,...t)}}const Am=(n,t)=>t.some(e=>n instanceof e);let fl,ml;function Im(){return fl||(fl=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Pm(){return ml||(ml=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ku=new WeakMap,Sr=new WeakMap,Nu=new WeakMap,tr=new WeakMap,co=new WeakMap;function Sm(n){const t=new Promise((e,s)=>{const i=()=>{n.removeEventListener("success",r),n.removeEventListener("error",a)},r=()=>{e(de(n.result)),i()},a=()=>{s(n.error),i()};n.addEventListener("success",r),n.addEventListener("error",a)});return t.then(e=>{e instanceof IDBCursor&&ku.set(e,n)}).catch(()=>{}),co.set(t,n),t}function Cm(n){if(Sr.has(n))return;const t=new Promise((e,s)=>{const i=()=>{n.removeEventListener("complete",r),n.removeEventListener("error",a),n.removeEventListener("abort",a)},r=()=>{e(),i()},a=()=>{s(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",r),n.addEventListener("error",a),n.addEventListener("abort",a)});Sr.set(n,t)}let Cr={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return Sr.get(n);if(t==="objectStoreNames")return n.objectStoreNames||Nu.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return de(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function Rm(n){Cr=n(Cr)}function bm(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const s=n.call(er(this),t,...e);return Nu.set(s,t.sort?t.sort():[t]),de(s)}:Pm().includes(n)?function(...t){return n.apply(er(this),t),de(ku.get(this))}:function(...t){return de(n.apply(er(this),t))}}function xm(n){return typeof n=="function"?bm(n):(n instanceof IDBTransaction&&Cm(n),Am(n,Im())?new Proxy(n,Cr):n)}function de(n){if(n instanceof IDBRequest)return Sm(n);if(tr.has(n))return tr.get(n);const t=xm(n);return t!==n&&(tr.set(n,t),co.set(t,n)),t}const er=n=>co.get(n);function Vm(n,t,{blocked:e,upgrade:s,blocking:i,terminated:r}={}){const a=indexedDB.open(n,t),l=de(a);return s&&a.addEventListener("upgradeneeded",c=>{s(de(a.result),c.oldVersion,c.newVersion,de(a.transaction),c)}),e&&a.addEventListener("blocked",c=>e(c.oldVersion,c.newVersion,c)),l.then(c=>{r&&c.addEventListener("close",()=>r()),i&&c.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const Dm=["get","getKey","getAll","getAllKeys","count"],Mm=["put","add","delete","clear"],nr=new Map;function pl(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(nr.get(t))return nr.get(t);const e=t.replace(/FromIndex$/,""),s=t!==e,i=Mm.includes(e);if(!(e in(s?IDBIndex:IDBObjectStore).prototype)||!(i||Dm.includes(e)))return;const r=async function(a,...l){const c=this.transaction(a,i?"readwrite":"readonly");let h=c.store;return s&&(h=h.index(l.shift())),(await Promise.all([h[e](...l),i&&c.done]))[0]};return nr.set(t,r),r}Rm(n=>({...n,get:(t,e,s)=>pl(t,e)||n.get(t,e,s),has:(t,e)=>!!pl(t,e)||n.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(Nm(e)){const s=e.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(e=>e).join(" ")}}function Nm(n){const t=n.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Rr="@firebase/app",gl="0.10.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ne=new Mu("@firebase/app"),Lm="@firebase/app-compat",Om="@firebase/analytics-compat",Fm="@firebase/analytics",jm="@firebase/app-check-compat",Bm="@firebase/app-check",Um="@firebase/auth",$m="@firebase/auth-compat",zm="@firebase/database",qm="@firebase/database-compat",Hm="@firebase/functions",Gm="@firebase/functions-compat",Km="@firebase/installations",Wm="@firebase/installations-compat",Qm="@firebase/messaging",Ym="@firebase/messaging-compat",Xm="@firebase/performance",Jm="@firebase/performance-compat",Zm="@firebase/remote-config",tp="@firebase/remote-config-compat",ep="@firebase/storage",np="@firebase/storage-compat",sp="@firebase/firestore",ip="@firebase/vertexai-preview",rp="@firebase/firestore-compat",op="firebase",ap="10.12.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const br="[DEFAULT]",lp={[Rr]:"fire-core",[Lm]:"fire-core-compat",[Fm]:"fire-analytics",[Om]:"fire-analytics-compat",[Bm]:"fire-app-check",[jm]:"fire-app-check-compat",[Um]:"fire-auth",[$m]:"fire-auth-compat",[zm]:"fire-rtdb",[qm]:"fire-rtdb-compat",[Hm]:"fire-fn",[Gm]:"fire-fn-compat",[Km]:"fire-iid",[Wm]:"fire-iid-compat",[Qm]:"fire-fcm",[Ym]:"fire-fcm-compat",[Xm]:"fire-perf",[Jm]:"fire-perf-compat",[Zm]:"fire-rc",[tp]:"fire-rc-compat",[ep]:"fire-gcs",[np]:"fire-gcs-compat",[sp]:"fire-fst",[rp]:"fire-fst-compat",[ip]:"fire-vertex","fire-js":"fire-js",[op]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js=new Map,cp=new Map,xr=new Map;function yl(n,t){try{n.container.addComponent(t)}catch(e){Ne.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function Zs(n){const t=n.name;if(xr.has(t))return Ne.debug(`There were multiple attempts to register component ${t}.`),!1;xr.set(t,n);for(const e of Js.values())yl(e,n);for(const e of cp.values())yl(e,n);return!0}function up(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hp={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fe=new Vu("app","Firebase",hp);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(t,e,s){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Zn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw fe.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fp=ap;function Lu(n,t={}){let e=n;typeof t!="object"&&(t={name:t});const s=Object.assign({name:br,automaticDataCollectionEnabled:!1},t),i=s.name;if(typeof i!="string"||!i)throw fe.create("bad-app-name",{appName:String(i)});if(e||(e=xu()),!e)throw fe.create("no-options");const r=Js.get(i);if(r){if(Pr(e,r.options)&&Pr(s,r.config))return r;throw fe.create("duplicate-app",{appName:i})}const a=new vm(i);for(const c of xr.values())a.addComponent(c);const l=new dp(e,s,a);return Js.set(i,l),l}function mp(n=br){const t=Js.get(n);if(!t&&n===br&&xu())return Lu();if(!t)throw fe.create("no-app",{appName:n});return t}function Je(n,t,e){var s;let i=(s=lp[n])!==null&&s!==void 0?s:n;e&&(i+=`-${e}`);const r=i.match(/\s|\//),a=t.match(/\s|\//);if(r||a){const l=[`Unable to register library "${i}" with version "${t}":`];r&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&a&&l.push("and"),a&&l.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ne.warn(l.join(" "));return}Zs(new Zn(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pp="firebase-heartbeat-database",gp=1,ts="firebase-heartbeat-store";let sr=null;function Ou(){return sr||(sr=Vm(pp,gp,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(ts)}catch(e){console.warn(e)}}}}).catch(n=>{throw fe.create("idb-open",{originalErrorMessage:n.message})})),sr}async function yp(n){try{const e=(await Ou()).transaction(ts),s=await e.objectStore(ts).get(Fu(n));return await e.done,s}catch(t){if(t instanceof fn)Ne.warn(t.message);else{const e=fe.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Ne.warn(e.message)}}}async function vl(n,t){try{const s=(await Ou()).transaction(ts,"readwrite");await s.objectStore(ts).put(t,Fu(n)),await s.done}catch(e){if(e instanceof fn)Ne.warn(e.message);else{const s=fe.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});Ne.warn(s.message)}}}function Fu(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vp=1024,_p=30*24*60*60*1e3;class Tp{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new wp(e),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var t,e;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=_l();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(a=>a.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const l=new Date(a.date).valueOf();return Date.now()-l<=_p}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=_l(),{heartbeatsToSend:s,unsentEntries:i}=Ep(this._heartbeatsCache.heartbeats),r=Xs(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function _l(){return new Date().toISOString().substring(0,10)}function Ep(n,t=vp){const e=[];let s=n.slice();for(const i of n){const r=e.find(a=>a.agent===i.agent);if(r){if(r.dates.push(i.date),Tl(e)>t){r.dates.pop();break}}else if(e.push({agent:i.agent,dates:[i.date]}),Tl(e)>t){e.pop();break}s=s.slice(1)}return{heartbeatsToSend:e,unsentEntries:s}}class wp{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return um()?hm().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await yp(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const i=await this.read();return vl(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var e;if(await this._canUseIndexedDBPromise){const i=await this.read();return vl(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function Tl(n){return Xs(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ap(n){Zs(new Zn("platform-logger",t=>new km(t),"PRIVATE")),Zs(new Zn("heartbeat",t=>new Tp(t),"PRIVATE")),Je(Rr,gl,n),Je(Rr,gl,"esm2017"),Je("fire-js","")}Ap("");var El=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var De,ju;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(A,g){function v(){}v.prototype=g.prototype,A.D=g.prototype,A.prototype=new v,A.prototype.constructor=A,A.C=function(T,w,P){for(var _=Array(arguments.length-2),Nt=2;Nt<arguments.length;Nt++)_[Nt-2]=arguments[Nt];return g.prototype[w].apply(T,_)}}function e(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(s,e),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(A,g,v){v||(v=0);var T=Array(16);if(typeof g=="string")for(var w=0;16>w;++w)T[w]=g.charCodeAt(v++)|g.charCodeAt(v++)<<8|g.charCodeAt(v++)<<16|g.charCodeAt(v++)<<24;else for(w=0;16>w;++w)T[w]=g[v++]|g[v++]<<8|g[v++]<<16|g[v++]<<24;g=A.g[0],v=A.g[1],w=A.g[2];var P=A.g[3],_=g+(P^v&(w^P))+T[0]+3614090360&4294967295;g=v+(_<<7&4294967295|_>>>25),_=P+(w^g&(v^w))+T[1]+3905402710&4294967295,P=g+(_<<12&4294967295|_>>>20),_=w+(v^P&(g^v))+T[2]+606105819&4294967295,w=P+(_<<17&4294967295|_>>>15),_=v+(g^w&(P^g))+T[3]+3250441966&4294967295,v=w+(_<<22&4294967295|_>>>10),_=g+(P^v&(w^P))+T[4]+4118548399&4294967295,g=v+(_<<7&4294967295|_>>>25),_=P+(w^g&(v^w))+T[5]+1200080426&4294967295,P=g+(_<<12&4294967295|_>>>20),_=w+(v^P&(g^v))+T[6]+2821735955&4294967295,w=P+(_<<17&4294967295|_>>>15),_=v+(g^w&(P^g))+T[7]+4249261313&4294967295,v=w+(_<<22&4294967295|_>>>10),_=g+(P^v&(w^P))+T[8]+1770035416&4294967295,g=v+(_<<7&4294967295|_>>>25),_=P+(w^g&(v^w))+T[9]+2336552879&4294967295,P=g+(_<<12&4294967295|_>>>20),_=w+(v^P&(g^v))+T[10]+4294925233&4294967295,w=P+(_<<17&4294967295|_>>>15),_=v+(g^w&(P^g))+T[11]+2304563134&4294967295,v=w+(_<<22&4294967295|_>>>10),_=g+(P^v&(w^P))+T[12]+1804603682&4294967295,g=v+(_<<7&4294967295|_>>>25),_=P+(w^g&(v^w))+T[13]+4254626195&4294967295,P=g+(_<<12&4294967295|_>>>20),_=w+(v^P&(g^v))+T[14]+2792965006&4294967295,w=P+(_<<17&4294967295|_>>>15),_=v+(g^w&(P^g))+T[15]+1236535329&4294967295,v=w+(_<<22&4294967295|_>>>10),_=g+(w^P&(v^w))+T[1]+4129170786&4294967295,g=v+(_<<5&4294967295|_>>>27),_=P+(v^w&(g^v))+T[6]+3225465664&4294967295,P=g+(_<<9&4294967295|_>>>23),_=w+(g^v&(P^g))+T[11]+643717713&4294967295,w=P+(_<<14&4294967295|_>>>18),_=v+(P^g&(w^P))+T[0]+3921069994&4294967295,v=w+(_<<20&4294967295|_>>>12),_=g+(w^P&(v^w))+T[5]+3593408605&4294967295,g=v+(_<<5&4294967295|_>>>27),_=P+(v^w&(g^v))+T[10]+38016083&4294967295,P=g+(_<<9&4294967295|_>>>23),_=w+(g^v&(P^g))+T[15]+3634488961&4294967295,w=P+(_<<14&4294967295|_>>>18),_=v+(P^g&(w^P))+T[4]+3889429448&4294967295,v=w+(_<<20&4294967295|_>>>12),_=g+(w^P&(v^w))+T[9]+568446438&4294967295,g=v+(_<<5&4294967295|_>>>27),_=P+(v^w&(g^v))+T[14]+3275163606&4294967295,P=g+(_<<9&4294967295|_>>>23),_=w+(g^v&(P^g))+T[3]+4107603335&4294967295,w=P+(_<<14&4294967295|_>>>18),_=v+(P^g&(w^P))+T[8]+1163531501&4294967295,v=w+(_<<20&4294967295|_>>>12),_=g+(w^P&(v^w))+T[13]+2850285829&4294967295,g=v+(_<<5&4294967295|_>>>27),_=P+(v^w&(g^v))+T[2]+4243563512&4294967295,P=g+(_<<9&4294967295|_>>>23),_=w+(g^v&(P^g))+T[7]+1735328473&4294967295,w=P+(_<<14&4294967295|_>>>18),_=v+(P^g&(w^P))+T[12]+2368359562&4294967295,v=w+(_<<20&4294967295|_>>>12),_=g+(v^w^P)+T[5]+4294588738&4294967295,g=v+(_<<4&4294967295|_>>>28),_=P+(g^v^w)+T[8]+2272392833&4294967295,P=g+(_<<11&4294967295|_>>>21),_=w+(P^g^v)+T[11]+1839030562&4294967295,w=P+(_<<16&4294967295|_>>>16),_=v+(w^P^g)+T[14]+4259657740&4294967295,v=w+(_<<23&4294967295|_>>>9),_=g+(v^w^P)+T[1]+2763975236&4294967295,g=v+(_<<4&4294967295|_>>>28),_=P+(g^v^w)+T[4]+1272893353&4294967295,P=g+(_<<11&4294967295|_>>>21),_=w+(P^g^v)+T[7]+4139469664&4294967295,w=P+(_<<16&4294967295|_>>>16),_=v+(w^P^g)+T[10]+3200236656&4294967295,v=w+(_<<23&4294967295|_>>>9),_=g+(v^w^P)+T[13]+681279174&4294967295,g=v+(_<<4&4294967295|_>>>28),_=P+(g^v^w)+T[0]+3936430074&4294967295,P=g+(_<<11&4294967295|_>>>21),_=w+(P^g^v)+T[3]+3572445317&4294967295,w=P+(_<<16&4294967295|_>>>16),_=v+(w^P^g)+T[6]+76029189&4294967295,v=w+(_<<23&4294967295|_>>>9),_=g+(v^w^P)+T[9]+3654602809&4294967295,g=v+(_<<4&4294967295|_>>>28),_=P+(g^v^w)+T[12]+3873151461&4294967295,P=g+(_<<11&4294967295|_>>>21),_=w+(P^g^v)+T[15]+530742520&4294967295,w=P+(_<<16&4294967295|_>>>16),_=v+(w^P^g)+T[2]+3299628645&4294967295,v=w+(_<<23&4294967295|_>>>9),_=g+(w^(v|~P))+T[0]+4096336452&4294967295,g=v+(_<<6&4294967295|_>>>26),_=P+(v^(g|~w))+T[7]+1126891415&4294967295,P=g+(_<<10&4294967295|_>>>22),_=w+(g^(P|~v))+T[14]+2878612391&4294967295,w=P+(_<<15&4294967295|_>>>17),_=v+(P^(w|~g))+T[5]+4237533241&4294967295,v=w+(_<<21&4294967295|_>>>11),_=g+(w^(v|~P))+T[12]+1700485571&4294967295,g=v+(_<<6&4294967295|_>>>26),_=P+(v^(g|~w))+T[3]+2399980690&4294967295,P=g+(_<<10&4294967295|_>>>22),_=w+(g^(P|~v))+T[10]+4293915773&4294967295,w=P+(_<<15&4294967295|_>>>17),_=v+(P^(w|~g))+T[1]+2240044497&4294967295,v=w+(_<<21&4294967295|_>>>11),_=g+(w^(v|~P))+T[8]+1873313359&4294967295,g=v+(_<<6&4294967295|_>>>26),_=P+(v^(g|~w))+T[15]+4264355552&4294967295,P=g+(_<<10&4294967295|_>>>22),_=w+(g^(P|~v))+T[6]+2734768916&4294967295,w=P+(_<<15&4294967295|_>>>17),_=v+(P^(w|~g))+T[13]+1309151649&4294967295,v=w+(_<<21&4294967295|_>>>11),_=g+(w^(v|~P))+T[4]+4149444226&4294967295,g=v+(_<<6&4294967295|_>>>26),_=P+(v^(g|~w))+T[11]+3174756917&4294967295,P=g+(_<<10&4294967295|_>>>22),_=w+(g^(P|~v))+T[2]+718787259&4294967295,w=P+(_<<15&4294967295|_>>>17),_=v+(P^(w|~g))+T[9]+3951481745&4294967295,A.g[0]=A.g[0]+g&4294967295,A.g[1]=A.g[1]+(w+(_<<21&4294967295|_>>>11))&4294967295,A.g[2]=A.g[2]+w&4294967295,A.g[3]=A.g[3]+P&4294967295}s.prototype.u=function(A,g){g===void 0&&(g=A.length);for(var v=g-this.blockSize,T=this.B,w=this.h,P=0;P<g;){if(w==0)for(;P<=v;)i(this,A,P),P+=this.blockSize;if(typeof A=="string"){for(;P<g;)if(T[w++]=A.charCodeAt(P++),w==this.blockSize){i(this,T),w=0;break}}else for(;P<g;)if(T[w++]=A[P++],w==this.blockSize){i(this,T),w=0;break}}this.h=w,this.o+=g},s.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var g=1;g<A.length-8;++g)A[g]=0;var v=8*this.o;for(g=A.length-8;g<A.length;++g)A[g]=v&255,v/=256;for(this.u(A),A=Array(16),g=v=0;4>g;++g)for(var T=0;32>T;T+=8)A[v++]=this.g[g]>>>T&255;return A};function r(A,g){var v=l;return Object.prototype.hasOwnProperty.call(v,A)?v[A]:v[A]=g(A)}function a(A,g){this.h=g;for(var v=[],T=!0,w=A.length-1;0<=w;w--){var P=A[w]|0;T&&P==g||(v[w]=P,T=!1)}this.g=v}var l={};function c(A){return-128<=A&&128>A?r(A,function(g){return new a([g|0],0>g?-1:0)}):new a([A|0],0>A?-1:0)}function h(A){if(isNaN(A)||!isFinite(A))return m;if(0>A)return b(h(-A));for(var g=[],v=1,T=0;A>=v;T++)g[T]=A/v|0,v*=4294967296;return new a(g,0)}function f(A,g){if(A.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(A.charAt(0)=="-")return b(f(A.substring(1),g));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var v=h(Math.pow(g,8)),T=m,w=0;w<A.length;w+=8){var P=Math.min(8,A.length-w),_=parseInt(A.substring(w,w+P),g);8>P?(P=h(Math.pow(g,P)),T=T.j(P).add(h(_))):(T=T.j(v),T=T.add(h(_)))}return T}var m=c(0),y=c(1),E=c(16777216);n=a.prototype,n.m=function(){if(x(this))return-b(this).m();for(var A=0,g=1,v=0;v<this.g.length;v++){var T=this.i(v);A+=(0<=T?T:4294967296+T)*g,g*=4294967296}return A},n.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(R(this))return"0";if(x(this))return"-"+b(this).toString(A);for(var g=h(Math.pow(A,6)),v=this,T="";;){var w=F(v,g).g;v=D(v,w.j(g));var P=((0<v.g.length?v.g[0]:v.h)>>>0).toString(A);if(v=w,R(v))return P+T;for(;6>P.length;)P="0"+P;T=P+T}},n.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function R(A){if(A.h!=0)return!1;for(var g=0;g<A.g.length;g++)if(A.g[g]!=0)return!1;return!0}function x(A){return A.h==-1}n.l=function(A){return A=D(this,A),x(A)?-1:R(A)?0:1};function b(A){for(var g=A.g.length,v=[],T=0;T<g;T++)v[T]=~A.g[T];return new a(v,~A.h).add(y)}n.abs=function(){return x(this)?b(this):this},n.add=function(A){for(var g=Math.max(this.g.length,A.g.length),v=[],T=0,w=0;w<=g;w++){var P=T+(this.i(w)&65535)+(A.i(w)&65535),_=(P>>>16)+(this.i(w)>>>16)+(A.i(w)>>>16);T=_>>>16,P&=65535,_&=65535,v[w]=_<<16|P}return new a(v,v[v.length-1]&-2147483648?-1:0)};function D(A,g){return A.add(b(g))}n.j=function(A){if(R(this)||R(A))return m;if(x(this))return x(A)?b(this).j(b(A)):b(b(this).j(A));if(x(A))return b(this.j(b(A)));if(0>this.l(E)&&0>A.l(E))return h(this.m()*A.m());for(var g=this.g.length+A.g.length,v=[],T=0;T<2*g;T++)v[T]=0;for(T=0;T<this.g.length;T++)for(var w=0;w<A.g.length;w++){var P=this.i(T)>>>16,_=this.i(T)&65535,Nt=A.i(w)>>>16,rt=A.i(w)&65535;v[2*T+2*w]+=_*rt,k(v,2*T+2*w),v[2*T+2*w+1]+=P*rt,k(v,2*T+2*w+1),v[2*T+2*w+1]+=_*Nt,k(v,2*T+2*w+1),v[2*T+2*w+2]+=P*Nt,k(v,2*T+2*w+2)}for(T=0;T<g;T++)v[T]=v[2*T+1]<<16|v[2*T];for(T=g;T<2*g;T++)v[T]=0;return new a(v,0)};function k(A,g){for(;(A[g]&65535)!=A[g];)A[g+1]+=A[g]>>>16,A[g]&=65535,g++}function M(A,g){this.g=A,this.h=g}function F(A,g){if(R(g))throw Error("division by zero");if(R(A))return new M(m,m);if(x(A))return g=F(b(A),g),new M(b(g.g),b(g.h));if(x(g))return g=F(A,b(g)),new M(b(g.g),g.h);if(30<A.g.length){if(x(A)||x(g))throw Error("slowDivide_ only works with positive integers.");for(var v=y,T=g;0>=T.l(A);)v=q(v),T=q(T);var w=G(v,1),P=G(T,1);for(T=G(T,2),v=G(v,2);!R(T);){var _=P.add(T);0>=_.l(A)&&(w=w.add(v),P=_),T=G(T,1),v=G(v,1)}return g=D(A,w.j(g)),new M(w,g)}for(w=m;0<=A.l(g);){for(v=Math.max(1,Math.floor(A.m()/g.m())),T=Math.ceil(Math.log(v)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),P=h(v),_=P.j(g);x(_)||0<_.l(A);)v-=T,P=h(v),_=P.j(g);R(P)&&(P=y),w=w.add(P),A=D(A,_)}return new M(w,A)}n.A=function(A){return F(this,A).h},n.and=function(A){for(var g=Math.max(this.g.length,A.g.length),v=[],T=0;T<g;T++)v[T]=this.i(T)&A.i(T);return new a(v,this.h&A.h)},n.or=function(A){for(var g=Math.max(this.g.length,A.g.length),v=[],T=0;T<g;T++)v[T]=this.i(T)|A.i(T);return new a(v,this.h|A.h)},n.xor=function(A){for(var g=Math.max(this.g.length,A.g.length),v=[],T=0;T<g;T++)v[T]=this.i(T)^A.i(T);return new a(v,this.h^A.h)};function q(A){for(var g=A.g.length+1,v=[],T=0;T<g;T++)v[T]=A.i(T)<<1|A.i(T-1)>>>31;return new a(v,A.h)}function G(A,g){var v=g>>5;g%=32;for(var T=A.g.length-v,w=[],P=0;P<T;P++)w[P]=0<g?A.i(P+v)>>>g|A.i(P+v+1)<<32-g:A.i(P+v);return new a(w,A.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,ju=s,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=f,De=a}).apply(typeof El<"u"?El:typeof self<"u"?self:typeof window<"u"?window:{});var ks=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Bu,Uu,On,$u,Us,Vr,zu,qu,Hu;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,u,d){return o==Array.prototype||o==Object.prototype||(o[u]=d.value),o};function e(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof ks=="object"&&ks];for(var u=0;u<o.length;++u){var d=o[u];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var s=e(this);function i(o,u){if(u)t:{var d=s;o=o.split(".");for(var p=0;p<o.length-1;p++){var I=o[p];if(!(I in d))break t;d=d[I]}o=o[o.length-1],p=d[o],u=u(p),u!=p&&u!=null&&t(d,o,{configurable:!0,writable:!0,value:u})}}function r(o,u){o instanceof String&&(o+="");var d=0,p=!1,I={next:function(){if(!p&&d<o.length){var S=d++;return{value:u(S,o[S]),done:!1}}return p=!0,{done:!0,value:void 0}}};return I[Symbol.iterator]=function(){return I},I}i("Array.prototype.values",function(o){return o||function(){return r(this,function(u,d){return d})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function c(o){var u=typeof o;return u=u!="object"?u:o?Array.isArray(o)?"array":u:"null",u=="array"||u=="object"&&typeof o.length=="number"}function h(o){var u=typeof o;return u=="object"&&o!=null||u=="function"}function f(o,u,d){return o.call.apply(o.bind,arguments)}function m(o,u,d){if(!o)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var I=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(I,p),o.apply(u,I)}}return function(){return o.apply(u,arguments)}}function y(o,u,d){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:m,y.apply(null,arguments)}function E(o,u){var d=Array.prototype.slice.call(arguments,1);return function(){var p=d.slice();return p.push.apply(p,arguments),o.apply(this,p)}}function R(o,u){function d(){}d.prototype=u.prototype,o.aa=u.prototype,o.prototype=new d,o.prototype.constructor=o,o.Qb=function(p,I,S){for(var N=Array(arguments.length-2),tt=2;tt<arguments.length;tt++)N[tt-2]=arguments[tt];return u.prototype[I].apply(p,N)}}function x(o){const u=o.length;if(0<u){const d=Array(u);for(let p=0;p<u;p++)d[p]=o[p];return d}return[]}function b(o,u){for(let d=1;d<arguments.length;d++){const p=arguments[d];if(c(p)){const I=o.length||0,S=p.length||0;o.length=I+S;for(let N=0;N<S;N++)o[I+N]=p[N]}else o.push(p)}}class D{constructor(u,d){this.i=u,this.j=d,this.h=0,this.g=null}get(){let u;return 0<this.h?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function k(o){return/^[\s\xa0]*$/.test(o)}function M(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function F(o){return F[" "](o),o}F[" "]=function(){};var q=M().indexOf("Gecko")!=-1&&!(M().toLowerCase().indexOf("webkit")!=-1&&M().indexOf("Edge")==-1)&&!(M().indexOf("Trident")!=-1||M().indexOf("MSIE")!=-1)&&M().indexOf("Edge")==-1;function G(o,u,d){for(const p in o)u.call(d,o[p],p,o)}function A(o,u){for(const d in o)u.call(void 0,o[d],d,o)}function g(o){const u={};for(const d in o)u[d]=o[d];return u}const v="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(o,u){let d,p;for(let I=1;I<arguments.length;I++){p=arguments[I];for(d in p)o[d]=p[d];for(let S=0;S<v.length;S++)d=v[S],Object.prototype.hasOwnProperty.call(p,d)&&(o[d]=p[d])}}function w(o){var u=1;o=o.split(":");const d=[];for(;0<u&&o.length;)d.push(o.shift()),u--;return o.length&&d.push(o.join(":")),d}function P(o){l.setTimeout(()=>{throw o},0)}function _(){var o=xi;let u=null;return o.g&&(u=o.g,o.g=o.g.next,o.g||(o.h=null),u.next=null),u}class Nt{constructor(){this.h=this.g=null}add(u,d){const p=rt.get();p.set(u,d),this.h?this.h.next=p:this.g=p,this.h=p}}var rt=new D(()=>new Ft,o=>o.reset());class Ft{constructor(){this.next=this.g=this.h=null}set(u,d){this.h=u,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let Wt,Qt=!1,xi=new Nt,ha=()=>{const o=l.Promise.resolve(void 0);Wt=()=>{o.then(pf)}};var pf=()=>{for(var o;o=_();){try{o.h.call(o.g)}catch(d){P(d)}var u=rt;u.j(o),100>u.h&&(u.h++,o.next=u.g,u.g=o)}Qt=!1};function ie(){this.s=this.s,this.C=this.C}ie.prototype.s=!1,ie.prototype.ma=function(){this.s||(this.s=!0,this.N())},ie.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function _t(o,u){this.type=o,this.g=this.target=u,this.defaultPrevented=!1}_t.prototype.h=function(){this.defaultPrevented=!0};var gf=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,u=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const d=()=>{};l.addEventListener("test",d,u),l.removeEventListener("test",d,u)}catch{}return o}();function vn(o,u){if(_t.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var d=this.type=o.type,p=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=u,u=o.relatedTarget){if(q){t:{try{F(u.nodeName);var I=!0;break t}catch{}I=!1}I||(u=null)}}else d=="mouseover"?u=o.fromElement:d=="mouseout"&&(u=o.toElement);this.relatedTarget=u,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:yf[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&vn.aa.h.call(this)}}R(vn,_t);var yf={2:"touch",3:"pen",4:"mouse"};vn.prototype.h=function(){vn.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var gs="closure_listenable_"+(1e6*Math.random()|0),vf=0;function _f(o,u,d,p,I){this.listener=o,this.proxy=null,this.src=u,this.type=d,this.capture=!!p,this.ha=I,this.key=++vf,this.da=this.fa=!1}function ys(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function vs(o){this.src=o,this.g={},this.h=0}vs.prototype.add=function(o,u,d,p,I){var S=o.toString();o=this.g[S],o||(o=this.g[S]=[],this.h++);var N=Di(o,u,p,I);return-1<N?(u=o[N],d||(u.fa=!1)):(u=new _f(u,this.src,S,!!p,I),u.fa=d,o.push(u)),u};function Vi(o,u){var d=u.type;if(d in o.g){var p=o.g[d],I=Array.prototype.indexOf.call(p,u,void 0),S;(S=0<=I)&&Array.prototype.splice.call(p,I,1),S&&(ys(u),o.g[d].length==0&&(delete o.g[d],o.h--))}}function Di(o,u,d,p){for(var I=0;I<o.length;++I){var S=o[I];if(!S.da&&S.listener==u&&S.capture==!!d&&S.ha==p)return I}return-1}var Mi="closure_lm_"+(1e6*Math.random()|0),ki={};function da(o,u,d,p,I){if(Array.isArray(u)){for(var S=0;S<u.length;S++)da(o,u[S],d,p,I);return null}return d=pa(d),o&&o[gs]?o.K(u,d,h(p)?!!p.capture:!!p,I):Tf(o,u,d,!1,p,I)}function Tf(o,u,d,p,I,S){if(!u)throw Error("Invalid event type");var N=h(I)?!!I.capture:!!I,tt=Li(o);if(tt||(o[Mi]=tt=new vs(o)),d=tt.add(u,d,p,N,S),d.proxy)return d;if(p=Ef(),d.proxy=p,p.src=o,p.listener=d,o.addEventListener)gf||(I=N),I===void 0&&(I=!1),o.addEventListener(u.toString(),p,I);else if(o.attachEvent)o.attachEvent(ma(u.toString()),p);else if(o.addListener&&o.removeListener)o.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return d}function Ef(){function o(d){return u.call(o.src,o.listener,d)}const u=wf;return o}function fa(o,u,d,p,I){if(Array.isArray(u))for(var S=0;S<u.length;S++)fa(o,u[S],d,p,I);else p=h(p)?!!p.capture:!!p,d=pa(d),o&&o[gs]?(o=o.i,u=String(u).toString(),u in o.g&&(S=o.g[u],d=Di(S,d,p,I),-1<d&&(ys(S[d]),Array.prototype.splice.call(S,d,1),S.length==0&&(delete o.g[u],o.h--)))):o&&(o=Li(o))&&(u=o.g[u.toString()],o=-1,u&&(o=Di(u,d,p,I)),(d=-1<o?u[o]:null)&&Ni(d))}function Ni(o){if(typeof o!="number"&&o&&!o.da){var u=o.src;if(u&&u[gs])Vi(u.i,o);else{var d=o.type,p=o.proxy;u.removeEventListener?u.removeEventListener(d,p,o.capture):u.detachEvent?u.detachEvent(ma(d),p):u.addListener&&u.removeListener&&u.removeListener(p),(d=Li(u))?(Vi(d,o),d.h==0&&(d.src=null,u[Mi]=null)):ys(o)}}}function ma(o){return o in ki?ki[o]:ki[o]="on"+o}function wf(o,u){if(o.da)o=!0;else{u=new vn(u,this);var d=o.listener,p=o.ha||o.src;o.fa&&Ni(o),o=d.call(p,u)}return o}function Li(o){return o=o[Mi],o instanceof vs?o:null}var Oi="__closure_events_fn_"+(1e9*Math.random()>>>0);function pa(o){return typeof o=="function"?o:(o[Oi]||(o[Oi]=function(u){return o.handleEvent(u)}),o[Oi])}function Tt(){ie.call(this),this.i=new vs(this),this.M=this,this.F=null}R(Tt,ie),Tt.prototype[gs]=!0,Tt.prototype.removeEventListener=function(o,u,d,p){fa(this,o,u,d,p)};function bt(o,u){var d,p=o.F;if(p)for(d=[];p;p=p.F)d.push(p);if(o=o.M,p=u.type||u,typeof u=="string")u=new _t(u,o);else if(u instanceof _t)u.target=u.target||o;else{var I=u;u=new _t(p,o),T(u,I)}if(I=!0,d)for(var S=d.length-1;0<=S;S--){var N=u.g=d[S];I=_s(N,p,!0,u)&&I}if(N=u.g=o,I=_s(N,p,!0,u)&&I,I=_s(N,p,!1,u)&&I,d)for(S=0;S<d.length;S++)N=u.g=d[S],I=_s(N,p,!1,u)&&I}Tt.prototype.N=function(){if(Tt.aa.N.call(this),this.i){var o=this.i,u;for(u in o.g){for(var d=o.g[u],p=0;p<d.length;p++)ys(d[p]);delete o.g[u],o.h--}}this.F=null},Tt.prototype.K=function(o,u,d,p){return this.i.add(String(o),u,!1,d,p)},Tt.prototype.L=function(o,u,d,p){return this.i.add(String(o),u,!0,d,p)};function _s(o,u,d,p){if(u=o.i.g[String(u)],!u)return!0;u=u.concat();for(var I=!0,S=0;S<u.length;++S){var N=u[S];if(N&&!N.da&&N.capture==d){var tt=N.listener,mt=N.ha||N.src;N.fa&&Vi(o.i,N),I=tt.call(mt,p)!==!1&&I}}return I&&!p.defaultPrevented}function ga(o,u,d){if(typeof o=="function")d&&(o=y(o,d));else if(o&&typeof o.handleEvent=="function")o=y(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:l.setTimeout(o,u||0)}function ya(o){o.g=ga(()=>{o.g=null,o.i&&(o.i=!1,ya(o))},o.l);const u=o.h;o.h=null,o.m.apply(null,u)}class Af extends ie{constructor(u,d){super(),this.m=u,this.l=d,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:ya(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _n(o){ie.call(this),this.h=o,this.g={}}R(_n,ie);var va=[];function _a(o){G(o.g,function(u,d){this.g.hasOwnProperty(d)&&Ni(u)},o),o.g={}}_n.prototype.N=function(){_n.aa.N.call(this),_a(this)},_n.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Fi=l.JSON.stringify,If=l.JSON.parse,Pf=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function ji(){}ji.prototype.h=null;function Ta(o){return o.h||(o.h=o.i())}function Ea(){}var Tn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Bi(){_t.call(this,"d")}R(Bi,_t);function Ui(){_t.call(this,"c")}R(Ui,_t);var we={},wa=null;function Ts(){return wa=wa||new Tt}we.La="serverreachability";function Aa(o){_t.call(this,we.La,o)}R(Aa,_t);function En(o){const u=Ts();bt(u,new Aa(u))}we.STAT_EVENT="statevent";function Ia(o,u){_t.call(this,we.STAT_EVENT,o),this.stat=u}R(Ia,_t);function xt(o){const u=Ts();bt(u,new Ia(u,o))}we.Ma="timingevent";function Pa(o,u){_t.call(this,we.Ma,o),this.size=u}R(Pa,_t);function wn(o,u){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},u)}function An(){this.g=!0}An.prototype.xa=function(){this.g=!1};function Sf(o,u,d,p,I,S){o.info(function(){if(o.g)if(S)for(var N="",tt=S.split("&"),mt=0;mt<tt.length;mt++){var J=tt[mt].split("=");if(1<J.length){var Et=J[0];J=J[1];var wt=Et.split("_");N=2<=wt.length&&wt[1]=="type"?N+(Et+"="+J+"&"):N+(Et+"=redacted&")}}else N=null;else N=S;return"XMLHTTP REQ ("+p+") [attempt "+I+"]: "+u+`
`+d+`
`+N})}function Cf(o,u,d,p,I,S,N){o.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+I+"]: "+u+`
`+d+`
`+S+" "+N})}function Be(o,u,d,p){o.info(function(){return"XMLHTTP TEXT ("+u+"): "+bf(o,d)+(p?" "+p:"")})}function Rf(o,u){o.info(function(){return"TIMEOUT: "+u})}An.prototype.info=function(){};function bf(o,u){if(!o.g)return u;if(!u)return null;try{var d=JSON.parse(u);if(d){for(o=0;o<d.length;o++)if(Array.isArray(d[o])){var p=d[o];if(!(2>p.length)){var I=p[1];if(Array.isArray(I)&&!(1>I.length)){var S=I[0];if(S!="noop"&&S!="stop"&&S!="close")for(var N=1;N<I.length;N++)I[N]=""}}}}return Fi(d)}catch{return u}}var Es={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Sa={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},$i;function ws(){}R(ws,ji),ws.prototype.g=function(){return new XMLHttpRequest},ws.prototype.i=function(){return{}},$i=new ws;function re(o,u,d,p){this.j=o,this.i=u,this.l=d,this.R=p||1,this.U=new _n(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ca}function Ca(){this.i=null,this.g="",this.h=!1}var Ra={},zi={};function qi(o,u,d){o.L=1,o.v=Ss(Yt(u)),o.m=d,o.P=!0,ba(o,null)}function ba(o,u){o.F=Date.now(),As(o),o.A=Yt(o.v);var d=o.A,p=o.R;Array.isArray(p)||(p=[String(p)]),za(d.i,"t",p),o.C=0,d=o.j.J,o.h=new Ca,o.g=al(o.j,d?u:null,!o.m),0<o.O&&(o.M=new Af(y(o.Y,o,o.g),o.O)),u=o.U,d=o.g,p=o.ca;var I="readystatechange";Array.isArray(I)||(I&&(va[0]=I.toString()),I=va);for(var S=0;S<I.length;S++){var N=da(d,I[S],p||u.handleEvent,!1,u.h||u);if(!N)break;u.g[N.key]=N}u=o.H?g(o.H):{},o.m?(o.u||(o.u="POST"),u["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,u)):(o.u="GET",o.g.ea(o.A,o.u,null,u)),En(),Sf(o.i,o.u,o.A,o.l,o.R,o.m)}re.prototype.ca=function(o){o=o.target;const u=this.M;u&&Xt(o)==3?u.j():this.Y(o)},re.prototype.Y=function(o){try{if(o==this.g)t:{const wt=Xt(this.g);var u=this.g.Ba();const ze=this.g.Z();if(!(3>wt)&&(wt!=3||this.g&&(this.h.h||this.g.oa()||Ya(this.g)))){this.J||wt!=4||u==7||(u==8||0>=ze?En(3):En(2)),Hi(this);var d=this.g.Z();this.X=d;e:if(xa(this)){var p=Ya(this.g);o="";var I=p.length,S=Xt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ae(this),In(this);var N="";break e}this.h.i=new l.TextDecoder}for(u=0;u<I;u++)this.h.h=!0,o+=this.h.i.decode(p[u],{stream:!(S&&u==I-1)});p.length=0,this.h.g+=o,this.C=0,N=this.h.g}else N=this.g.oa();if(this.o=d==200,Cf(this.i,this.u,this.A,this.l,this.R,wt,d),this.o){if(this.T&&!this.K){e:{if(this.g){var tt,mt=this.g;if((tt=mt.g?mt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(tt)){var J=tt;break e}}J=null}if(d=J)Be(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Gi(this,d);else{this.o=!1,this.s=3,xt(12),Ae(this),In(this);break t}}if(this.P){d=!0;let jt;for(;!this.J&&this.C<N.length;)if(jt=xf(this,N),jt==zi){wt==4&&(this.s=4,xt(14),d=!1),Be(this.i,this.l,null,"[Incomplete Response]");break}else if(jt==Ra){this.s=4,xt(15),Be(this.i,this.l,N,"[Invalid Chunk]"),d=!1;break}else Be(this.i,this.l,jt,null),Gi(this,jt);if(xa(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),wt!=4||N.length!=0||this.h.h||(this.s=1,xt(16),d=!1),this.o=this.o&&d,!d)Be(this.i,this.l,N,"[Invalid Chunked Response]"),Ae(this),In(this);else if(0<N.length&&!this.W){this.W=!0;var Et=this.j;Et.g==this&&Et.ba&&!Et.M&&(Et.j.info("Great, no buffering proxy detected. Bytes received: "+N.length),Ji(Et),Et.M=!0,xt(11))}}else Be(this.i,this.l,N,null),Gi(this,N);wt==4&&Ae(this),this.o&&!this.J&&(wt==4?sl(this.j,this):(this.o=!1,As(this)))}else Kf(this.g),d==400&&0<N.indexOf("Unknown SID")?(this.s=3,xt(12)):(this.s=0,xt(13)),Ae(this),In(this)}}}catch{}finally{}};function xa(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function xf(o,u){var d=o.C,p=u.indexOf(`
`,d);return p==-1?zi:(d=Number(u.substring(d,p)),isNaN(d)?Ra:(p+=1,p+d>u.length?zi:(u=u.slice(p,p+d),o.C=p+d,u)))}re.prototype.cancel=function(){this.J=!0,Ae(this)};function As(o){o.S=Date.now()+o.I,Va(o,o.I)}function Va(o,u){if(o.B!=null)throw Error("WatchDog timer not null");o.B=wn(y(o.ba,o),u)}function Hi(o){o.B&&(l.clearTimeout(o.B),o.B=null)}re.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(Rf(this.i,this.A),this.L!=2&&(En(),xt(17)),Ae(this),this.s=2,In(this)):Va(this,this.S-o)};function In(o){o.j.G==0||o.J||sl(o.j,o)}function Ae(o){Hi(o);var u=o.M;u&&typeof u.ma=="function"&&u.ma(),o.M=null,_a(o.U),o.g&&(u=o.g,o.g=null,u.abort(),u.ma())}function Gi(o,u){try{var d=o.j;if(d.G!=0&&(d.g==o||Ki(d.h,o))){if(!o.K&&Ki(d.h,o)&&d.G==3){try{var p=d.Da.g.parse(u)}catch{p=null}if(Array.isArray(p)&&p.length==3){var I=p;if(I[0]==0){t:if(!d.u){if(d.g)if(d.g.F+3e3<o.F)Vs(d),bs(d);else break t;Xi(d),xt(18)}}else d.za=I[1],0<d.za-d.T&&37500>I[2]&&d.F&&d.v==0&&!d.C&&(d.C=wn(y(d.Za,d),6e3));if(1>=ka(d.h)&&d.ca){try{d.ca()}catch{}d.ca=void 0}}else Pe(d,11)}else if((o.K||d.g==o)&&Vs(d),!k(u))for(I=d.Da.g.parse(u),u=0;u<I.length;u++){let J=I[u];if(d.T=J[0],J=J[1],d.G==2)if(J[0]=="c"){d.K=J[1],d.ia=J[2];const Et=J[3];Et!=null&&(d.la=Et,d.j.info("VER="+d.la));const wt=J[4];wt!=null&&(d.Aa=wt,d.j.info("SVER="+d.Aa));const ze=J[5];ze!=null&&typeof ze=="number"&&0<ze&&(p=1.5*ze,d.L=p,d.j.info("backChannelRequestTimeoutMs_="+p)),p=d;const jt=o.g;if(jt){const Ms=jt.g?jt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ms){var S=p.h;S.g||Ms.indexOf("spdy")==-1&&Ms.indexOf("quic")==-1&&Ms.indexOf("h2")==-1||(S.j=S.l,S.g=new Set,S.h&&(Wi(S,S.h),S.h=null))}if(p.D){const Zi=jt.g?jt.g.getResponseHeader("X-HTTP-Session-Id"):null;Zi&&(p.ya=Zi,et(p.I,p.D,Zi))}}d.G=3,d.l&&d.l.ua(),d.ba&&(d.R=Date.now()-o.F,d.j.info("Handshake RTT: "+d.R+"ms")),p=d;var N=o;if(p.qa=ol(p,p.J?p.ia:null,p.W),N.K){Na(p.h,N);var tt=N,mt=p.L;mt&&(tt.I=mt),tt.B&&(Hi(tt),As(tt)),p.g=N}else el(p);0<d.i.length&&xs(d)}else J[0]!="stop"&&J[0]!="close"||Pe(d,7);else d.G==3&&(J[0]=="stop"||J[0]=="close"?J[0]=="stop"?Pe(d,7):Yi(d):J[0]!="noop"&&d.l&&d.l.ta(J),d.v=0)}}En(4)}catch{}}var Vf=class{constructor(o,u){this.g=o,this.map=u}};function Da(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ma(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function ka(o){return o.h?1:o.g?o.g.size:0}function Ki(o,u){return o.h?o.h==u:o.g?o.g.has(u):!1}function Wi(o,u){o.g?o.g.add(u):o.h=u}function Na(o,u){o.h&&o.h==u?o.h=null:o.g&&o.g.has(u)&&o.g.delete(u)}Da.prototype.cancel=function(){if(this.i=La(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function La(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let u=o.i;for(const d of o.g.values())u=u.concat(d.D);return u}return x(o.i)}function Df(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(c(o)){for(var u=[],d=o.length,p=0;p<d;p++)u.push(o[p]);return u}u=[],d=0;for(p in o)u[d++]=o[p];return u}function Mf(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(c(o)||typeof o=="string"){var u=[];o=o.length;for(var d=0;d<o;d++)u.push(d);return u}u=[],d=0;for(const p in o)u[d++]=p;return u}}}function Oa(o,u){if(o.forEach&&typeof o.forEach=="function")o.forEach(u,void 0);else if(c(o)||typeof o=="string")Array.prototype.forEach.call(o,u,void 0);else for(var d=Mf(o),p=Df(o),I=p.length,S=0;S<I;S++)u.call(void 0,p[S],d&&d[S],o)}var Fa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function kf(o,u){if(o){o=o.split("&");for(var d=0;d<o.length;d++){var p=o[d].indexOf("="),I=null;if(0<=p){var S=o[d].substring(0,p);I=o[d].substring(p+1)}else S=o[d];u(S,I?decodeURIComponent(I.replace(/\+/g," ")):"")}}}function Ie(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof Ie){this.h=o.h,Is(this,o.j),this.o=o.o,this.g=o.g,Ps(this,o.s),this.l=o.l;var u=o.i,d=new Cn;d.i=u.i,u.g&&(d.g=new Map(u.g),d.h=u.h),ja(this,d),this.m=o.m}else o&&(u=String(o).match(Fa))?(this.h=!1,Is(this,u[1]||"",!0),this.o=Pn(u[2]||""),this.g=Pn(u[3]||"",!0),Ps(this,u[4]),this.l=Pn(u[5]||"",!0),ja(this,u[6]||"",!0),this.m=Pn(u[7]||"")):(this.h=!1,this.i=new Cn(null,this.h))}Ie.prototype.toString=function(){var o=[],u=this.j;u&&o.push(Sn(u,Ba,!0),":");var d=this.g;return(d||u=="file")&&(o.push("//"),(u=this.o)&&o.push(Sn(u,Ba,!0),"@"),o.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.s,d!=null&&o.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&o.push("/"),o.push(Sn(d,d.charAt(0)=="/"?Of:Lf,!0))),(d=this.i.toString())&&o.push("?",d),(d=this.m)&&o.push("#",Sn(d,jf)),o.join("")};function Yt(o){return new Ie(o)}function Is(o,u,d){o.j=d?Pn(u,!0):u,o.j&&(o.j=o.j.replace(/:$/,""))}function Ps(o,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);o.s=u}else o.s=null}function ja(o,u,d){u instanceof Cn?(o.i=u,Bf(o.i,o.h)):(d||(u=Sn(u,Ff)),o.i=new Cn(u,o.h))}function et(o,u,d){o.i.set(u,d)}function Ss(o){return et(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Pn(o,u){return o?u?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Sn(o,u,d){return typeof o=="string"?(o=encodeURI(o).replace(u,Nf),d&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Nf(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Ba=/[#\/\?@]/g,Lf=/[#\?:]/g,Of=/[#\?]/g,Ff=/[#\?@]/g,jf=/#/g;function Cn(o,u){this.h=this.g=null,this.i=o||null,this.j=!!u}function oe(o){o.g||(o.g=new Map,o.h=0,o.i&&kf(o.i,function(u,d){o.add(decodeURIComponent(u.replace(/\+/g," ")),d)}))}n=Cn.prototype,n.add=function(o,u){oe(this),this.i=null,o=Ue(this,o);var d=this.g.get(o);return d||this.g.set(o,d=[]),d.push(u),this.h+=1,this};function Ua(o,u){oe(o),u=Ue(o,u),o.g.has(u)&&(o.i=null,o.h-=o.g.get(u).length,o.g.delete(u))}function $a(o,u){return oe(o),u=Ue(o,u),o.g.has(u)}n.forEach=function(o,u){oe(this),this.g.forEach(function(d,p){d.forEach(function(I){o.call(u,I,p,this)},this)},this)},n.na=function(){oe(this);const o=Array.from(this.g.values()),u=Array.from(this.g.keys()),d=[];for(let p=0;p<u.length;p++){const I=o[p];for(let S=0;S<I.length;S++)d.push(u[p])}return d},n.V=function(o){oe(this);let u=[];if(typeof o=="string")$a(this,o)&&(u=u.concat(this.g.get(Ue(this,o))));else{o=Array.from(this.g.values());for(let d=0;d<o.length;d++)u=u.concat(o[d])}return u},n.set=function(o,u){return oe(this),this.i=null,o=Ue(this,o),$a(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[u]),this.h+=1,this},n.get=function(o,u){return o?(o=this.V(o),0<o.length?String(o[0]):u):u};function za(o,u,d){Ua(o,u),0<d.length&&(o.i=null,o.g.set(Ue(o,u),x(d)),o.h+=d.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],u=Array.from(this.g.keys());for(var d=0;d<u.length;d++){var p=u[d];const S=encodeURIComponent(String(p)),N=this.V(p);for(p=0;p<N.length;p++){var I=S;N[p]!==""&&(I+="="+encodeURIComponent(String(N[p]))),o.push(I)}}return this.i=o.join("&")};function Ue(o,u){return u=String(u),o.j&&(u=u.toLowerCase()),u}function Bf(o,u){u&&!o.j&&(oe(o),o.i=null,o.g.forEach(function(d,p){var I=p.toLowerCase();p!=I&&(Ua(this,p),za(this,I,d))},o)),o.j=u}function Uf(o,u){const d=new An;if(l.Image){const p=new Image;p.onload=E(ae,d,"TestLoadImage: loaded",!0,u,p),p.onerror=E(ae,d,"TestLoadImage: error",!1,u,p),p.onabort=E(ae,d,"TestLoadImage: abort",!1,u,p),p.ontimeout=E(ae,d,"TestLoadImage: timeout",!1,u,p),l.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=o}else u(!1)}function $f(o,u){const d=new An,p=new AbortController,I=setTimeout(()=>{p.abort(),ae(d,"TestPingServer: timeout",!1,u)},1e4);fetch(o,{signal:p.signal}).then(S=>{clearTimeout(I),S.ok?ae(d,"TestPingServer: ok",!0,u):ae(d,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(I),ae(d,"TestPingServer: error",!1,u)})}function ae(o,u,d,p,I){try{I&&(I.onload=null,I.onerror=null,I.onabort=null,I.ontimeout=null),p(d)}catch{}}function zf(){this.g=new Pf}function qf(o,u,d){const p=d||"";try{Oa(o,function(I,S){let N=I;h(I)&&(N=Fi(I)),u.push(p+S+"="+encodeURIComponent(N))})}catch(I){throw u.push(p+"type="+encodeURIComponent("_badmap")),I}}function Rn(o){this.l=o.Ub||null,this.j=o.eb||!1}R(Rn,ji),Rn.prototype.g=function(){return new Cs(this.l,this.j)},Rn.prototype.i=function(o){return function(){return o}}({});function Cs(o,u){Tt.call(this),this.D=o,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(Cs,Tt),n=Cs.prototype,n.open=function(o,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=u,this.readyState=1,xn(this)},n.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const u={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(u.body=o),(this.D||l).fetch(new Request(this.A,u)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,bn(this)),this.readyState=0},n.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,xn(this)),this.g&&(this.readyState=3,xn(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;qa(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function qa(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}n.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var u=o.value?o.value:new Uint8Array(0);(u=this.v.decode(u,{stream:!o.done}))&&(this.response=this.responseText+=u)}o.done?bn(this):xn(this),this.readyState==3&&qa(this)}},n.Ra=function(o){this.g&&(this.response=this.responseText=o,bn(this))},n.Qa=function(o){this.g&&(this.response=o,bn(this))},n.ga=function(){this.g&&bn(this)};function bn(o){o.readyState=4,o.l=null,o.j=null,o.v=null,xn(o)}n.setRequestHeader=function(o,u){this.u.append(o,u)},n.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],u=this.h.entries();for(var d=u.next();!d.done;)d=d.value,o.push(d[0]+": "+d[1]),d=u.next();return o.join(`\r
`)};function xn(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Cs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function Ha(o){let u="";return G(o,function(d,p){u+=p,u+=":",u+=d,u+=`\r
`}),u}function Qi(o,u,d){t:{for(p in d){var p=!1;break t}p=!0}p||(d=Ha(d),typeof o=="string"?d!=null&&encodeURIComponent(String(d)):et(o,u,d))}function st(o){Tt.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(st,Tt);var Hf=/^https?$/i,Gf=["POST","PUT"];n=st.prototype,n.Ha=function(o){this.J=o},n.ea=function(o,u,d,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);u=u?u.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():$i.g(),this.v=this.o?Ta(this.o):Ta($i),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(u,String(o),!0),this.B=!1}catch(S){Ga(this,S);return}if(o=d||"",d=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var I in p)d.set(I,p[I]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(const S of p.keys())d.set(S,p.get(S));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(d.keys()).find(S=>S.toLowerCase()=="content-type"),I=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Gf,u,void 0))||p||I||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[S,N]of d)this.g.setRequestHeader(S,N);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Qa(this),this.u=!0,this.g.send(o),this.u=!1}catch(S){Ga(this,S)}};function Ga(o,u){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=u,o.m=5,Ka(o),Rs(o)}function Ka(o){o.A||(o.A=!0,bt(o,"complete"),bt(o,"error"))}n.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,bt(this,"complete"),bt(this,"abort"),Rs(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Rs(this,!0)),st.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Wa(this):this.bb())},n.bb=function(){Wa(this)};function Wa(o){if(o.h&&typeof a<"u"&&(!o.v[1]||Xt(o)!=4||o.Z()!=2)){if(o.u&&Xt(o)==4)ga(o.Ea,0,o);else if(bt(o,"readystatechange"),Xt(o)==4){o.h=!1;try{const N=o.Z();t:switch(N){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break t;default:u=!1}var d;if(!(d=u)){var p;if(p=N===0){var I=String(o.D).match(Fa)[1]||null;!I&&l.self&&l.self.location&&(I=l.self.location.protocol.slice(0,-1)),p=!Hf.test(I?I.toLowerCase():"")}d=p}if(d)bt(o,"complete"),bt(o,"success");else{o.m=6;try{var S=2<Xt(o)?o.g.statusText:""}catch{S=""}o.l=S+" ["+o.Z()+"]",Ka(o)}}finally{Rs(o)}}}}function Rs(o,u){if(o.g){Qa(o);const d=o.g,p=o.v[0]?()=>{}:null;o.g=null,o.v=null,u||bt(o,"ready");try{d.onreadystatechange=p}catch{}}}function Qa(o){o.I&&(l.clearTimeout(o.I),o.I=null)}n.isActive=function(){return!!this.g};function Xt(o){return o.g?o.g.readyState:0}n.Z=function(){try{return 2<Xt(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(o){if(this.g){var u=this.g.responseText;return o&&u.indexOf(o)==0&&(u=u.substring(o.length)),If(u)}};function Ya(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function Kf(o){const u={};o=(o.g&&2<=Xt(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<o.length;p++){if(k(o[p]))continue;var d=w(o[p]);const I=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const S=u[I]||[];u[I]=S,S.push(d)}A(u,function(p){return p.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vn(o,u,d){return d&&d.internalChannelParams&&d.internalChannelParams[o]||u}function Xa(o){this.Aa=0,this.i=[],this.j=new An,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Vn("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Vn("baseRetryDelayMs",5e3,o),this.cb=Vn("retryDelaySeedMs",1e4,o),this.Wa=Vn("forwardChannelMaxRetries",2,o),this.wa=Vn("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new Da(o&&o.concurrentRequestLimit),this.Da=new zf,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Xa.prototype,n.la=8,n.G=1,n.connect=function(o,u,d,p){xt(0),this.W=o,this.H=u||{},d&&p!==void 0&&(this.H.OSID=d,this.H.OAID=p),this.F=this.X,this.I=ol(this,null,this.W),xs(this)};function Yi(o){if(Ja(o),o.G==3){var u=o.U++,d=Yt(o.I);if(et(d,"SID",o.K),et(d,"RID",u),et(d,"TYPE","terminate"),Dn(o,d),u=new re(o,o.j,u),u.L=2,u.v=Ss(Yt(d)),d=!1,l.navigator&&l.navigator.sendBeacon)try{d=l.navigator.sendBeacon(u.v.toString(),"")}catch{}!d&&l.Image&&(new Image().src=u.v,d=!0),d||(u.g=al(u.j,null),u.g.ea(u.v)),u.F=Date.now(),As(u)}rl(o)}function bs(o){o.g&&(Ji(o),o.g.cancel(),o.g=null)}function Ja(o){bs(o),o.u&&(l.clearTimeout(o.u),o.u=null),Vs(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function xs(o){if(!Ma(o.h)&&!o.s){o.s=!0;var u=o.Ga;Wt||ha(),Qt||(Wt(),Qt=!0),xi.add(u,o),o.B=0}}function Wf(o,u){return ka(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=u.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=wn(y(o.Ga,o,u),il(o,o.B)),o.B++,!0)}n.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const I=new re(this,this.j,o);let S=this.o;if(this.S&&(S?(S=g(S),T(S,this.S)):S=this.S),this.m!==null||this.O||(I.H=S,S=null),this.P)t:{for(var u=0,d=0;d<this.i.length;d++){e:{var p=this.i[d];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break e}p=void 0}if(p===void 0)break;if(u+=p,4096<u){u=d;break t}if(u===4096||d===this.i.length-1){u=d+1;break t}}u=1e3}else u=1e3;u=tl(this,I,u),d=Yt(this.I),et(d,"RID",o),et(d,"CVER",22),this.D&&et(d,"X-HTTP-Session-Id",this.D),Dn(this,d),S&&(this.O?u="headers="+encodeURIComponent(String(Ha(S)))+"&"+u:this.m&&Qi(d,this.m,S)),Wi(this.h,I),this.Ua&&et(d,"TYPE","init"),this.P?(et(d,"$req",u),et(d,"SID","null"),I.T=!0,qi(I,d,null)):qi(I,d,u),this.G=2}}else this.G==3&&(o?Za(this,o):this.i.length==0||Ma(this.h)||Za(this))};function Za(o,u){var d;u?d=u.l:d=o.U++;const p=Yt(o.I);et(p,"SID",o.K),et(p,"RID",d),et(p,"AID",o.T),Dn(o,p),o.m&&o.o&&Qi(p,o.m,o.o),d=new re(o,o.j,d,o.B+1),o.m===null&&(d.H=o.o),u&&(o.i=u.D.concat(o.i)),u=tl(o,d,1e3),d.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),Wi(o.h,d),qi(d,p,u)}function Dn(o,u){o.H&&G(o.H,function(d,p){et(u,p,d)}),o.l&&Oa({},function(d,p){et(u,p,d)})}function tl(o,u,d){d=Math.min(o.i.length,d);var p=o.l?y(o.l.Na,o.l,o):null;t:{var I=o.i;let S=-1;for(;;){const N=["count="+d];S==-1?0<d?(S=I[0].g,N.push("ofs="+S)):S=0:N.push("ofs="+S);let tt=!0;for(let mt=0;mt<d;mt++){let J=I[mt].g;const Et=I[mt].map;if(J-=S,0>J)S=Math.max(0,I[mt].g-100),tt=!1;else try{qf(Et,N,"req"+J+"_")}catch{p&&p(Et)}}if(tt){p=N.join("&");break t}}}return o=o.i.splice(0,d),u.D=o,p}function el(o){if(!o.g&&!o.u){o.Y=1;var u=o.Fa;Wt||ha(),Qt||(Wt(),Qt=!0),xi.add(u,o),o.v=0}}function Xi(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=wn(y(o.Fa,o),il(o,o.v)),o.v++,!0)}n.Fa=function(){if(this.u=null,nl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=wn(y(this.ab,this),o)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,xt(10),bs(this),nl(this))};function Ji(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function nl(o){o.g=new re(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var u=Yt(o.qa);et(u,"RID","rpc"),et(u,"SID",o.K),et(u,"AID",o.T),et(u,"CI",o.F?"0":"1"),!o.F&&o.ja&&et(u,"TO",o.ja),et(u,"TYPE","xmlhttp"),Dn(o,u),o.m&&o.o&&Qi(u,o.m,o.o),o.L&&(o.g.I=o.L);var d=o.g;o=o.ia,d.L=1,d.v=Ss(Yt(u)),d.m=null,d.P=!0,ba(d,o)}n.Za=function(){this.C!=null&&(this.C=null,bs(this),Xi(this),xt(19))};function Vs(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function sl(o,u){var d=null;if(o.g==u){Vs(o),Ji(o),o.g=null;var p=2}else if(Ki(o.h,u))d=u.D,Na(o.h,u),p=1;else return;if(o.G!=0){if(u.o)if(p==1){d=u.m?u.m.length:0,u=Date.now()-u.F;var I=o.B;p=Ts(),bt(p,new Pa(p,d)),xs(o)}else el(o);else if(I=u.s,I==3||I==0&&0<u.X||!(p==1&&Wf(o,u)||p==2&&Xi(o)))switch(d&&0<d.length&&(u=o.h,u.i=u.i.concat(d)),I){case 1:Pe(o,5);break;case 4:Pe(o,10);break;case 3:Pe(o,6);break;default:Pe(o,2)}}}function il(o,u){let d=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(d*=2),d*u}function Pe(o,u){if(o.j.info("Error code "+u),u==2){var d=y(o.fb,o),p=o.Xa;const I=!p;p=new Ie(p||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Is(p,"https"),Ss(p),I?Uf(p.toString(),d):$f(p.toString(),d)}else xt(2);o.G=0,o.l&&o.l.sa(u),rl(o),Ja(o)}n.fb=function(o){o?(this.j.info("Successfully pinged google.com"),xt(2)):(this.j.info("Failed to ping google.com"),xt(1))};function rl(o){if(o.G=0,o.ka=[],o.l){const u=La(o.h);(u.length!=0||o.i.length!=0)&&(b(o.ka,u),b(o.ka,o.i),o.h.i.length=0,x(o.i),o.i.length=0),o.l.ra()}}function ol(o,u,d){var p=d instanceof Ie?Yt(d):new Ie(d);if(p.g!="")u&&(p.g=u+"."+p.g),Ps(p,p.s);else{var I=l.location;p=I.protocol,u=u?u+"."+I.hostname:I.hostname,I=+I.port;var S=new Ie(null);p&&Is(S,p),u&&(S.g=u),I&&Ps(S,I),d&&(S.l=d),p=S}return d=o.D,u=o.ya,d&&u&&et(p,d,u),et(p,"VER",o.la),Dn(o,p),p}function al(o,u,d){if(u&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return u=o.Ca&&!o.pa?new st(new Rn({eb:d})):new st(o.pa),u.Ha(o.J),u}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ll(){}n=ll.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ds(){}Ds.prototype.g=function(o,u){return new Mt(o,u)};function Mt(o,u){Tt.call(this),this.g=new Xa(u),this.l=o,this.h=u&&u.messageUrlParams||null,o=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(o?o["X-WebChannel-Content-Type"]=u.messageContentType:o={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.va&&(o?o["X-WebChannel-Client-Profile"]=u.va:o={"X-WebChannel-Client-Profile":u.va}),this.g.S=o,(o=u&&u.Sb)&&!k(o)&&(this.g.m=o),this.v=u&&u.supportsCrossDomainXhr||!1,this.u=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!k(u)&&(this.g.D=u,o=this.h,o!==null&&u in o&&(o=this.h,u in o&&delete o[u])),this.j=new $e(this)}R(Mt,Tt),Mt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Mt.prototype.close=function(){Yi(this.g)},Mt.prototype.o=function(o){var u=this.g;if(typeof o=="string"){var d={};d.__data__=o,o=d}else this.u&&(d={},d.__data__=Fi(o),o=d);u.i.push(new Vf(u.Ya++,o)),u.G==3&&xs(u)},Mt.prototype.N=function(){this.g.l=null,delete this.j,Yi(this.g),delete this.g,Mt.aa.N.call(this)};function cl(o){Bi.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var u=o.__sm__;if(u){t:{for(const d in u){o=d;break t}o=void 0}(this.i=o)&&(o=this.i,u=u!==null&&o in u?u[o]:void 0),this.data=u}else this.data=o}R(cl,Bi);function ul(){Ui.call(this),this.status=1}R(ul,Ui);function $e(o){this.g=o}R($e,ll),$e.prototype.ua=function(){bt(this.g,"a")},$e.prototype.ta=function(o){bt(this.g,new cl(o))},$e.prototype.sa=function(o){bt(this.g,new ul)},$e.prototype.ra=function(){bt(this.g,"b")},Ds.prototype.createWebChannel=Ds.prototype.g,Mt.prototype.send=Mt.prototype.o,Mt.prototype.open=Mt.prototype.m,Mt.prototype.close=Mt.prototype.close,Hu=function(){return new Ds},qu=function(){return Ts()},zu=we,Vr={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Es.NO_ERROR=0,Es.TIMEOUT=8,Es.HTTP_ERROR=6,Us=Es,Sa.COMPLETE="complete",$u=Sa,Ea.EventType=Tn,Tn.OPEN="a",Tn.CLOSE="b",Tn.ERROR="c",Tn.MESSAGE="d",Tt.prototype.listen=Tt.prototype.K,On=Ea,Uu=Rn,st.prototype.listenOnce=st.prototype.L,st.prototype.getLastError=st.prototype.Ka,st.prototype.getLastErrorCode=st.prototype.Ba,st.prototype.getStatus=st.prototype.Z,st.prototype.getResponseJson=st.prototype.Oa,st.prototype.getResponseText=st.prototype.oa,st.prototype.send=st.prototype.ea,st.prototype.setWithCredentials=st.prototype.Ha,Bu=st}).apply(typeof ks<"u"?ks:typeof self<"u"?self:typeof window<"u"?window:{});const wl="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}St.UNAUTHENTICATED=new St(null),St.GOOGLE_CREDENTIALS=new St("google-credentials-uid"),St.FIRST_PARTY=new St("first-party-uid"),St.MOCK_USER=new St("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mn="10.12.5";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Le=new Mu("@firebase/firestore");function Mn(){return Le.logLevel}function O(n,...t){if(Le.logLevel<=Q.DEBUG){const e=t.map(uo);Le.debug(`Firestore (${mn}): ${n}`,...e)}}function se(n,...t){if(Le.logLevel<=Q.ERROR){const e=t.map(uo);Le.error(`Firestore (${mn}): ${n}`,...e)}}function sn(n,...t){if(Le.logLevel<=Q.WARN){const e=t.map(uo);Le.warn(`Firestore (${mn}): ${n}`,...e)}}function uo(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H(n="Unexpected state"){const t=`FIRESTORE (${mn}) INTERNAL ASSERTION FAILED: `+n;throw se(t),new Error(t)}function ut(n,t){n||H()}function W(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class U extends fn{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Ip{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(St.UNAUTHENTICATED))}shutdown(){}}class Pp{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class Sp{constructor(t){this.t=t,this.currentUser=St.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let s=this.i;const i=c=>this.i!==s?(s=this.i,e(c)):Promise.resolve();let r=new Ze;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Ze,t.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const c=r;t.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},l=c=>{O("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(O("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Ze)}},0),a()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(s=>this.i!==t?(O("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(ut(typeof s.accessToken=="string"),new Gu(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return ut(t===null||typeof t=="string"),new St(t)}}class Cp{constructor(t,e,s){this.l=t,this.h=e,this.P=s,this.type="FirstParty",this.user=St.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Rp{constructor(t,e,s){this.l=t,this.h=e,this.P=s}getToken(){return Promise.resolve(new Cp(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable(()=>e(St.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class bp{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class xp{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){const s=r=>{r.error!=null&&O("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const a=r.token!==this.R;return this.R=r.token,O("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?e(r.token):Promise.resolve()};this.o=r=>{t.enqueueRetryable(()=>s(r))};const i=r=>{O("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.appCheck.addTokenListener(this.o)};this.A.onInit(r=>i(r)),setTimeout(()=>{if(!this.appCheck){const r=this.A.getImmediate({optional:!0});r?i(r):O("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(ut(typeof e.token=="string"),this.R=e.token,new bp(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vp(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let s=0;s<n;s++)e[s]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let s="";for(;s.length<20;){const i=Vp(40);for(let r=0;r<i.length;++r)s.length<20&&i[r]<e&&(s+=t.charAt(i[r]%t.length))}return s}}function Z(n,t){return n<t?-1:n>t?1:0}function rn(n,t,e){return n.length===t.length&&n.every((s,i)=>e(s,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new U(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new U(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new U(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new U(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Dt.fromMillis(Date.now())}static fromDate(t){return Dt.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),s=Math.floor(1e6*(t-1e3*e));return new Dt(e,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Z(this.nanoseconds,t.nanoseconds):Z(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(t){this.timestamp=t}static fromTimestamp(t){return new z(t)}static min(){return new z(new Dt(0,0))}static max(){return new z(new Dt(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(t,e,s){e===void 0?e=0:e>t.length&&H(),s===void 0?s=t.length-e:s>t.length-e&&H(),this.segments=t,this.offset=e,this.len=s}get length(){return this.len}isEqual(t){return es.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof es?t.forEach(s=>{e.push(s)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,s=this.limit();e<s;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const s=Math.min(t.length,e.length);for(let i=0;i<s;i++){const r=t.get(i),a=e.get(i);if(r<a)return-1;if(r>a)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class it extends es{construct(t,e,s){return new it(t,e,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const s of t){if(s.indexOf("//")>=0)throw new U(L.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);e.push(...s.split("/").filter(i=>i.length>0))}return new it(e)}static emptyPath(){return new it([])}}const Mp=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vt extends es{construct(t,e,s){return new Vt(t,e,s)}static isValidIdentifier(t){return Mp.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vt.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Vt(["__name__"])}static fromServerFormat(t){const e=[];let s="",i=0;const r=()=>{if(s.length===0)throw new U(L.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(s),s=""};let a=!1;for(;i<t.length;){const l=t[i];if(l==="\\"){if(i+1===t.length)throw new U(L.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const c=t[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new U(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=c,i+=2}else l==="`"?(a=!a,i++):l!=="."||a?(s+=l,i++):(r(),i++)}if(r(),a)throw new U(L.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Vt(e)}static emptyPath(){return new Vt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(t){this.path=t}static fromPath(t){return new $(it.fromString(t))}static fromName(t){return new $(it.fromString(t).popFirst(5))}static empty(){return new $(it.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&it.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return it.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new $(new it(t.slice()))}}function kp(n,t){const e=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,i=z.fromTimestamp(s===1e9?new Dt(e+1,0):new Dt(e,s));return new pe(i,$.empty(),t)}function Np(n){return new pe(n.readTime,n.key,-1)}class pe{constructor(t,e,s){this.readTime=t,this.documentKey=e,this.largestBatchId=s}static min(){return new pe(z.min(),$.empty(),-1)}static max(){return new pe(z.max(),$.empty(),-1)}}function Lp(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=$.comparator(n.documentKey,t.documentKey),e!==0?e:Z(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Op="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Fp{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ho(n){if(n.code!==L.FAILED_PRECONDITION||n.message!==Op)throw n;O("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&H(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new V((s,i)=>{this.nextCallback=r=>{this.wrapSuccess(t,r).next(s,i)},this.catchCallback=r=>{this.wrapFailure(e,r).next(s,i)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof V?e:V.resolve(e)}catch(e){return V.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):V.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):V.reject(e)}static resolve(t){return new V((e,s)=>{e(t)})}static reject(t){return new V((e,s)=>{s(t)})}static waitFor(t){return new V((e,s)=>{let i=0,r=0,a=!1;t.forEach(l=>{++i,l.next(()=>{++r,a&&r===i&&e()},c=>s(c))}),a=!0,r===i&&e()})}static or(t){let e=V.resolve(!1);for(const s of t)e=e.next(i=>i?V.resolve(i):s());return e}static forEach(t,e){const s=[];return t.forEach((i,r)=>{s.push(e.call(this,i,r))}),this.waitFor(s)}static mapArray(t,e){return new V((s,i)=>{const r=t.length,a=new Array(r);let l=0;for(let c=0;c<r;c++){const h=c;e(t[h]).next(f=>{a[h]=f,++l,l===r&&s(a)},f=>i(f))}})}static doWhile(t,e){return new V((s,i)=>{const r=()=>{t()===!0?e().next(()=>{r()},i):s()};r()})}}function jp(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function ls(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=s=>this.ie(s),this.se=s=>e.writeSequenceNumber(s))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}fo.oe=-1;function hi(n){return n==null}function Dr(n){return n===0&&1/n==-1/0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Al(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function di(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function Bp(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(t,e){this.comparator=t,this.root=e||pt.EMPTY}insert(t,e){return new at(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,pt.BLACK,null,null))}remove(t){return new at(this.comparator,this.root.remove(t,this.comparator).copy(null,null,pt.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const s=this.comparator(t,e.key);if(s===0)return e.value;s<0?e=e.left:s>0&&(e=e.right)}return null}indexOf(t){let e=0,s=this.root;for(;!s.isEmpty();){const i=this.comparator(t,s.key);if(i===0)return e+s.left.size;i<0?s=s.left:(e+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,s)=>(t(e,s),!1))}toString(){const t=[];return this.inorderTraversal((e,s)=>(t.push(`${e}:${s}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Ns(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Ns(this.root,t,this.comparator,!1)}getReverseIterator(){return new Ns(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Ns(this.root,t,this.comparator,!0)}}class Ns{constructor(t,e,s,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=e?s(t.key,e):1,e&&i&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(r===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class pt{constructor(t,e,s,i,r){this.key=t,this.value=e,this.color=s??pt.RED,this.left=i??pt.EMPTY,this.right=r??pt.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,s,i,r){return new pt(t??this.key,e??this.value,s??this.color,i??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,s){let i=this;const r=s(t,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(t,e,s),null):r===0?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,s)),i.fixUp()}removeMin(){if(this.left.isEmpty())return pt.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let s,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),e(t,i.key)===0){if(i.right.isEmpty())return pt.EMPTY;s=i.right.min(),i=i.copy(s.key,s.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,pt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,pt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw H();const t=this.left.check();if(t!==this.right.check())throw H();return t+(this.isRed()?0:1)}}pt.EMPTY=null,pt.RED=!0,pt.BLACK=!1;pt.EMPTY=new class{constructor(){this.size=0}get key(){throw H()}get value(){throw H()}get color(){throw H()}get left(){throw H()}get right(){throw H()}copy(t,e,s,i,r){return this}insert(t,e,s){return new pt(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(t){this.comparator=t,this.data=new at(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,s)=>(t(e),!1))}forEachInRange(t,e){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const i=s.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let s;for(s=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Il(this.data.getIterator())}getIteratorFrom(t){return new Il(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(s=>{e=e.add(s)}),e}isEqual(t){if(!(t instanceof gt)||this.size!==t.size)return!1;const e=this.data.getIterator(),s=t.data.getIterator();for(;e.hasNext();){const i=e.getNext().key,r=s.getNext().key;if(this.comparator(i,r)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new gt(this.comparator);return e.data=t,e}}class Il{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(t){this.fields=t,t.sort(Vt.comparator)}static empty(){return new ue([])}unionWith(t){let e=new gt(Vt.comparator);for(const s of this.fields)e=e.add(s);for(const s of t)e=e.add(s);return new ue(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return rn(this.fields,t.fields,(e,s)=>e.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(i){try{return atob(i)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new Ku("Invalid base64 string: "+r):r}}(t);return new vt(e)}static fromUint8Array(t){const e=function(i){let r="";for(let a=0;a<i.length;++a)r+=String.fromCharCode(i[a]);return r}(t);return new vt(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const s=new Uint8Array(e.length);for(let i=0;i<e.length;i++)s[i]=e.charCodeAt(i);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Z(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}vt.EMPTY_BYTE_STRING=new vt("");const Up=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ge(n){if(ut(!!n),typeof n=="string"){let t=0;const e=Up.exec(n);if(ut(!!e),e[1]){let i=e[1];i=(i+"000000000").substr(0,9),t=Number(i)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:ct(n.seconds),nanos:ct(n.nanos)}}function ct(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Oe(n){return typeof n=="string"?vt.fromBase64String(n):vt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mo(n){var t,e;return((e=(((t=n==null?void 0:n.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||e===void 0?void 0:e.stringValue)==="server_timestamp"}function po(n){const t=n.mapValue.fields.__previous_value__;return mo(t)?po(t):t}function ns(n){const t=ge(n.mapValue.fields.__local_write_time__.timestampValue);return new Dt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(t,e,s,i,r,a,l,c,h){this.databaseId=t,this.appId=e,this.persistenceKey=s,this.host=i,this.ssl=r,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=h}}class ss{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new ss("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof ss&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ls={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Fe(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?mo(n)?4:zp(n)?9007199254740991:10:H()}function Gt(n,t){if(n===t)return!0;const e=Fe(n);if(e!==Fe(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return ns(n).isEqual(ns(t));case 3:return function(i,r){if(typeof i.timestampValue=="string"&&typeof r.timestampValue=="string"&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const a=ge(i.timestampValue),l=ge(r.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(i,r){return Oe(i.bytesValue).isEqual(Oe(r.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(i,r){return ct(i.geoPointValue.latitude)===ct(r.geoPointValue.latitude)&&ct(i.geoPointValue.longitude)===ct(r.geoPointValue.longitude)}(n,t);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return ct(i.integerValue)===ct(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const a=ct(i.doubleValue),l=ct(r.doubleValue);return a===l?Dr(a)===Dr(l):isNaN(a)&&isNaN(l)}return!1}(n,t);case 9:return rn(n.arrayValue.values||[],t.arrayValue.values||[],Gt);case 10:return function(i,r){const a=i.mapValue.fields||{},l=r.mapValue.fields||{};if(Al(a)!==Al(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!Gt(a[c],l[c])))return!1;return!0}(n,t);default:return H()}}function is(n,t){return(n.values||[]).find(e=>Gt(e,t))!==void 0}function on(n,t){if(n===t)return 0;const e=Fe(n),s=Fe(t);if(e!==s)return Z(e,s);switch(e){case 0:case 9007199254740991:return 0;case 1:return Z(n.booleanValue,t.booleanValue);case 2:return function(r,a){const l=ct(r.integerValue||r.doubleValue),c=ct(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(n,t);case 3:return Pl(n.timestampValue,t.timestampValue);case 4:return Pl(ns(n),ns(t));case 5:return Z(n.stringValue,t.stringValue);case 6:return function(r,a){const l=Oe(r),c=Oe(a);return l.compareTo(c)}(n.bytesValue,t.bytesValue);case 7:return function(r,a){const l=r.split("/"),c=a.split("/");for(let h=0;h<l.length&&h<c.length;h++){const f=Z(l[h],c[h]);if(f!==0)return f}return Z(l.length,c.length)}(n.referenceValue,t.referenceValue);case 8:return function(r,a){const l=Z(ct(r.latitude),ct(a.latitude));return l!==0?l:Z(ct(r.longitude),ct(a.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return function(r,a){const l=r.values||[],c=a.values||[];for(let h=0;h<l.length&&h<c.length;++h){const f=on(l[h],c[h]);if(f)return f}return Z(l.length,c.length)}(n.arrayValue,t.arrayValue);case 10:return function(r,a){if(r===Ls.mapValue&&a===Ls.mapValue)return 0;if(r===Ls.mapValue)return 1;if(a===Ls.mapValue)return-1;const l=r.fields||{},c=Object.keys(l),h=a.fields||{},f=Object.keys(h);c.sort(),f.sort();for(let m=0;m<c.length&&m<f.length;++m){const y=Z(c[m],f[m]);if(y!==0)return y;const E=on(l[c[m]],h[f[m]]);if(E!==0)return E}return Z(c.length,f.length)}(n.mapValue,t.mapValue);default:throw H()}}function Pl(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return Z(n,t);const e=ge(n),s=ge(t),i=Z(e.seconds,s.seconds);return i!==0?i:Z(e.nanos,s.nanos)}function an(n){return Mr(n)}function Mr(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(e){const s=ge(e);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(e){return Oe(e).toBase64()}(n.bytesValue):"referenceValue"in n?function(e){return $.fromName(e).toString()}(n.referenceValue):"geoPointValue"in n?function(e){return`geo(${e.latitude},${e.longitude})`}(n.geoPointValue):"arrayValue"in n?function(e){let s="[",i=!0;for(const r of e.values||[])i?i=!1:s+=",",s+=Mr(r);return s+"]"}(n.arrayValue):"mapValue"in n?function(e){const s=Object.keys(e.fields||{}).sort();let i="{",r=!0;for(const a of s)r?r=!1:i+=",",i+=`${a}:${Mr(e.fields[a])}`;return i+"}"}(n.mapValue):H()}function kr(n){return!!n&&"integerValue"in n}function go(n){return!!n&&"arrayValue"in n}function Sl(n){return!!n&&"nullValue"in n}function Cl(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ir(n){return!!n&&"mapValue"in n}function zn(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return di(n.mapValue.fields,(e,s)=>t.mapValue.fields[e]=zn(s)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=zn(n.arrayValue.values[e]);return t}return Object.assign({},n)}function zp(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(t){this.value=t}static empty(){return new $t({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let s=0;s<t.length-1;++s)if(e=(e.mapValue.fields||{})[t.get(s)],!ir(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=zn(e)}setAll(t){let e=Vt.emptyPath(),s={},i=[];t.forEach((a,l)=>{if(!e.isImmediateParentOf(l)){const c=this.getFieldsMap(e);this.applyChanges(c,s,i),s={},i=[],e=l.popLast()}a?s[l.lastSegment()]=zn(a):i.push(l.lastSegment())});const r=this.getFieldsMap(e);this.applyChanges(r,s,i)}delete(t){const e=this.field(t.popLast());ir(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Gt(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let s=0;s<t.length;++s){let i=e.mapValue.fields[t.get(s)];ir(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(s)]=i),e=i}return e.mapValue.fields}applyChanges(t,e,s){di(e,(i,r)=>t[i]=r);for(const i of s)delete t[i]}clone(){return new $t(zn(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(t,e,s,i,r,a,l){this.key=t,this.documentType=e,this.version=s,this.readTime=i,this.createTime=r,this.data=a,this.documentState=l}static newInvalidDocument(t){return new Ct(t,0,z.min(),z.min(),z.min(),$t.empty(),0)}static newFoundDocument(t,e,s,i){return new Ct(t,1,e,z.min(),s,i,0)}static newNoDocument(t,e){return new Ct(t,2,e,z.min(),z.min(),$t.empty(),0)}static newUnknownDocument(t,e){return new Ct(t,3,e,z.min(),z.min(),$t.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=$t.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=$t.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=z.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Ct&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Ct(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(t,e){this.position=t,this.inclusive=e}}function Rl(n,t,e){let s=0;for(let i=0;i<n.position.length;i++){const r=t[i],a=n.position[i];if(r.field.isKeyField()?s=$.comparator($.fromName(a.referenceValue),e.key):s=on(a,e.data.field(r.field)),r.dir==="desc"&&(s*=-1),s!==0)break}return s}function bl(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!Gt(n.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(t,e="asc"){this.field=t,this.dir=e}}function qp(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{}class ht extends Wu{constructor(t,e,s){super(),this.field=t,this.op=e,this.value=s}static create(t,e,s){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,s):new Gp(t,e,s):e==="array-contains"?new Qp(t,s):e==="in"?new Yp(t,s):e==="not-in"?new Xp(t,s):e==="array-contains-any"?new Jp(t,s):new ht(t,e,s)}static createKeyFieldInFilter(t,e,s){return e==="in"?new Kp(t,s):new Wp(t,s)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&this.matchesComparison(on(e,this.value)):e!==null&&Fe(this.value)===Fe(e)&&this.matchesComparison(on(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return H()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Kt extends Wu{constructor(t,e){super(),this.filters=t,this.op=e,this.ae=null}static create(t,e){return new Kt(t,e)}matches(t){return Qu(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Qu(n){return n.op==="and"}function Yu(n){return Hp(n)&&Qu(n)}function Hp(n){for(const t of n.filters)if(t instanceof Kt)return!1;return!0}function Nr(n){if(n instanceof ht)return n.field.canonicalString()+n.op.toString()+an(n.value);if(Yu(n))return n.filters.map(t=>Nr(t)).join(",");{const t=n.filters.map(e=>Nr(e)).join(",");return`${n.op}(${t})`}}function Xu(n,t){return n instanceof ht?function(s,i){return i instanceof ht&&s.op===i.op&&s.field.isEqual(i.field)&&Gt(s.value,i.value)}(n,t):n instanceof Kt?function(s,i){return i instanceof Kt&&s.op===i.op&&s.filters.length===i.filters.length?s.filters.reduce((r,a,l)=>r&&Xu(a,i.filters[l]),!0):!1}(n,t):void H()}function Ju(n){return n instanceof ht?function(e){return`${e.field.canonicalString()} ${e.op} ${an(e.value)}`}(n):n instanceof Kt?function(e){return e.op.toString()+" {"+e.getFilters().map(Ju).join(" ,")+"}"}(n):"Filter"}class Gp extends ht{constructor(t,e,s){super(t,e,s),this.key=$.fromName(s.referenceValue)}matches(t){const e=$.comparator(t.key,this.key);return this.matchesComparison(e)}}class Kp extends ht{constructor(t,e){super(t,"in",e),this.keys=Zu("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class Wp extends ht{constructor(t,e){super(t,"not-in",e),this.keys=Zu("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function Zu(n,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(s=>$.fromName(s.referenceValue))}class Qp extends ht{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return go(e)&&is(e.arrayValue,this.value)}}class Yp extends ht{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&is(this.value.arrayValue,e)}}class Xp extends ht{constructor(t,e){super(t,"not-in",e)}matches(t){if(is(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&!is(this.value.arrayValue,e)}}class Jp extends ht{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!go(e)||!e.arrayValue.values)&&e.arrayValue.values.some(s=>is(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(t,e=null,s=[],i=[],r=null,a=null,l=null){this.path=t,this.collectionGroup=e,this.orderBy=s,this.filters=i,this.limit=r,this.startAt=a,this.endAt=l,this.ue=null}}function xl(n,t=null,e=[],s=[],i=null,r=null,a=null){return new Zp(n,t,e,s,i,r,a)}function yo(n){const t=W(n);if(t.ue===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(s=>Nr(s)).join(","),e+="|ob:",e+=t.orderBy.map(s=>function(r){return r.field.canonicalString()+r.dir}(s)).join(","),hi(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(s=>an(s)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(s=>an(s)).join(",")),t.ue=e}return t.ue}function vo(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!qp(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!Xu(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!bl(n.startAt,t.startAt)&&bl(n.endAt,t.endAt)}function Lr(n){return $.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(t,e=null,s=[],i=[],r=null,a="F",l=null,c=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=s,this.filters=i,this.limit=r,this.limitType=a,this.startAt=l,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function tg(n,t,e,s,i,r,a,l){return new fi(n,t,e,s,i,r,a,l)}function _o(n){return new fi(n)}function Vl(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function eg(n){return n.collectionGroup!==null}function qn(n){const t=W(n);if(t.ce===null){t.ce=[];const e=new Set;for(const r of t.explicitOrderBy)t.ce.push(r),e.add(r.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new gt(Vt.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(t).forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new ei(r,s))}),e.has(Vt.keyField().canonicalString())||t.ce.push(new ei(Vt.keyField(),s))}return t.ce}function qt(n){const t=W(n);return t.le||(t.le=ng(t,qn(n))),t.le}function ng(n,t){if(n.limitType==="F")return xl(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(i=>{const r=i.dir==="desc"?"asc":"desc";return new ei(i.field,r)});const e=n.endAt?new ti(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new ti(n.startAt.position,n.startAt.inclusive):null;return xl(n.path,n.collectionGroup,t,n.filters,n.limit,e,s)}}function Or(n,t,e){return new fi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function mi(n,t){return vo(qt(n),qt(t))&&n.limitType===t.limitType}function th(n){return`${yo(qt(n))}|lt:${n.limitType}`}function qe(n){return`Query(target=${function(e){let s=e.path.canonicalString();return e.collectionGroup!==null&&(s+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(s+=`, filters: [${e.filters.map(i=>Ju(i)).join(", ")}]`),hi(e.limit)||(s+=", limit: "+e.limit),e.orderBy.length>0&&(s+=`, orderBy: [${e.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),e.startAt&&(s+=", startAt: ",s+=e.startAt.inclusive?"b:":"a:",s+=e.startAt.position.map(i=>an(i)).join(",")),e.endAt&&(s+=", endAt: ",s+=e.endAt.inclusive?"a:":"b:",s+=e.endAt.position.map(i=>an(i)).join(",")),`Target(${s})`}(qt(n))}; limitType=${n.limitType})`}function pi(n,t){return t.isFoundDocument()&&function(s,i){const r=i.key.path;return s.collectionGroup!==null?i.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(r):$.isDocumentKey(s.path)?s.path.isEqual(r):s.path.isImmediateParentOf(r)}(n,t)&&function(s,i){for(const r of qn(s))if(!r.field.isKeyField()&&i.data.field(r.field)===null)return!1;return!0}(n,t)&&function(s,i){for(const r of s.filters)if(!r.matches(i))return!1;return!0}(n,t)&&function(s,i){return!(s.startAt&&!function(a,l,c){const h=Rl(a,l,c);return a.inclusive?h<=0:h<0}(s.startAt,qn(s),i)||s.endAt&&!function(a,l,c){const h=Rl(a,l,c);return a.inclusive?h>=0:h>0}(s.endAt,qn(s),i))}(n,t)}function sg(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function eh(n){return(t,e)=>{let s=!1;for(const i of qn(n)){const r=ig(i,t,e);if(r!==0)return r;s=s||i.field.isKeyField()}return 0}}function ig(n,t,e){const s=n.field.isKeyField()?$.comparator(t.key,e.key):function(r,a,l){const c=a.data.field(r),h=l.data.field(r);return c!==null&&h!==null?on(c,h):H()}(n.field,t,e);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return H()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),s=this.inner[e];if(s!==void 0){for(const[i,r]of s)if(this.equalsFn(i,t))return r}}has(t){return this.get(t)!==void 0}set(t,e){const s=this.mapKeyFn(t),i=this.inner[s];if(i===void 0)return this.inner[s]=[[t,e]],void this.innerSize++;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return void(i[r]=[t,e]);i.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),s=this.inner[e];if(s===void 0)return!1;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],t))return s.length===1?delete this.inner[e]:s.splice(i,1),this.innerSize--,!0;return!1}forEach(t){di(this.inner,(e,s)=>{for(const[i,r]of s)t(i,r)})}isEmpty(){return Bp(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rg=new at($.comparator);function ye(){return rg}const nh=new at($.comparator);function Fn(...n){let t=nh;for(const e of n)t=t.insert(e.key,e);return t}function og(n){let t=nh;return n.forEach((e,s)=>t=t.insert(e,s.overlayedDocument)),t}function xe(){return Hn()}function sh(){return Hn()}function Hn(){return new pn(n=>n.toString(),(n,t)=>n.isEqual(t))}const ag=new gt($.comparator);function Y(...n){let t=ag;for(const e of n)t=t.add(e);return t}const lg=new gt(Z);function cg(){return lg}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ug(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Dr(t)?"-0":t}}function hg(n){return{integerValue:""+n}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(){this._=void 0}}function dg(n,t,e){return n instanceof Fr?function(i,r){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&mo(r)&&(r=po(r)),r&&(a.fields.__previous_value__=r),{mapValue:a}}(e,t):n instanceof ni?ih(n,t):n instanceof si?rh(n,t):function(i,r){const a=mg(i,r),l=Dl(a)+Dl(i.Pe);return kr(a)&&kr(i.Pe)?hg(l):ug(i.serializer,l)}(n,t)}function fg(n,t,e){return n instanceof ni?ih(n,t):n instanceof si?rh(n,t):e}function mg(n,t){return n instanceof jr?function(s){return kr(s)||function(r){return!!r&&"doubleValue"in r}(s)}(t)?t:{integerValue:0}:null}class Fr extends gi{}class ni extends gi{constructor(t){super(),this.elements=t}}function ih(n,t){const e=oh(t);for(const s of n.elements)e.some(i=>Gt(i,s))||e.push(s);return{arrayValue:{values:e}}}class si extends gi{constructor(t){super(),this.elements=t}}function rh(n,t){let e=oh(t);for(const s of n.elements)e=e.filter(i=>!Gt(i,s));return{arrayValue:{values:e}}}class jr extends gi{constructor(t,e){super(),this.serializer=t,this.Pe=e}}function Dl(n){return ct(n.integerValue||n.doubleValue)}function oh(n){return go(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function pg(n,t){return n.field.isEqual(t.field)&&function(s,i){return s instanceof ni&&i instanceof ni||s instanceof si&&i instanceof si?rn(s.elements,i.elements,Gt):s instanceof jr&&i instanceof jr?Gt(s.Pe,i.Pe):s instanceof Fr&&i instanceof Fr}(n.transform,t.transform)}class Me{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Me}static exists(t){return new Me(void 0,t)}static updateTime(t){return new Me(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function $s(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class To{}function ah(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new yg(n.key,Me.none()):new Eo(n.key,n.data,Me.none());{const e=n.data,s=$t.empty();let i=new gt(Vt.comparator);for(let r of t.fields)if(!i.has(r)){let a=e.field(r);a===null&&r.length>1&&(r=r.popLast(),a=e.field(r)),a===null?s.delete(r):s.set(r,a),i=i.add(r)}return new yi(n.key,s,new ue(i.toArray()),Me.none())}}function gg(n,t,e){n instanceof Eo?function(i,r,a){const l=i.value.clone(),c=kl(i.fieldTransforms,r,a.transformResults);l.setAll(c),r.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,t,e):n instanceof yi?function(i,r,a){if(!$s(i.precondition,r))return void r.convertToUnknownDocument(a.version);const l=kl(i.fieldTransforms,r,a.transformResults),c=r.data;c.setAll(lh(i)),c.setAll(l),r.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,t,e):function(i,r,a){r.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,e)}function Gn(n,t,e,s){return n instanceof Eo?function(r,a,l,c){if(!$s(r.precondition,a))return l;const h=r.value.clone(),f=Nl(r.fieldTransforms,c,a);return h.setAll(f),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(n,t,e,s):n instanceof yi?function(r,a,l,c){if(!$s(r.precondition,a))return l;const h=Nl(r.fieldTransforms,c,a),f=a.data;return f.setAll(lh(r)),f.setAll(h),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),l===null?null:l.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(m=>m.field))}(n,t,e,s):function(r,a,l){return $s(r.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(n,t,e)}function Ml(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(s,i){return s===void 0&&i===void 0||!(!s||!i)&&rn(s,i,(r,a)=>pg(r,a))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class Eo extends To{constructor(t,e,s,i=[]){super(),this.key=t,this.value=e,this.precondition=s,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class yi extends To{constructor(t,e,s,i,r=[]){super(),this.key=t,this.data=e,this.fieldMask=s,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function lh(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const s=n.data.field(e);t.set(e,s)}}),t}function kl(n,t,e){const s=new Map;ut(n.length===e.length);for(let i=0;i<e.length;i++){const r=n[i],a=r.transform,l=t.data.field(r.field);s.set(r.field,fg(a,l,e[i]))}return s}function Nl(n,t,e){const s=new Map;for(const i of n){const r=i.transform,a=e.data.field(i.field);s.set(i.field,dg(r,a,t))}return s}class yg extends To{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(t,e,s,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=s,this.mutations=i}applyToRemoteDocument(t,e){const s=e.mutationResults;for(let i=0;i<this.mutations.length;i++){const r=this.mutations[i];r.key.isEqual(t.key)&&gg(r,t,s[i])}}applyToLocalView(t,e){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(e=Gn(s,t,e,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(e=Gn(s,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const s=sh();return this.mutations.forEach(i=>{const r=t.get(i.key),a=r.overlayedDocument;let l=this.applyToLocalView(a,r.mutatedFields);l=e.has(i.key)?null:l;const c=ah(a,l);c!==null&&s.set(i.key,c),a.isValidDocument()||a.convertToNoDocument(z.min())}),s}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),Y())}isEqual(t){return this.batchId===t.batchId&&rn(this.mutations,t.mutations,(e,s)=>Ml(e,s))&&rn(this.baseMutations,t.baseMutations,(e,s)=>Ml(e,s))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lt,K;function ch(n){if(n===void 0)return se("GRPC error has no .code"),L.UNKNOWN;switch(n){case lt.OK:return L.OK;case lt.CANCELLED:return L.CANCELLED;case lt.UNKNOWN:return L.UNKNOWN;case lt.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case lt.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case lt.INTERNAL:return L.INTERNAL;case lt.UNAVAILABLE:return L.UNAVAILABLE;case lt.UNAUTHENTICATED:return L.UNAUTHENTICATED;case lt.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case lt.NOT_FOUND:return L.NOT_FOUND;case lt.ALREADY_EXISTS:return L.ALREADY_EXISTS;case lt.PERMISSION_DENIED:return L.PERMISSION_DENIED;case lt.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case lt.ABORTED:return L.ABORTED;case lt.OUT_OF_RANGE:return L.OUT_OF_RANGE;case lt.UNIMPLEMENTED:return L.UNIMPLEMENTED;case lt.DATA_LOSS:return L.DATA_LOSS;default:return H()}}(K=lt||(lt={}))[K.OK=0]="OK",K[K.CANCELLED=1]="CANCELLED",K[K.UNKNOWN=2]="UNKNOWN",K[K.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",K[K.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",K[K.NOT_FOUND=5]="NOT_FOUND",K[K.ALREADY_EXISTS=6]="ALREADY_EXISTS",K[K.PERMISSION_DENIED=7]="PERMISSION_DENIED",K[K.UNAUTHENTICATED=16]="UNAUTHENTICATED",K[K.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",K[K.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",K[K.ABORTED=10]="ABORTED",K[K.OUT_OF_RANGE=11]="OUT_OF_RANGE",K[K.UNIMPLEMENTED=12]="UNIMPLEMENTED",K[K.INTERNAL=13]="INTERNAL",K[K.UNAVAILABLE=14]="UNAVAILABLE",K[K.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eg(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wg=new De([4294967295,4294967295],0);function Ll(n){const t=Eg().encode(n),e=new ju;return e.update(t),new Uint8Array(e.digest())}function Ol(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),s=t.getUint32(4,!0),i=t.getUint32(8,!0),r=t.getUint32(12,!0);return[new De([e,s],0),new De([i,r],0)]}class wo{constructor(t,e,s){if(this.bitmap=t,this.padding=e,this.hashCount=s,e<0||e>=8)throw new jn(`Invalid padding: ${e}`);if(s<0)throw new jn(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new jn(`Invalid hash count: ${s}`);if(t.length===0&&e!==0)throw new jn(`Invalid padding when bitmap length is 0: ${e}`);this.Ie=8*t.length-e,this.Te=De.fromNumber(this.Ie)}Ee(t,e,s){let i=t.add(e.multiply(De.fromNumber(s)));return i.compare(wg)===1&&(i=new De([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const e=Ll(t),[s,i]=Ol(e);for(let r=0;r<this.hashCount;r++){const a=this.Ee(s,i,r);if(!this.de(a))return!1}return!0}static create(t,e,s){const i=t%8==0?0:8-t%8,r=new Uint8Array(Math.ceil(t/8)),a=new wo(r,i,e);return s.forEach(l=>a.insert(l)),a}insert(t){if(this.Ie===0)return;const e=Ll(t),[s,i]=Ol(e);for(let r=0;r<this.hashCount;r++){const a=this.Ee(s,i,r);this.Ae(a)}}Ae(t){const e=Math.floor(t/8),s=t%8;this.bitmap[e]|=1<<s}}class jn extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(t,e,s,i,r){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=s,this.documentUpdates=i,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(t,e,s){const i=new Map;return i.set(t,cs.createSynthesizedTargetChangeForCurrentChange(t,e,s)),new vi(z.min(),i,new at(Z),ye(),Y())}}class cs{constructor(t,e,s,i,r){this.resumeToken=t,this.current=e,this.addedDocuments=s,this.modifiedDocuments=i,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(t,e,s){return new cs(s,e,Y(),Y(),Y())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(t,e,s,i){this.Re=t,this.removedTargetIds=e,this.key=s,this.Ve=i}}class uh{constructor(t,e){this.targetId=t,this.me=e}}class hh{constructor(t,e,s=vt.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=e,this.resumeToken=s,this.cause=i}}class Fl{constructor(){this.fe=0,this.ge=Bl(),this.pe=vt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=Y(),e=Y(),s=Y();return this.ge.forEach((i,r)=>{switch(r){case 0:t=t.add(i);break;case 2:e=e.add(i);break;case 1:s=s.add(i);break;default:H()}}),new cs(this.pe,this.ye,t,e,s)}ve(){this.we=!1,this.ge=Bl()}Fe(t,e){this.we=!0,this.ge=this.ge.insert(t,e)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,ut(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Ag{constructor(t){this.Le=t,this.Be=new Map,this.ke=ye(),this.qe=jl(),this.Qe=new at(Z)}Ke(t){for(const e of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(e,t.Ve):this.Ue(e,t.key,t.Ve);for(const e of t.removedTargetIds)this.Ue(e,t.key,t.Ve)}We(t){this.forEachTarget(t,e=>{const s=this.Ge(e);switch(t.state){case 0:this.ze(e)&&s.De(t.resumeToken);break;case 1:s.Oe(),s.Se||s.ve(),s.De(t.resumeToken);break;case 2:s.Oe(),s.Se||this.removeTarget(e);break;case 3:this.ze(e)&&(s.Ne(),s.De(t.resumeToken));break;case 4:this.ze(e)&&(this.je(e),s.De(t.resumeToken));break;default:H()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Be.forEach((s,i)=>{this.ze(i)&&e(i)})}He(t){const e=t.targetId,s=t.me.count,i=this.Je(e);if(i){const r=i.target;if(Lr(r))if(s===0){const a=new $(r.path);this.Ue(e,a,Ct.newNoDocument(a,z.min()))}else ut(s===1);else{const a=this.Ye(e);if(a!==s){const l=this.Ze(t),c=l?this.Xe(l,t,a):1;if(c!==0){this.je(e);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(e,h)}}}}}Ze(t){const e=t.me.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:s="",padding:i=0},hashCount:r=0}=e;let a,l;try{a=Oe(s).toUint8Array()}catch(c){if(c instanceof Ku)return sn("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new wo(a,i,r)}catch(c){return sn(c instanceof jn?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.Ie===0?null:l}Xe(t,e,s){return e.me.count===s-this.nt(t,e.targetId)?0:2}nt(t,e){const s=this.Le.getRemoteKeysForTarget(e);let i=0;return s.forEach(r=>{const a=this.Le.tt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${r.path.canonicalString()}`;t.mightContain(l)||(this.Ue(e,r,null),i++)}),i}rt(t){const e=new Map;this.Be.forEach((r,a)=>{const l=this.Je(a);if(l){if(r.current&&Lr(l.target)){const c=new $(l.target.path);this.ke.get(c)!==null||this.it(a,c)||this.Ue(a,c,Ct.newNoDocument(c,t))}r.be&&(e.set(a,r.Ce()),r.ve())}});let s=Y();this.qe.forEach((r,a)=>{let l=!0;a.forEachWhile(c=>{const h=this.Je(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(s=s.add(r))}),this.ke.forEach((r,a)=>a.setReadTime(t));const i=new vi(t,e,this.Qe,this.ke,s);return this.ke=ye(),this.qe=jl(),this.Qe=new at(Z),i}$e(t,e){if(!this.ze(t))return;const s=this.it(t,e.key)?2:0;this.Ge(t).Fe(e.key,s),this.ke=this.ke.insert(e.key,e),this.qe=this.qe.insert(e.key,this.st(e.key).add(t))}Ue(t,e,s){if(!this.ze(t))return;const i=this.Ge(t);this.it(t,e)?i.Fe(e,1):i.Me(e),this.qe=this.qe.insert(e,this.st(e).delete(t)),s&&(this.ke=this.ke.insert(e,s))}removeTarget(t){this.Be.delete(t)}Ye(t){const e=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let e=this.Be.get(t);return e||(e=new Fl,this.Be.set(t,e)),e}st(t){let e=this.qe.get(t);return e||(e=new gt(Z),this.qe=this.qe.insert(t,e)),e}ze(t){const e=this.Je(t)!==null;return e||O("WatchChangeAggregator","Detected inactive target",t),e}Je(t){const e=this.Be.get(t);return e&&e.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new Fl),this.Le.getRemoteKeysForTarget(t).forEach(e=>{this.Ue(t,e,null)})}it(t,e){return this.Le.getRemoteKeysForTarget(t).has(e)}}function jl(){return new at($.comparator)}function Bl(){return new at($.comparator)}const Ig={asc:"ASCENDING",desc:"DESCENDING"},Pg={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Sg={and:"AND",or:"OR"};class Cg{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function Br(n,t){return n.useProto3Json||hi(t)?t:{value:t}}function Rg(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function bg(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function tn(n){return ut(!!n),z.fromTimestamp(function(e){const s=ge(e);return new Dt(s.seconds,s.nanos)}(n))}function xg(n,t){return Ur(n,t).canonicalString()}function Ur(n,t){const e=function(i){return new it(["projects",i.projectId,"databases",i.database])}(n).child("documents");return t===void 0?e:e.child(t)}function dh(n){const t=it.fromString(n);return ut(yh(t)),t}function rr(n,t){const e=dh(t);if(e.get(1)!==n.databaseId.projectId)throw new U(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new U(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new $(mh(e))}function fh(n,t){return xg(n.databaseId,t)}function Vg(n){const t=dh(n);return t.length===4?it.emptyPath():mh(t)}function Ul(n){return new it(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function mh(n){return ut(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function Dg(n,t){let e;if("targetChange"in t){t.targetChange;const s=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:H()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],r=function(h,f){return h.useProto3Json?(ut(f===void 0||typeof f=="string"),vt.fromBase64String(f||"")):(ut(f===void 0||f instanceof Buffer||f instanceof Uint8Array),vt.fromUint8Array(f||new Uint8Array))}(n,t.targetChange.resumeToken),a=t.targetChange.cause,l=a&&function(h){const f=h.code===void 0?L.UNKNOWN:ch(h.code);return new U(f,h.message||"")}(a);e=new hh(s,i,r,l||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const i=rr(n,s.document.name),r=tn(s.document.updateTime),a=s.document.createTime?tn(s.document.createTime):z.min(),l=new $t({mapValue:{fields:s.document.fields}}),c=Ct.newFoundDocument(i,r,a,l),h=s.targetIds||[],f=s.removedTargetIds||[];e=new zs(h,f,c.key,c)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const i=rr(n,s.document),r=s.readTime?tn(s.readTime):z.min(),a=Ct.newNoDocument(i,r),l=s.removedTargetIds||[];e=new zs([],l,a.key,a)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const i=rr(n,s.document),r=s.removedTargetIds||[];e=new zs([],r,i,null)}else{if(!("filter"in t))return H();{t.filter;const s=t.filter;s.targetId;const{count:i=0,unchangedNames:r}=s,a=new Tg(i,r),l=s.targetId;e=new uh(l,a)}}return e}function Mg(n,t){return{documents:[fh(n,t.path)]}}function kg(n,t){const e={structuredQuery:{}},s=t.path;let i;t.collectionGroup!==null?(i=s,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=s.popLast(),e.structuredQuery.from=[{collectionId:s.lastSegment()}]),e.parent=fh(n,i);const r=function(h){if(h.length!==0)return gh(Kt.create(h,"and"))}(t.filters);r&&(e.structuredQuery.where=r);const a=function(h){if(h.length!==0)return h.map(f=>function(y){return{field:He(y.field),direction:Og(y.dir)}}(f))}(t.orderBy);a&&(e.structuredQuery.orderBy=a);const l=Br(n,t.limit);return l!==null&&(e.structuredQuery.limit=l),t.startAt&&(e.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(t.endAt)),{_t:e,parent:i}}function Ng(n){let t=Vg(n.parent);const e=n.structuredQuery,s=e.from?e.from.length:0;let i=null;if(s>0){ut(s===1);const f=e.from[0];f.allDescendants?i=f.collectionId:t=t.child(f.collectionId)}let r=[];e.where&&(r=function(m){const y=ph(m);return y instanceof Kt&&Yu(y)?y.getFilters():[y]}(e.where));let a=[];e.orderBy&&(a=function(m){return m.map(y=>function(R){return new ei(Ge(R.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction))}(y))}(e.orderBy));let l=null;e.limit&&(l=function(m){let y;return y=typeof m=="object"?m.value:m,hi(y)?null:y}(e.limit));let c=null;e.startAt&&(c=function(m){const y=!!m.before,E=m.values||[];return new ti(E,y)}(e.startAt));let h=null;return e.endAt&&(h=function(m){const y=!m.before,E=m.values||[];return new ti(E,y)}(e.endAt)),tg(t,i,a,r,l,"F",c,h)}function Lg(n,t){const e=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return H()}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function ph(n){return n.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const s=Ge(e.unaryFilter.field);return ht.create(s,"==",{doubleValue:NaN});case"IS_NULL":const i=Ge(e.unaryFilter.field);return ht.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Ge(e.unaryFilter.field);return ht.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Ge(e.unaryFilter.field);return ht.create(a,"!=",{nullValue:"NULL_VALUE"});default:return H()}}(n):n.fieldFilter!==void 0?function(e){return ht.create(Ge(e.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return H()}}(e.fieldFilter.op),e.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(e){return Kt.create(e.compositeFilter.filters.map(s=>ph(s)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return H()}}(e.compositeFilter.op))}(n):H()}function Og(n){return Ig[n]}function Fg(n){return Pg[n]}function jg(n){return Sg[n]}function He(n){return{fieldPath:n.canonicalString()}}function Ge(n){return Vt.fromServerFormat(n.fieldPath)}function gh(n){return n instanceof ht?function(e){if(e.op==="=="){if(Cl(e.value))return{unaryFilter:{field:He(e.field),op:"IS_NAN"}};if(Sl(e.value))return{unaryFilter:{field:He(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(Cl(e.value))return{unaryFilter:{field:He(e.field),op:"IS_NOT_NAN"}};if(Sl(e.value))return{unaryFilter:{field:He(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:He(e.field),op:Fg(e.op),value:e.value}}}(n):n instanceof Kt?function(e){const s=e.getFilters().map(i=>gh(i));return s.length===1?s[0]:{compositeFilter:{op:jg(e.op),filters:s}}}(n):H()}function yh(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(t,e,s,i,r=z.min(),a=z.min(),l=vt.EMPTY_BYTE_STRING,c=null){this.target=t,this.targetId=e,this.purpose=s,this.sequenceNumber=i,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(t){return new he(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new he(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new he(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new he(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{constructor(t){this.ct=t}}function Ug(n){const t=Ng({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Or(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{constructor(){this.an=new zg}addToCollectionParentIndex(t,e){return this.an.add(e),V.resolve()}getCollectionParents(t,e){return V.resolve(this.an.getEntries(e))}addFieldIndex(t,e){return V.resolve()}deleteFieldIndex(t,e){return V.resolve()}deleteAllFieldIndexes(t){return V.resolve()}createTargetIndexes(t,e){return V.resolve()}getDocumentsMatchingTarget(t,e){return V.resolve(null)}getIndexType(t,e){return V.resolve(0)}getFieldIndexes(t,e){return V.resolve([])}getNextCollectionGroupToUpdate(t){return V.resolve(null)}getMinOffset(t,e){return V.resolve(pe.min())}getMinOffsetFromCollectionGroup(t,e){return V.resolve(pe.min())}updateCollectionGroup(t,e,s){return V.resolve()}updateIndexEntries(t,e){return V.resolve()}}class zg{constructor(){this.index={}}add(t){const e=t.lastSegment(),s=t.popLast(),i=this.index[e]||new gt(it.comparator),r=!i.has(s);return this.index[e]=i.add(s),r}has(t){const e=t.lastSegment(),s=t.popLast(),i=this.index[e];return i&&i.has(s)}getEntries(t){return(this.index[t]||new gt(it.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(t){this.Nn=t}next(){return this.Nn+=2,this.Nn}static Ln(){return new ln(0)}static Bn(){return new ln(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(){this.changes=new pn(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Ct.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const s=this.changes.get(e);return s!==void 0?V.resolve(s):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg{constructor(t,e,s,i){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=s,this.indexManager=i}getDocument(t,e){let s=null;return this.documentOverlayCache.getOverlay(t,e).next(i=>(s=i,this.remoteDocumentCache.getEntry(t,e))).next(i=>(s!==null&&Gn(s.mutation,i,ue.empty(),Dt.now()),i))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(s=>this.getLocalViewOfDocuments(t,s,Y()).next(()=>s))}getLocalViewOfDocuments(t,e,s=Y()){const i=xe();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,s).next(r=>{let a=Fn();return r.forEach((l,c)=>{a=a.insert(l,c.overlayedDocument)}),a}))}getOverlayedDocuments(t,e){const s=xe();return this.populateOverlays(t,s,e).next(()=>this.computeViews(t,e,s,Y()))}populateOverlays(t,e,s){const i=[];return s.forEach(r=>{e.has(r)||i.push(r)}),this.documentOverlayCache.getOverlays(t,i).next(r=>{r.forEach((a,l)=>{e.set(a,l)})})}computeViews(t,e,s,i){let r=ye();const a=Hn(),l=function(){return Hn()}();return e.forEach((c,h)=>{const f=s.get(h.key);i.has(h.key)&&(f===void 0||f.mutation instanceof yi)?r=r.insert(h.key,h):f!==void 0?(a.set(h.key,f.mutation.getFieldMask()),Gn(f.mutation,h,f.mutation.getFieldMask(),Dt.now())):a.set(h.key,ue.empty())}),this.recalculateAndSaveOverlays(t,r).next(c=>(c.forEach((h,f)=>a.set(h,f)),e.forEach((h,f)=>{var m;return l.set(h,new Hg(f,(m=a.get(h))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(t,e){const s=Hn();let i=new at((a,l)=>a-l),r=Y();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(a=>{for(const l of a)l.keys().forEach(c=>{const h=e.get(c);if(h===null)return;let f=s.get(c)||ue.empty();f=l.applyToLocalView(h,f),s.set(c,f);const m=(i.get(l.batchId)||Y()).add(c);i=i.insert(l.batchId,m)})}).next(()=>{const a=[],l=i.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),h=c.key,f=c.value,m=sh();f.forEach(y=>{if(!r.has(y)){const E=ah(e.get(y),s.get(y));E!==null&&m.set(y,E),r=r.add(y)}}),a.push(this.documentOverlayCache.saveOverlays(t,h,m))}return V.waitFor(a)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(s=>this.recalculateAndSaveOverlays(t,s))}getDocumentsMatchingQuery(t,e,s,i){return function(a){return $.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):eg(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,s,i):this.getDocumentsMatchingCollectionQuery(t,e,s,i)}getNextDocuments(t,e,s,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,s,i).next(r=>{const a=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,s.largestBatchId,i-r.size):V.resolve(xe());let l=-1,c=r;return a.next(h=>V.forEach(h,(f,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),r.get(f)?V.resolve():this.remoteDocumentCache.getEntry(t,f).next(y=>{c=c.insert(f,y)}))).next(()=>this.populateOverlays(t,h,r)).next(()=>this.computeViews(t,c,h,Y())).next(f=>({batchId:l,changes:og(f)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new $(e)).next(s=>{let i=Fn();return s.isFoundDocument()&&(i=i.insert(s.key,s)),i})}getDocumentsMatchingCollectionGroupQuery(t,e,s,i){const r=e.collectionGroup;let a=Fn();return this.indexManager.getCollectionParents(t,r).next(l=>V.forEach(l,c=>{const h=function(m,y){return new fi(y,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(e,c.child(r));return this.getDocumentsMatchingCollectionQuery(t,h,s,i).next(f=>{f.forEach((m,y)=>{a=a.insert(m,y)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(t,e,s,i){let r;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,s.largestBatchId).next(a=>(r=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,s,r,i))).next(a=>{r.forEach((c,h)=>{const f=h.getKey();a.get(f)===null&&(a=a.insert(f,Ct.newInvalidDocument(f)))});let l=Fn();return a.forEach((c,h)=>{const f=r.get(c);f!==void 0&&Gn(f.mutation,h,ue.empty(),Dt.now()),pi(e,h)&&(l=l.insert(c,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(t){this.serializer=t,this.lr=new Map,this.hr=new Map}getBundleMetadata(t,e){return V.resolve(this.lr.get(e))}saveBundleMetadata(t,e){return this.lr.set(e.id,function(i){return{id:i.id,version:i.version,createTime:tn(i.createTime)}}(e)),V.resolve()}getNamedQuery(t,e){return V.resolve(this.hr.get(e))}saveNamedQuery(t,e){return this.hr.set(e.name,function(i){return{name:i.name,query:Ug(i.bundledQuery),readTime:tn(i.readTime)}}(e)),V.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(){this.overlays=new at($.comparator),this.Pr=new Map}getOverlay(t,e){return V.resolve(this.overlays.get(e))}getOverlays(t,e){const s=xe();return V.forEach(e,i=>this.getOverlay(t,i).next(r=>{r!==null&&s.set(i,r)})).next(()=>s)}saveOverlays(t,e,s){return s.forEach((i,r)=>{this.ht(t,e,r)}),V.resolve()}removeOverlaysForBatchId(t,e,s){const i=this.Pr.get(s);return i!==void 0&&(i.forEach(r=>this.overlays=this.overlays.remove(r)),this.Pr.delete(s)),V.resolve()}getOverlaysForCollection(t,e,s){const i=xe(),r=e.length+1,a=new $(e.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,h=c.getKey();if(!e.isPrefixOf(h.path))break;h.path.length===r&&c.largestBatchId>s&&i.set(c.getKey(),c)}return V.resolve(i)}getOverlaysForCollectionGroup(t,e,s,i){let r=new at((h,f)=>h-f);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===e&&h.largestBatchId>s){let f=r.get(h.largestBatchId);f===null&&(f=xe(),r=r.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}const l=xe(),c=r.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,f)=>l.set(h,f)),!(l.size()>=i)););return V.resolve(l)}ht(t,e,s){const i=this.overlays.get(s.key);if(i!==null){const a=this.Pr.get(i.largestBatchId).delete(s.key);this.Pr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(s.key,new _g(e,s));let r=this.Pr.get(e);r===void 0&&(r=Y(),this.Pr.set(e,r)),this.Pr.set(e,r.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg{constructor(){this.sessionToken=vt.EMPTY_BYTE_STRING}getSessionToken(t){return V.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,V.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(){this.Ir=new gt(ft.Tr),this.Er=new gt(ft.dr)}isEmpty(){return this.Ir.isEmpty()}addReference(t,e){const s=new ft(t,e);this.Ir=this.Ir.add(s),this.Er=this.Er.add(s)}Ar(t,e){t.forEach(s=>this.addReference(s,e))}removeReference(t,e){this.Rr(new ft(t,e))}Vr(t,e){t.forEach(s=>this.removeReference(s,e))}mr(t){const e=new $(new it([])),s=new ft(e,t),i=new ft(e,t+1),r=[];return this.Er.forEachInRange([s,i],a=>{this.Rr(a),r.push(a.key)}),r}gr(){this.Ir.forEach(t=>this.Rr(t))}Rr(t){this.Ir=this.Ir.delete(t),this.Er=this.Er.delete(t)}pr(t){const e=new $(new it([])),s=new ft(e,t),i=new ft(e,t+1);let r=Y();return this.Er.forEachInRange([s,i],a=>{r=r.add(a.key)}),r}containsKey(t){const e=new ft(t,0),s=this.Ir.firstAfterOrEqual(e);return s!==null&&t.isEqual(s.key)}}class ft{constructor(t,e){this.key=t,this.yr=e}static Tr(t,e){return $.comparator(t.key,e.key)||Z(t.yr,e.yr)}static dr(t,e){return Z(t.yr,e.yr)||$.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.wr=1,this.Sr=new gt(ft.Tr)}checkEmpty(t){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,s,i){const r=this.wr;this.wr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new vg(r,e,s,i);this.mutationQueue.push(a);for(const l of i)this.Sr=this.Sr.add(new ft(l.key,r)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return V.resolve(a)}lookupMutationBatch(t,e){return V.resolve(this.br(e))}getNextMutationBatchAfterBatchId(t,e){const s=e+1,i=this.Dr(s),r=i<0?0:i;return V.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?-1:this.wr-1)}getAllMutationBatches(t){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const s=new ft(e,0),i=new ft(e,Number.POSITIVE_INFINITY),r=[];return this.Sr.forEachInRange([s,i],a=>{const l=this.br(a.yr);r.push(l)}),V.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,e){let s=new gt(Z);return e.forEach(i=>{const r=new ft(i,0),a=new ft(i,Number.POSITIVE_INFINITY);this.Sr.forEachInRange([r,a],l=>{s=s.add(l.yr)})}),V.resolve(this.Cr(s))}getAllMutationBatchesAffectingQuery(t,e){const s=e.path,i=s.length+1;let r=s;$.isDocumentKey(r)||(r=r.child(""));const a=new ft(new $(r),0);let l=new gt(Z);return this.Sr.forEachWhile(c=>{const h=c.key.path;return!!s.isPrefixOf(h)&&(h.length===i&&(l=l.add(c.yr)),!0)},a),V.resolve(this.Cr(l))}Cr(t){const e=[];return t.forEach(s=>{const i=this.br(s);i!==null&&e.push(i)}),e}removeMutationBatch(t,e){ut(this.vr(e.batchId,"removed")===0),this.mutationQueue.shift();let s=this.Sr;return V.forEach(e.mutations,i=>{const r=new ft(i.key,e.batchId);return s=s.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.Sr=s})}xn(t){}containsKey(t,e){const s=new ft(e,0),i=this.Sr.firstAfterOrEqual(s);return V.resolve(e.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,V.resolve()}vr(t,e){return this.Dr(t)}Dr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}br(t){const e=this.Dr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(t){this.Fr=t,this.docs=function(){return new at($.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const s=e.key,i=this.docs.get(s),r=i?i.size:0,a=this.Fr(e);return this.docs=this.docs.insert(s,{document:e.mutableCopy(),size:a}),this.size+=a-r,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const s=this.docs.get(e);return V.resolve(s?s.document.mutableCopy():Ct.newInvalidDocument(e))}getEntries(t,e){let s=ye();return e.forEach(i=>{const r=this.docs.get(i);s=s.insert(i,r?r.document.mutableCopy():Ct.newInvalidDocument(i))}),V.resolve(s)}getDocumentsMatchingQuery(t,e,s,i){let r=ye();const a=e.path,l=new $(a.child("")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:h,value:{document:f}}=c.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||Lp(Np(f),s)<=0||(i.has(f.key)||pi(e,f))&&(r=r.insert(f.key,f.mutableCopy()))}return V.resolve(r)}getAllFromCollectionGroup(t,e,s,i){H()}Mr(t,e){return V.forEach(this.docs,s=>e(s))}newChangeBuffer(t){return new Jg(this)}getSize(t){return V.resolve(this.size)}}class Jg extends qg{constructor(t){super(),this.ur=t}applyChanges(t){const e=[];return this.changes.forEach((s,i)=>{i.isValidDocument()?e.push(this.ur.addEntry(t,i)):this.ur.removeEntry(s)}),V.waitFor(e)}getFromCache(t,e){return this.ur.getEntry(t,e)}getAllFromCache(t,e){return this.ur.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{constructor(t){this.persistence=t,this.Or=new pn(e=>yo(e),vo),this.lastRemoteSnapshotVersion=z.min(),this.highestTargetId=0,this.Nr=0,this.Lr=new Ao,this.targetCount=0,this.Br=ln.Ln()}forEachTarget(t,e){return this.Or.forEach((s,i)=>e(i)),V.resolve()}getLastRemoteSnapshotVersion(t){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return V.resolve(this.Nr)}allocateTargetId(t){return this.highestTargetId=this.Br.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(t,e,s){return s&&(this.lastRemoteSnapshotVersion=s),e>this.Nr&&(this.Nr=e),V.resolve()}Qn(t){this.Or.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Br=new ln(e),this.highestTargetId=e),t.sequenceNumber>this.Nr&&(this.Nr=t.sequenceNumber)}addTargetData(t,e){return this.Qn(e),this.targetCount+=1,V.resolve()}updateTargetData(t,e){return this.Qn(e),V.resolve()}removeTargetData(t,e){return this.Or.delete(e.target),this.Lr.mr(e.targetId),this.targetCount-=1,V.resolve()}removeTargets(t,e,s){let i=0;const r=[];return this.Or.forEach((a,l)=>{l.sequenceNumber<=e&&s.get(l.targetId)===null&&(this.Or.delete(a),r.push(this.removeMatchingKeysForTargetId(t,l.targetId)),i++)}),V.waitFor(r).next(()=>i)}getTargetCount(t){return V.resolve(this.targetCount)}getTargetData(t,e){const s=this.Or.get(e)||null;return V.resolve(s)}addMatchingKeys(t,e,s){return this.Lr.Ar(e,s),V.resolve()}removeMatchingKeys(t,e,s){this.Lr.Vr(e,s);const i=this.persistence.referenceDelegate,r=[];return i&&e.forEach(a=>{r.push(i.markPotentiallyOrphaned(t,a))}),V.waitFor(r)}removeMatchingKeysForTargetId(t,e){return this.Lr.mr(e),V.resolve()}getMatchingKeysForTargetId(t,e){const s=this.Lr.pr(e);return V.resolve(s)}containsKey(t,e){return V.resolve(this.Lr.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(t,e){this.kr={},this.overlays={},this.qr=new fo(0),this.Qr=!1,this.Qr=!0,this.Kr=new Qg,this.referenceDelegate=t(this),this.$r=new Zg(this),this.indexManager=new $g,this.remoteDocumentCache=function(i){return new Xg(i)}(s=>this.referenceDelegate.Ur(s)),this.serializer=new Bg(e),this.Wr=new Kg(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Qr=!1,Promise.resolve()}get started(){return this.Qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new Wg,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let s=this.kr[t.toKey()];return s||(s=new Yg(e,this.referenceDelegate),this.kr[t.toKey()]=s),s}getGlobalsCache(){return this.Kr}getTargetCache(){return this.$r}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Wr}runTransaction(t,e,s){O("MemoryPersistence","Starting transaction:",t);const i=new ey(this.qr.next());return this.referenceDelegate.Gr(),s(i).next(r=>this.referenceDelegate.zr(i).next(()=>r)).toPromise().then(r=>(i.raiseOnCommittedEvent(),r))}jr(t,e){return V.or(Object.values(this.kr).map(s=>()=>s.containsKey(t,e)))}}class ey extends Fp{constructor(t){super(),this.currentSequenceNumber=t}}class Io{constructor(t){this.persistence=t,this.Hr=new Ao,this.Jr=null}static Yr(t){return new Io(t)}get Zr(){if(this.Jr)return this.Jr;throw H()}addReference(t,e,s){return this.Hr.addReference(s,e),this.Zr.delete(s.toString()),V.resolve()}removeReference(t,e,s){return this.Hr.removeReference(s,e),this.Zr.add(s.toString()),V.resolve()}markPotentiallyOrphaned(t,e){return this.Zr.add(e.toString()),V.resolve()}removeTarget(t,e){this.Hr.mr(e.targetId).forEach(i=>this.Zr.add(i.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,e.targetId).next(i=>{i.forEach(r=>this.Zr.add(r.toString()))}).next(()=>s.removeTargetData(t,e))}Gr(){this.Jr=new Set}zr(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.Zr,s=>{const i=$.fromPath(s);return this.Xr(t,i).next(r=>{r||e.removeEntry(i,z.min())})}).next(()=>(this.Jr=null,e.apply(t)))}updateLimboDocument(t,e){return this.Xr(t,e).next(s=>{s?this.Zr.delete(e.toString()):this.Zr.add(e.toString())})}Ur(t){return 0}Xr(t,e){return V.or([()=>V.resolve(this.Hr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.jr(t,e)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(t,e,s,i){this.targetId=t,this.fromCache=e,this.Ki=s,this.$i=i}static Ui(t,e){let s=Y(),i=Y();for(const r of e.docChanges)switch(r.type){case 0:s=s.add(r.doc.key);break;case 1:i=i.add(r.doc.key)}return new Po(t,e.fromCache,s,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(){this.Wi=!1,this.Gi=!1,this.zi=100,this.ji=function(){return cm()?8:jp(am())>0?6:4}()}initialize(t,e){this.Hi=t,this.indexManager=e,this.Wi=!0}getDocumentsMatchingQuery(t,e,s,i){const r={result:null};return this.Ji(t,e).next(a=>{r.result=a}).next(()=>{if(!r.result)return this.Yi(t,e,i,s).next(a=>{r.result=a})}).next(()=>{if(r.result)return;const a=new ny;return this.Zi(t,e,a).next(l=>{if(r.result=l,this.Gi)return this.Xi(t,e,a,l.size)})}).next(()=>r.result)}Xi(t,e,s,i){return s.documentReadCount<this.zi?(Mn()<=Q.DEBUG&&O("QueryEngine","SDK will not create cache indexes for query:",qe(e),"since it only creates cache indexes for collection contains","more than or equal to",this.zi,"documents"),V.resolve()):(Mn()<=Q.DEBUG&&O("QueryEngine","Query:",qe(e),"scans",s.documentReadCount,"local documents and returns",i,"documents as results."),s.documentReadCount>this.ji*i?(Mn()<=Q.DEBUG&&O("QueryEngine","The SDK decides to create cache indexes for query:",qe(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,qt(e))):V.resolve())}Ji(t,e){if(Vl(e))return V.resolve(null);let s=qt(e);return this.indexManager.getIndexType(t,s).next(i=>i===0?null:(e.limit!==null&&i===1&&(e=Or(e,null,"F"),s=qt(e)),this.indexManager.getDocumentsMatchingTarget(t,s).next(r=>{const a=Y(...r);return this.Hi.getDocuments(t,a).next(l=>this.indexManager.getMinOffset(t,s).next(c=>{const h=this.es(e,l);return this.ts(e,h,a,c.readTime)?this.Ji(t,Or(e,null,"F")):this.ns(t,h,e,c)}))})))}Yi(t,e,s,i){return Vl(e)||i.isEqual(z.min())?V.resolve(null):this.Hi.getDocuments(t,s).next(r=>{const a=this.es(e,r);return this.ts(e,a,s,i)?V.resolve(null):(Mn()<=Q.DEBUG&&O("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),qe(e)),this.ns(t,a,e,kp(i,-1)).next(l=>l))})}es(t,e){let s=new gt(eh(t));return e.forEach((i,r)=>{pi(t,r)&&(s=s.add(r))}),s}ts(t,e,s,i){if(t.limit===null)return!1;if(s.size!==e.size)return!0;const r=t.limitType==="F"?e.last():e.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}Zi(t,e,s){return Mn()<=Q.DEBUG&&O("QueryEngine","Using full collection scan to execute query:",qe(e)),this.Hi.getDocumentsMatchingQuery(t,e,pe.min(),s)}ns(t,e,s,i){return this.Hi.getDocumentsMatchingQuery(t,s,i).next(r=>(e.forEach(a=>{r=r.insert(a.key,a)}),r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{constructor(t,e,s,i){this.persistence=t,this.rs=e,this.serializer=i,this.ss=new at(Z),this.os=new pn(r=>yo(r),vo),this._s=new Map,this.us=t.getRemoteDocumentCache(),this.$r=t.getTargetCache(),this.Wr=t.getBundleCache(),this.cs(s)}cs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Gg(this.us,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.us.setIndexManager(this.indexManager),this.rs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.ss))}}function ry(n,t,e,s){return new iy(n,t,e,s)}async function vh(n,t){const e=W(n);return await e.persistence.runTransaction("Handle user change","readonly",s=>{let i;return e.mutationQueue.getAllMutationBatches(s).next(r=>(i=r,e.cs(t),e.mutationQueue.getAllMutationBatches(s))).next(r=>{const a=[],l=[];let c=Y();for(const h of i){a.push(h.batchId);for(const f of h.mutations)c=c.add(f.key)}for(const h of r){l.push(h.batchId);for(const f of h.mutations)c=c.add(f.key)}return e.localDocuments.getDocuments(s,c).next(h=>({ls:h,removedBatchIds:a,addedBatchIds:l}))})})}function _h(n){const t=W(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.$r.getLastRemoteSnapshotVersion(e))}function oy(n,t){const e=W(n),s=t.snapshotVersion;let i=e.ss;return e.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const a=e.us.newChangeBuffer({trackRemovals:!0});i=e.ss;const l=[];t.targetChanges.forEach((f,m)=>{const y=i.get(m);if(!y)return;l.push(e.$r.removeMatchingKeys(r,f.removedDocuments,m).next(()=>e.$r.addMatchingKeys(r,f.addedDocuments,m)));let E=y.withSequenceNumber(r.currentSequenceNumber);t.targetMismatches.get(m)!==null?E=E.withResumeToken(vt.EMPTY_BYTE_STRING,z.min()).withLastLimboFreeSnapshotVersion(z.min()):f.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(f.resumeToken,s)),i=i.insert(m,E),function(x,b,D){return x.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:D.addedDocuments.size+D.modifiedDocuments.size+D.removedDocuments.size>0}(y,E,f)&&l.push(e.$r.updateTargetData(r,E))});let c=ye(),h=Y();if(t.documentUpdates.forEach(f=>{t.resolvedLimboDocuments.has(f)&&l.push(e.persistence.referenceDelegate.updateLimboDocument(r,f))}),l.push(ay(r,a,t.documentUpdates).next(f=>{c=f.hs,h=f.Ps})),!s.isEqual(z.min())){const f=e.$r.getLastRemoteSnapshotVersion(r).next(m=>e.$r.setTargetsMetadata(r,r.currentSequenceNumber,s));l.push(f)}return V.waitFor(l).next(()=>a.apply(r)).next(()=>e.localDocuments.getLocalViewOfDocuments(r,c,h)).next(()=>c)}).then(r=>(e.ss=i,r))}function ay(n,t,e){let s=Y(),i=Y();return e.forEach(r=>s=s.add(r)),t.getEntries(n,s).next(r=>{let a=ye();return e.forEach((l,c)=>{const h=r.get(l);c.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(l)),c.isNoDocument()&&c.version.isEqual(z.min())?(t.removeEntry(l,c.readTime),a=a.insert(l,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(t.addEntry(c),a=a.insert(l,c)):O("LocalStore","Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",c.version)}),{hs:a,Ps:i}})}function ly(n,t){const e=W(n);return e.persistence.runTransaction("Allocate target","readwrite",s=>{let i;return e.$r.getTargetData(s,t).next(r=>r?(i=r,V.resolve(i)):e.$r.allocateTargetId(s).next(a=>(i=new he(t,a,"TargetPurposeListen",s.currentSequenceNumber),e.$r.addTargetData(s,i).next(()=>i))))}).then(s=>{const i=e.ss.get(s.targetId);return(i===null||s.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(e.ss=e.ss.insert(s.targetId,s),e.os.set(t,s.targetId)),s})}async function $r(n,t,e){const s=W(n),i=s.ss.get(t),r=e?"readwrite":"readwrite-primary";try{e||await s.persistence.runTransaction("Release target",r,a=>s.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!ls(a))throw a;O("LocalStore",`Failed to update sequence numbers for target ${t}: ${a}`)}s.ss=s.ss.remove(t),s.os.delete(i.target)}function $l(n,t,e){const s=W(n);let i=z.min(),r=Y();return s.persistence.runTransaction("Execute query","readwrite",a=>function(c,h,f){const m=W(c),y=m.os.get(f);return y!==void 0?V.resolve(m.ss.get(y)):m.$r.getTargetData(h,f)}(s,a,qt(t)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,s.$r.getMatchingKeysForTargetId(a,l.targetId).next(c=>{r=c})}).next(()=>s.rs.getDocumentsMatchingQuery(a,t,e?i:z.min(),e?r:Y())).next(l=>(cy(s,sg(t),l),{documents:l,Is:r})))}function cy(n,t,e){let s=n._s.get(t)||z.min();e.forEach((i,r)=>{r.readTime.compareTo(s)>0&&(s=r.readTime)}),n._s.set(t,s)}class zl{constructor(){this.activeTargetIds=cg()}Vs(t){this.activeTargetIds=this.activeTargetIds.add(t)}fs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Rs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class uy{constructor(){this.io=new zl,this.so={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,s){}addLocalQueryTarget(t){return this.io.Vs(t),this.so[t]||"not-current"}updateQueryState(t,e,s){this.so[t]=e}removeLocalQueryTarget(t){this.io.fs(t)}isLocalQueryTarget(t){return this.io.activeTargetIds.has(t)}clearQueryState(t){delete this.so[t]}getAllActiveQueryTargets(){return this.io.activeTargetIds}isActiveQueryTarget(t){return this.io.activeTargetIds.has(t)}start(){return this.io=new zl,Promise.resolve()}handleUserChange(t,e,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy{oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(){this._o=()=>this.ao(),this.uo=()=>this.co(),this.lo=[],this.ho()}oo(t){this.lo.push(t)}shutdown(){window.removeEventListener("online",this._o),window.removeEventListener("offline",this.uo)}ho(){window.addEventListener("online",this._o),window.addEventListener("offline",this.uo)}ao(){O("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.lo)t(0)}co(){O("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.lo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Os=null;function or(){return Os===null?Os=function(){return 268435456+Math.round(2147483648*Math.random())}():Os++,"0x"+Os.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dy={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(t){this.Po=t.Po,this.Io=t.Io}To(t){this.Eo=t}Ao(t){this.Ro=t}Vo(t){this.mo=t}onMessage(t){this.fo=t}close(){this.Io()}send(t){this.Po(t)}po(){this.Eo()}yo(){this.Ro()}wo(t){this.mo(t)}So(t){this.fo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const It="WebChannelConnection";class my extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const s=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.bo=s+"://"+e.host,this.Do=`projects/${i}/databases/${r}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${r}`}get vo(){return!1}Fo(e,s,i,r,a){const l=or(),c=this.Mo(e,s.toUriEncodedString());O("RestConnection",`Sending RPC '${e}' ${l}:`,c,i);const h={"google-cloud-resource-prefix":this.Do,"x-goog-request-params":this.Co};return this.xo(h,r,a),this.Oo(e,c,h,i).then(f=>(O("RestConnection",`Received RPC '${e}' ${l}: `,f),f),f=>{throw sn("RestConnection",`RPC '${e}' ${l} failed with error: `,f,"url: ",c,"request:",i),f})}No(e,s,i,r,a,l){return this.Fo(e,s,i,r,a)}xo(e,s,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+mn}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((r,a)=>e[a]=r),i&&i.headers.forEach((r,a)=>e[a]=r)}Mo(e,s){const i=dy[e];return`${this.bo}/v1/${s}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Oo(t,e,s,i){const r=or();return new Promise((a,l)=>{const c=new Bu;c.setWithCredentials(!0),c.listenOnce($u.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Us.NO_ERROR:const f=c.getResponseJson();O(It,`XHR for RPC '${t}' ${r} received:`,JSON.stringify(f)),a(f);break;case Us.TIMEOUT:O(It,`RPC '${t}' ${r} timed out`),l(new U(L.DEADLINE_EXCEEDED,"Request time out"));break;case Us.HTTP_ERROR:const m=c.getStatus();if(O(It,`RPC '${t}' ${r} failed with status:`,m,"response text:",c.getResponseText()),m>0){let y=c.getResponseJson();Array.isArray(y)&&(y=y[0]);const E=y==null?void 0:y.error;if(E&&E.status&&E.message){const R=function(b){const D=b.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(D)>=0?D:L.UNKNOWN}(E.status);l(new U(R,E.message))}else l(new U(L.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new U(L.UNAVAILABLE,"Connection failed."));break;default:H()}}finally{O(It,`RPC '${t}' ${r} completed.`)}});const h=JSON.stringify(i);O(It,`RPC '${t}' ${r} sending request:`,i),c.send(e,"POST",h,s,15)})}Lo(t,e,s){const i=or(),r=[this.bo,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=Hu(),l=qu(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.xmlHttpFactory=new Uu({})),this.xo(c.initMessageHeaders,e,s),c.encodeInitMessageHeaders=!0;const f=r.join("");O(It,`Creating RPC '${t}' stream ${i}: ${f}`,c);const m=a.createWebChannel(f,c);let y=!1,E=!1;const R=new fy({Po:b=>{E?O(It,`Not sending because RPC '${t}' stream ${i} is closed:`,b):(y||(O(It,`Opening RPC '${t}' stream ${i} transport.`),m.open(),y=!0),O(It,`RPC '${t}' stream ${i} sending:`,b),m.send(b))},Io:()=>m.close()}),x=(b,D,k)=>{b.listen(D,M=>{try{k(M)}catch(F){setTimeout(()=>{throw F},0)}})};return x(m,On.EventType.OPEN,()=>{E||(O(It,`RPC '${t}' stream ${i} transport opened.`),R.po())}),x(m,On.EventType.CLOSE,()=>{E||(E=!0,O(It,`RPC '${t}' stream ${i} transport closed`),R.wo())}),x(m,On.EventType.ERROR,b=>{E||(E=!0,sn(It,`RPC '${t}' stream ${i} transport errored:`,b),R.wo(new U(L.UNAVAILABLE,"The operation could not be completed")))}),x(m,On.EventType.MESSAGE,b=>{var D;if(!E){const k=b.data[0];ut(!!k);const M=k,F=M.error||((D=M[0])===null||D===void 0?void 0:D.error);if(F){O(It,`RPC '${t}' stream ${i} received error:`,F);const q=F.status;let G=function(v){const T=lt[v];if(T!==void 0)return ch(T)}(q),A=F.message;G===void 0&&(G=L.INTERNAL,A="Unknown error status: "+q+" with message "+F.message),E=!0,R.wo(new U(G,A)),m.close()}else O(It,`RPC '${t}' stream ${i} received:`,k),R.So(k)}}),x(l,zu.STAT_EVENT,b=>{b.stat===Vr.PROXY?O(It,`RPC '${t}' stream ${i} detected buffering proxy`):b.stat===Vr.NOPROXY&&O(It,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{R.yo()},0),R}}function ar(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Th(n){return new Cg(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(t,e,s=1e3,i=1.5,r=6e4){this.ai=t,this.timerId=e,this.Bo=s,this.ko=i,this.qo=r,this.Qo=0,this.Ko=null,this.$o=Date.now(),this.reset()}reset(){this.Qo=0}Uo(){this.Qo=this.qo}Wo(t){this.cancel();const e=Math.floor(this.Qo+this.Go()),s=Math.max(0,Date.now()-this.$o),i=Math.max(0,e-s);i>0&&O("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Qo} ms, delay with jitter: ${e} ms, last attempt: ${s} ms ago)`),this.Ko=this.ai.enqueueAfterDelay(this.timerId,i,()=>(this.$o=Date.now(),t())),this.Qo*=this.ko,this.Qo<this.Bo&&(this.Qo=this.Bo),this.Qo>this.qo&&(this.Qo=this.qo)}zo(){this.Ko!==null&&(this.Ko.skipDelay(),this.Ko=null)}cancel(){this.Ko!==null&&(this.Ko.cancel(),this.Ko=null)}Go(){return(Math.random()-.5)*this.Qo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(t,e,s,i,r,a,l,c){this.ai=t,this.jo=s,this.Ho=i,this.connection=r,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.Jo=0,this.Yo=null,this.Zo=null,this.stream=null,this.Xo=0,this.e_=new Eh(t,e)}t_(){return this.state===1||this.state===5||this.n_()}n_(){return this.state===2||this.state===3}start(){this.Xo=0,this.state!==4?this.auth():this.r_()}async stop(){this.t_()&&await this.close(0)}i_(){this.state=0,this.e_.reset()}s_(){this.n_()&&this.Yo===null&&(this.Yo=this.ai.enqueueAfterDelay(this.jo,6e4,()=>this.o_()))}__(t){this.a_(),this.stream.send(t)}async o_(){if(this.n_())return this.close(0)}a_(){this.Yo&&(this.Yo.cancel(),this.Yo=null)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}async close(t,e){this.a_(),this.u_(),this.e_.cancel(),this.Jo++,t!==4?this.e_.reset():e&&e.code===L.RESOURCE_EXHAUSTED?(se(e.toString()),se("Using maximum backoff delay to prevent overloading the backend."),this.e_.Uo()):e&&e.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.c_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Vo(e)}c_(){}auth(){this.state=1;const t=this.l_(this.Jo),e=this.Jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,i])=>{this.Jo===e&&this.h_(s,i)},s=>{t(()=>{const i=new U(L.UNKNOWN,"Fetching auth token failed: "+s.message);return this.P_(i)})})}h_(t,e){const s=this.l_(this.Jo);this.stream=this.I_(t,e),this.stream.To(()=>{s(()=>this.listener.To())}),this.stream.Ao(()=>{s(()=>(this.state=2,this.Zo=this.ai.enqueueAfterDelay(this.Ho,1e4,()=>(this.n_()&&(this.state=3),Promise.resolve())),this.listener.Ao()))}),this.stream.Vo(i=>{s(()=>this.P_(i))}),this.stream.onMessage(i=>{s(()=>++this.Xo==1?this.T_(i):this.onNext(i))})}r_(){this.state=5,this.e_.Wo(async()=>{this.state=0,this.start()})}P_(t){return O("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}l_(t){return e=>{this.ai.enqueueAndForget(()=>this.Jo===t?e():(O("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class gy extends py{constructor(t,e,s,i,r,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,s,i,a),this.serializer=r}I_(t,e){return this.connection.Lo("Listen",t,e)}T_(t){return this.onNext(t)}onNext(t){this.e_.reset();const e=Dg(this.serializer,t),s=function(r){if(!("targetChange"in r))return z.min();const a=r.targetChange;return a.targetIds&&a.targetIds.length?z.min():a.readTime?tn(a.readTime):z.min()}(t);return this.listener.E_(e,s)}d_(t){const e={};e.database=Ul(this.serializer),e.addTarget=function(r,a){let l;const c=a.target;if(l=Lr(c)?{documents:Mg(r,c)}:{query:kg(r,c)._t},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=bg(r,a.resumeToken);const h=Br(r,a.expectedCount);h!==null&&(l.expectedCount=h)}else if(a.snapshotVersion.compareTo(z.min())>0){l.readTime=Rg(r,a.snapshotVersion.toTimestamp());const h=Br(r,a.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,t);const s=Lg(this.serializer,t);s&&(e.labels=s),this.__(e)}A_(t){const e={};e.database=Ul(this.serializer),e.removeTarget=t,this.__(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy extends class{}{constructor(t,e,s,i){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=s,this.serializer=i,this.p_=!1}y_(){if(this.p_)throw new U(L.FAILED_PRECONDITION,"The client has already been terminated.")}Fo(t,e,s,i){return this.y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,a])=>this.connection.Fo(t,Ur(e,s),i,r,a)).catch(r=>{throw r.name==="FirebaseError"?(r.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new U(L.UNKNOWN,r.toString())})}No(t,e,s,i,r){return this.y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.No(t,Ur(e,s),i,a,l,r)).catch(a=>{throw a.name==="FirebaseError"?(a.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new U(L.UNKNOWN,a.toString())})}terminate(){this.p_=!0,this.connection.terminate()}}class vy{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.w_=0,this.S_=null,this.b_=!0}D_(){this.w_===0&&(this.C_("Unknown"),this.S_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.S_=null,this.v_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}F_(t){this.state==="Online"?this.C_("Unknown"):(this.w_++,this.w_>=1&&(this.M_(),this.v_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.C_("Offline")))}set(t){this.M_(),this.w_=0,t==="Online"&&(this.b_=!1),this.C_(t)}C_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}v_(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.b_?(se(e),this.b_=!1):O("OnlineStateTracker",e)}M_(){this.S_!==null&&(this.S_.cancel(),this.S_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(t,e,s,i,r){this.localStore=t,this.datastore=e,this.asyncQueue=s,this.remoteSyncer={},this.x_=[],this.O_=new Map,this.N_=new Set,this.L_=[],this.B_=r,this.B_.oo(a=>{s.enqueueAndForget(async()=>{hs(this)&&(O("RemoteStore","Restarting streams for network reachability change."),await async function(c){const h=W(c);h.N_.add(4),await us(h),h.k_.set("Unknown"),h.N_.delete(4),await _i(h)}(this))})}),this.k_=new vy(s,i)}}async function _i(n){if(hs(n))for(const t of n.L_)await t(!0)}async function us(n){for(const t of n.L_)await t(!1)}function wh(n,t){const e=W(n);e.O_.has(t.targetId)||(e.O_.set(t.targetId,t),bo(e)?Ro(e):gn(e).n_()&&Co(e,t))}function So(n,t){const e=W(n),s=gn(e);e.O_.delete(t),s.n_()&&Ah(e,t),e.O_.size===0&&(s.n_()?s.s_():hs(e)&&e.k_.set("Unknown"))}function Co(n,t){if(n.q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(z.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}gn(n).d_(t)}function Ah(n,t){n.q_.xe(t),gn(n).A_(t)}function Ro(n){n.q_=new Ag({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>n.O_.get(t)||null,tt:()=>n.datastore.serializer.databaseId}),gn(n).start(),n.k_.D_()}function bo(n){return hs(n)&&!gn(n).t_()&&n.O_.size>0}function hs(n){return W(n).N_.size===0}function Ih(n){n.q_=void 0}async function Ty(n){n.k_.set("Online")}async function Ey(n){n.O_.forEach((t,e)=>{Co(n,t)})}async function wy(n,t){Ih(n),bo(n)?(n.k_.F_(t),Ro(n)):n.k_.set("Unknown")}async function Ay(n,t,e){if(n.k_.set("Online"),t instanceof hh&&t.state===2&&t.cause)try{await async function(i,r){const a=r.cause;for(const l of r.targetIds)i.O_.has(l)&&(await i.remoteSyncer.rejectListen(l,a),i.O_.delete(l),i.q_.removeTarget(l))}(n,t)}catch(s){O("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),s),await Hl(n,s)}else if(t instanceof zs?n.q_.Ke(t):t instanceof uh?n.q_.He(t):n.q_.We(t),!e.isEqual(z.min()))try{const s=await _h(n.localStore);e.compareTo(s)>=0&&await function(r,a){const l=r.q_.rt(a);return l.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const f=r.O_.get(h);f&&r.O_.set(h,f.withResumeToken(c.resumeToken,a))}}),l.targetMismatches.forEach((c,h)=>{const f=r.O_.get(c);if(!f)return;r.O_.set(c,f.withResumeToken(vt.EMPTY_BYTE_STRING,f.snapshotVersion)),Ah(r,c);const m=new he(f.target,c,h,f.sequenceNumber);Co(r,m)}),r.remoteSyncer.applyRemoteEvent(l)}(n,e)}catch(s){O("RemoteStore","Failed to raise snapshot:",s),await Hl(n,s)}}async function Hl(n,t,e){if(!ls(t))throw t;n.N_.add(1),await us(n),n.k_.set("Offline"),e||(e=()=>_h(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{O("RemoteStore","Retrying IndexedDB access"),await e(),n.N_.delete(1),await _i(n)})}async function Gl(n,t){const e=W(n);e.asyncQueue.verifyOperationInProgress(),O("RemoteStore","RemoteStore received new credentials");const s=hs(e);e.N_.add(3),await us(e),s&&e.k_.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.N_.delete(3),await _i(e)}async function Iy(n,t){const e=W(n);t?(e.N_.delete(2),await _i(e)):t||(e.N_.add(2),await us(e),e.k_.set("Unknown"))}function gn(n){return n.Q_||(n.Q_=function(e,s,i){const r=W(e);return r.y_(),new gy(s,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(n.datastore,n.asyncQueue,{To:Ty.bind(null,n),Ao:Ey.bind(null,n),Vo:wy.bind(null,n),E_:Ay.bind(null,n)}),n.L_.push(async t=>{t?(n.Q_.i_(),bo(n)?Ro(n):n.k_.set("Unknown")):(await n.Q_.stop(),Ih(n))})),n.Q_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(t,e,s,i,r){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=s,this.op=i,this.removalCallback=r,this.deferred=new Ze,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,s,i,r){const a=Date.now()+s,l=new xo(t,e,a,i,r);return l.start(s),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new U(L.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ph(n,t){if(se("AsyncQueue",`${t}: ${n}`),ls(n))return new U(L.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(t){this.comparator=t?(e,s)=>t(e,s)||$.comparator(e.key,s.key):(e,s)=>$.comparator(e.key,s.key),this.keyedMap=Fn(),this.sortedSet=new at(this.comparator)}static emptySet(t){return new en(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,s)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof en)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;e.hasNext();){const i=e.getNext().key,r=s.getNext().key;if(!i.isEqual(r))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const s=new en;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=e,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(){this.U_=new at($.comparator)}track(t){const e=t.doc.key,s=this.U_.get(e);s?t.type!==0&&s.type===3?this.U_=this.U_.insert(e,t):t.type===3&&s.type!==1?this.U_=this.U_.insert(e,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.U_=this.U_.insert(e,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.U_=this.U_.insert(e,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.U_=this.U_.remove(e):t.type===1&&s.type===2?this.U_=this.U_.insert(e,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.U_=this.U_.insert(e,{type:2,doc:t.doc}):H():this.U_=this.U_.insert(e,t)}W_(){const t=[];return this.U_.inorderTraversal((e,s)=>{t.push(s)}),t}}class cn{constructor(t,e,s,i,r,a,l,c,h){this.query=t,this.docs=e,this.oldDocs=s,this.docChanges=i,this.mutatedKeys=r,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(t,e,s,i,r){const a=[];return e.forEach(l=>{a.push({type:0,doc:l})}),new cn(t,e,en.emptySet(e),a,s,i,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&mi(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,s=t.docChanges;if(e.length!==s.length)return!1;for(let i=0;i<e.length;i++)if(e[i].type!==s[i].type||!e[i].doc.isEqual(s[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py{constructor(){this.G_=void 0,this.z_=[]}j_(){return this.z_.some(t=>t.H_())}}class Sy{constructor(){this.queries=Wl(),this.onlineState="Unknown",this.J_=new Set}terminate(){(function(e,s){const i=W(e),r=i.queries;i.queries=Wl(),r.forEach((a,l)=>{for(const c of l.z_)c.onError(s)})})(this,new U(L.ABORTED,"Firestore shutting down"))}}function Wl(){return new pn(n=>th(n),mi)}async function Cy(n,t){const e=W(n);let s=3;const i=t.query;let r=e.queries.get(i);r?!r.j_()&&t.H_()&&(s=2):(r=new Py,s=t.H_()?0:1);try{switch(s){case 0:r.G_=await e.onListen(i,!0);break;case 1:r.G_=await e.onListen(i,!1);break;case 2:await e.onFirstRemoteStoreListen(i)}}catch(a){const l=Ph(a,`Initialization of query '${qe(t.query)}' failed`);return void t.onError(l)}e.queries.set(i,r),r.z_.push(t),t.Y_(e.onlineState),r.G_&&t.Z_(r.G_)&&Vo(e)}async function Ry(n,t){const e=W(n),s=t.query;let i=3;const r=e.queries.get(s);if(r){const a=r.z_.indexOf(t);a>=0&&(r.z_.splice(a,1),r.z_.length===0?i=t.H_()?0:1:!r.j_()&&t.H_()&&(i=2))}switch(i){case 0:return e.queries.delete(s),e.onUnlisten(s,!0);case 1:return e.queries.delete(s),e.onUnlisten(s,!1);case 2:return e.onLastRemoteStoreUnlisten(s);default:return}}function by(n,t){const e=W(n);let s=!1;for(const i of t){const r=i.query,a=e.queries.get(r);if(a){for(const l of a.z_)l.Z_(i)&&(s=!0);a.G_=i}}s&&Vo(e)}function xy(n,t,e){const s=W(n),i=s.queries.get(t);if(i)for(const r of i.z_)r.onError(e);s.queries.delete(t)}function Vo(n){n.J_.forEach(t=>{t.next()})}var zr,Ql;(Ql=zr||(zr={})).X_="default",Ql.Cache="cache";class Vy{constructor(t,e,s){this.query=t,this.ea=e,this.ta=!1,this.na=null,this.onlineState="Unknown",this.options=s||{}}Z_(t){if(!this.options.includeMetadataChanges){const s=[];for(const i of t.docChanges)i.type!==3&&s.push(i);t=new cn(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.ta?this.ra(t)&&(this.ea.next(t),e=!0):this.ia(t,this.onlineState)&&(this.sa(t),e=!0),this.na=t,e}onError(t){this.ea.error(t)}Y_(t){this.onlineState=t;let e=!1;return this.na&&!this.ta&&this.ia(this.na,t)&&(this.sa(this.na),e=!0),e}ia(t,e){if(!t.fromCache||!this.H_())return!0;const s=e!=="Offline";return(!this.options.oa||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}ra(t){if(t.docChanges.length>0)return!0;const e=this.na&&this.na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}sa(t){t=cn.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ta=!0,this.ea.next(t)}H_(){return this.options.source!==zr.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(t){this.key=t}}class Ch{constructor(t){this.key=t}}class Dy{constructor(t,e){this.query=t,this.Ia=e,this.Ta=null,this.hasCachedResults=!1,this.current=!1,this.Ea=Y(),this.mutatedKeys=Y(),this.da=eh(t),this.Aa=new en(this.da)}get Ra(){return this.Ia}Va(t,e){const s=e?e.ma:new Kl,i=e?e.Aa:this.Aa;let r=e?e.mutatedKeys:this.mutatedKeys,a=i,l=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((f,m)=>{const y=i.get(f),E=pi(this.query,m)?m:null,R=!!y&&this.mutatedKeys.has(y.key),x=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let b=!1;y&&E?y.data.isEqual(E.data)?R!==x&&(s.track({type:3,doc:E}),b=!0):this.fa(y,E)||(s.track({type:2,doc:E}),b=!0,(c&&this.da(E,c)>0||h&&this.da(E,h)<0)&&(l=!0)):!y&&E?(s.track({type:0,doc:E}),b=!0):y&&!E&&(s.track({type:1,doc:y}),b=!0,(c||h)&&(l=!0)),b&&(E?(a=a.add(E),r=x?r.add(f):r.delete(f)):(a=a.delete(f),r=r.delete(f)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const f=this.query.limitType==="F"?a.last():a.first();a=a.delete(f.key),r=r.delete(f.key),s.track({type:1,doc:f})}return{Aa:a,ma:s,ts:l,mutatedKeys:r}}fa(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,s,i){const r=this.Aa;this.Aa=t.Aa,this.mutatedKeys=t.mutatedKeys;const a=t.ma.W_();a.sort((f,m)=>function(E,R){const x=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return H()}};return x(E)-x(R)}(f.type,m.type)||this.da(f.doc,m.doc)),this.ga(s),i=i!=null&&i;const l=e&&!i?this.pa():[],c=this.Ea.size===0&&this.current&&!i?1:0,h=c!==this.Ta;return this.Ta=c,a.length!==0||h?{snapshot:new cn(this.query,t.Aa,r,a,t.mutatedKeys,c===0,h,!1,!!s&&s.resumeToken.approximateByteSize()>0),ya:l}:{ya:l}}Y_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Aa:this.Aa,ma:new Kl,mutatedKeys:this.mutatedKeys,ts:!1},!1)):{ya:[]}}wa(t){return!this.Ia.has(t)&&!!this.Aa.has(t)&&!this.Aa.get(t).hasLocalMutations}ga(t){t&&(t.addedDocuments.forEach(e=>this.Ia=this.Ia.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Ia=this.Ia.delete(e)),this.current=t.current)}pa(){if(!this.current)return[];const t=this.Ea;this.Ea=Y(),this.Aa.forEach(s=>{this.wa(s.key)&&(this.Ea=this.Ea.add(s.key))});const e=[];return t.forEach(s=>{this.Ea.has(s)||e.push(new Ch(s))}),this.Ea.forEach(s=>{t.has(s)||e.push(new Sh(s))}),e}Sa(t){this.Ia=t.Is,this.Ea=Y();const e=this.Va(t.documents);return this.applyChanges(e,!0)}ba(){return cn.fromInitialDocuments(this.query,this.Aa,this.mutatedKeys,this.Ta===0,this.hasCachedResults)}}class My{constructor(t,e,s){this.query=t,this.targetId=e,this.view=s}}class ky{constructor(t){this.key=t,this.Da=!1}}class Ny{constructor(t,e,s,i,r,a){this.localStore=t,this.remoteStore=e,this.eventManager=s,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=a,this.Ca={},this.va=new pn(l=>th(l),mi),this.Fa=new Map,this.Ma=new Set,this.xa=new at($.comparator),this.Oa=new Map,this.Na=new Ao,this.La={},this.Ba=new Map,this.ka=ln.Bn(),this.onlineState="Unknown",this.qa=void 0}get isPrimaryClient(){return this.qa===!0}}async function Ly(n,t,e=!0){const s=Dh(n);let i;const r=s.va.get(t);return r?(s.sharedClientState.addLocalQueryTarget(r.targetId),i=r.view.ba()):i=await Rh(s,t,e,!0),i}async function Oy(n,t){const e=Dh(n);await Rh(e,t,!0,!1)}async function Rh(n,t,e,s){const i=await ly(n.localStore,qt(t)),r=i.targetId,a=e?n.sharedClientState.addLocalQueryTarget(r):"not-current";let l;return s&&(l=await Fy(n,t,r,a==="current",i.resumeToken)),n.isPrimaryClient&&e&&wh(n.remoteStore,i),l}async function Fy(n,t,e,s,i){n.Qa=(m,y,E)=>async function(x,b,D,k){let M=b.view.Va(D);M.ts&&(M=await $l(x.localStore,b.query,!1).then(({documents:A})=>b.view.Va(A,M)));const F=k&&k.targetChanges.get(b.targetId),q=k&&k.targetMismatches.get(b.targetId)!=null,G=b.view.applyChanges(M,x.isPrimaryClient,F,q);return Xl(x,b.targetId,G.ya),G.snapshot}(n,m,y,E);const r=await $l(n.localStore,t,!0),a=new Dy(t,r.Is),l=a.Va(r.documents),c=cs.createSynthesizedTargetChangeForCurrentChange(e,s&&n.onlineState!=="Offline",i),h=a.applyChanges(l,n.isPrimaryClient,c);Xl(n,e,h.ya);const f=new My(t,e,a);return n.va.set(t,f),n.Fa.has(e)?n.Fa.get(e).push(t):n.Fa.set(e,[t]),h.snapshot}async function jy(n,t,e){const s=W(n),i=s.va.get(t),r=s.Fa.get(i.targetId);if(r.length>1)return s.Fa.set(i.targetId,r.filter(a=>!mi(a,t))),void s.va.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(i.targetId),s.sharedClientState.isActiveQueryTarget(i.targetId)||await $r(s.localStore,i.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(i.targetId),e&&So(s.remoteStore,i.targetId),qr(s,i.targetId)}).catch(ho)):(qr(s,i.targetId),await $r(s.localStore,i.targetId,!0))}async function By(n,t){const e=W(n),s=e.va.get(t),i=e.Fa.get(s.targetId);e.isPrimaryClient&&i.length===1&&(e.sharedClientState.removeLocalQueryTarget(s.targetId),So(e.remoteStore,s.targetId))}async function bh(n,t){const e=W(n);try{const s=await oy(e.localStore,t);t.targetChanges.forEach((i,r)=>{const a=e.Oa.get(r);a&&(ut(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.Da=!0:i.modifiedDocuments.size>0?ut(a.Da):i.removedDocuments.size>0&&(ut(a.Da),a.Da=!1))}),await Vh(e,s,t)}catch(s){await ho(s)}}function Yl(n,t,e){const s=W(n);if(s.isPrimaryClient&&e===0||!s.isPrimaryClient&&e===1){const i=[];s.va.forEach((r,a)=>{const l=a.view.Y_(t);l.snapshot&&i.push(l.snapshot)}),function(a,l){const c=W(a);c.onlineState=l;let h=!1;c.queries.forEach((f,m)=>{for(const y of m.z_)y.Y_(l)&&(h=!0)}),h&&Vo(c)}(s.eventManager,t),i.length&&s.Ca.E_(i),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function Uy(n,t,e){const s=W(n);s.sharedClientState.updateQueryState(t,"rejected",e);const i=s.Oa.get(t),r=i&&i.key;if(r){let a=new at($.comparator);a=a.insert(r,Ct.newNoDocument(r,z.min()));const l=Y().add(r),c=new vi(z.min(),new Map,new at(Z),a,l);await bh(s,c),s.xa=s.xa.remove(r),s.Oa.delete(t),Do(s)}else await $r(s.localStore,t,!1).then(()=>qr(s,t,e)).catch(ho)}function qr(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const s of n.Fa.get(t))n.va.delete(s),e&&n.Ca.Ka(s,e);n.Fa.delete(t),n.isPrimaryClient&&n.Na.mr(t).forEach(s=>{n.Na.containsKey(s)||xh(n,s)})}function xh(n,t){n.Ma.delete(t.path.canonicalString());const e=n.xa.get(t);e!==null&&(So(n.remoteStore,e),n.xa=n.xa.remove(t),n.Oa.delete(e),Do(n))}function Xl(n,t,e){for(const s of e)s instanceof Sh?(n.Na.addReference(s.key,t),$y(n,s)):s instanceof Ch?(O("SyncEngine","Document no longer in limbo: "+s.key),n.Na.removeReference(s.key,t),n.Na.containsKey(s.key)||xh(n,s.key)):H()}function $y(n,t){const e=t.key,s=e.path.canonicalString();n.xa.get(e)||n.Ma.has(s)||(O("SyncEngine","New document in limbo: "+e),n.Ma.add(s),Do(n))}function Do(n){for(;n.Ma.size>0&&n.xa.size<n.maxConcurrentLimboResolutions;){const t=n.Ma.values().next().value;n.Ma.delete(t);const e=new $(it.fromString(t)),s=n.ka.next();n.Oa.set(s,new ky(e)),n.xa=n.xa.insert(e,s),wh(n.remoteStore,new he(qt(_o(e.path)),s,"TargetPurposeLimboResolution",fo.oe))}}async function Vh(n,t,e){const s=W(n),i=[],r=[],a=[];s.va.isEmpty()||(s.va.forEach((l,c)=>{a.push(s.Qa(c,t,e).then(h=>{var f;if((h||e)&&s.isPrimaryClient){const m=h?!h.fromCache:(f=e==null?void 0:e.targetChanges.get(c.targetId))===null||f===void 0?void 0:f.current;s.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(h){i.push(h);const m=Po.Ui(c.targetId,h);r.push(m)}}))}),await Promise.all(a),s.Ca.E_(i),await async function(c,h){const f=W(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>V.forEach(h,y=>V.forEach(y.Ki,E=>f.persistence.referenceDelegate.addReference(m,y.targetId,E)).next(()=>V.forEach(y.$i,E=>f.persistence.referenceDelegate.removeReference(m,y.targetId,E)))))}catch(m){if(!ls(m))throw m;O("LocalStore","Failed to update sequence numbers: "+m)}for(const m of h){const y=m.targetId;if(!m.fromCache){const E=f.ss.get(y),R=E.snapshotVersion,x=E.withLastLimboFreeSnapshotVersion(R);f.ss=f.ss.insert(y,x)}}}(s.localStore,r))}async function zy(n,t){const e=W(n);if(!e.currentUser.isEqual(t)){O("SyncEngine","User change. New user:",t.toKey());const s=await vh(e.localStore,t);e.currentUser=t,function(r,a){r.Ba.forEach(l=>{l.forEach(c=>{c.reject(new U(L.CANCELLED,a))})}),r.Ba.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await Vh(e,s.ls)}}function qy(n,t){const e=W(n),s=e.Oa.get(t);if(s&&s.Da)return Y().add(s.key);{let i=Y();const r=e.Fa.get(t);if(!r)return i;for(const a of r){const l=e.va.get(a);i=i.unionWith(l.view.Ra)}return i}}function Dh(n){const t=W(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=bh.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=qy.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Uy.bind(null,t),t.Ca.E_=by.bind(null,t.eventManager),t.Ca.Ka=xy.bind(null,t.eventManager),t}class Jl{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=Th(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return ry(this.persistence,new sy,t.initialUser,this.serializer)}createPersistence(t){return new ty(Io.Yr,this.serializer)}createSharedClientState(t){return new uy}async terminate(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Hy{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Yl(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=zy.bind(null,this.syncEngine),await Iy(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new Sy}()}createDatastore(t){const e=Th(t.databaseInfo.databaseId),s=function(r){return new my(r)}(t.databaseInfo);return function(r,a,l,c){return new yy(r,a,l,c)}(t.authCredentials,t.appCheckCredentials,s,e)}createRemoteStore(t){return function(s,i,r,a,l){return new _y(s,i,r,a,l)}(this.localStore,this.datastore,t.asyncQueue,e=>Yl(this.syncEngine,e,0),function(){return ql.D()?new ql:new hy}())}createSyncEngine(t,e){return function(i,r,a,l,c,h,f){const m=new Ny(i,r,a,l,c,h);return f&&(m.qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await async function(i){const r=W(i);O("RemoteStore","RemoteStore shutting down."),r.N_.add(5),await us(r),r.B_.shutdown(),r.k_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(e=this.eventManager)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Wa(this.observer.next,t)}error(t){this.observer.error?this.Wa(this.observer.error,t):se("Uncaught Error in snapshot listener:",t.toString())}Ga(){this.muted=!0}Wa(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky{constructor(t,e,s,i){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=s,this.databaseInfo=i,this.user=St.UNAUTHENTICATED,this.clientId=Dp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,async r=>{O("FirestoreClient","Received user=",r.uid),await this.authCredentialListener(r),this.user=r}),this.appCheckCredentials.start(s,r=>(O("FirestoreClient","Received new app check token=",r),this.appCheckCredentialListener(r,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new U(L.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Ze;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const s=Ph(e,"Failed to shutdown persistence");t.reject(s)}}),t.promise}}async function lr(n,t){n.asyncQueue.verifyOperationInProgress(),O("FirestoreClient","Initializing OfflineComponentProvider");const e=n.configuration;await t.initialize(e);let s=e.initialUser;n.setCredentialChangeListener(async i=>{s.isEqual(i)||(await vh(t.localStore,i),s=i)}),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t}async function Zl(n,t){n.asyncQueue.verifyOperationInProgress();const e=await Qy(n);O("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener(s=>Gl(t.remoteStore,s)),n.setAppCheckTokenChangeListener((s,i)=>Gl(t.remoteStore,i)),n._onlineComponents=t}function Wy(n){return n.name==="FirebaseError"?n.code===L.FAILED_PRECONDITION||n.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}async function Qy(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){O("FirestoreClient","Using user provided OfflineComponentProvider");try{await lr(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!Wy(e))throw e;sn("Error using user provided cache. Falling back to memory cache: "+e),await lr(n,new Jl)}}else O("FirestoreClient","Using default OfflineComponentProvider"),await lr(n,new Jl);return n._offlineComponents}async function Yy(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(O("FirestoreClient","Using user provided OnlineComponentProvider"),await Zl(n,n._uninitializedComponentsProvider._online)):(O("FirestoreClient","Using default OnlineComponentProvider"),await Zl(n,new Hy))),n._onlineComponents}async function tc(n){const t=await Yy(n),e=t.eventManager;return e.onListen=Ly.bind(null,t.syncEngine),e.onUnlisten=jy.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=Oy.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=By.bind(null,t.syncEngine),e}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mh(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ec=new Map;function Xy(n,t,e,s){if(t===!0&&s===!0)throw new U(L.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function nc(n){if($.isDocumentKey(n))throw new U(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Jy(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=function(s){return s.constructor?s.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":H()}function qs(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new U(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=Jy(n);throw new U(L.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(t){var e,s;if(t.host===void 0){if(t.ssl!==void 0)throw new U(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(e=t.ssl)===null||e===void 0||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new U(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Xy("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Mh((s=t.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new U(L.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new U(L.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new U(L.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(s,i){return s.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Mo{constructor(t,e,s,i){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=s,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sc({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new U(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new U(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sc(t),t.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new Ip;switch(s.type){case"firstParty":return new Rp(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new U(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const s=ec.get(e);s&&(O("ComponentProvider","Removing Datastore"),ec.delete(e),s.terminate())}(this),Promise.resolve()}}function Zy(n,t,e,s={}){var i;const r=(n=qs(n,Mo))._getSettings(),a=`${t}:${e}`;if(r.host!=="firestore.googleapis.com"&&r.host!==a&&sn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},r),{host:a,ssl:!1})),s.mockUserToken){let l,c;if(typeof s.mockUserToken=="string")l=s.mockUserToken,c=St.MOCK_USER;else{l=om(s.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const h=s.mockUserToken.sub||s.mockUserToken.user_id;if(!h)throw new U(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new St(h)}n._authCredentials=new Pp(new Gu(l,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(t,e,s){this.converter=e,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new Ti(this.firestore,t,this._query)}}class je{constructor(t,e,s){this.converter=e,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new nn(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new je(this.firestore,t,this._key)}}class nn extends Ti{constructor(t,e,s){super(t,e,_o(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new je(this.firestore,null,new $(t))}withConverter(t){return new nn(this.firestore,t,this._path)}}function tv(n,t,...e){if(n=Du(n),n instanceof Mo){const s=it.fromString(t,...e);return nc(s),new nn(n,null,s)}{if(!(n instanceof je||n instanceof nn))throw new U(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(it.fromString(t,...e));return nc(s),new nn(n.firestore,null,s)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(){this._u=Promise.resolve(),this.au=[],this.uu=!1,this.cu=[],this.lu=null,this.hu=!1,this.Pu=!1,this.Iu=[],this.e_=new Eh(this,"async_queue_retry"),this.Tu=()=>{const e=ar();e&&O("AsyncQueue","Visibility state changed to "+e.visibilityState),this.e_.zo()};const t=ar();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Tu)}get isShuttingDown(){return this.uu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Eu(),this.du(t)}enterRestrictedMode(t){if(!this.uu){this.uu=!0,this.Pu=t||!1;const e=ar();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.Tu)}}enqueue(t){if(this.Eu(),this.uu)return new Promise(()=>{});const e=new Ze;return this.du(()=>this.uu&&this.Pu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.au.push(t),this.Au()))}async Au(){if(this.au.length!==0){try{await this.au[0](),this.au.shift(),this.e_.reset()}catch(t){if(!ls(t))throw t;O("AsyncQueue","Operation failed with retryable error: "+t)}this.au.length>0&&this.e_.Wo(()=>this.Au())}}du(t){const e=this._u.then(()=>(this.hu=!0,t().catch(s=>{this.lu=s,this.hu=!1;const i=function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),l}(s);throw se("INTERNAL UNHANDLED ERROR: ",i),s}).then(s=>(this.hu=!1,s))));return this._u=e,e}enqueueAfterDelay(t,e,s){this.Eu(),this.Iu.indexOf(t)>-1&&(e=0);const i=xo.createAndSchedule(this,t,e,s,r=>this.Ru(r));return this.cu.push(i),i}Eu(){this.lu&&H()}verifyOperationInProgress(){}async Vu(){let t;do t=this._u,await t;while(t!==this._u)}mu(t){for(const e of this.cu)if(e.timerId===t)return!0;return!1}fu(t){return this.Vu().then(()=>{this.cu.sort((e,s)=>e.targetTimeMs-s.targetTimeMs);for(const e of this.cu)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Vu()})}gu(t){this.Iu.push(t)}Ru(t){const e=this.cu.indexOf(t);this.cu.splice(e,1)}}function ic(n){return function(e,s){if(typeof e!="object"||e===null)return!1;const i=e;for(const r of s)if(r in i&&typeof i[r]=="function")return!0;return!1}(n,["next","error","complete"])}class Hr extends Mo{constructor(t,e,s,i){super(t,e,s,i),this.type="firestore",this._queue=function(){return new ev}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||kh(this),this._firestoreClient.terminate()}}function nv(n,t){const e=typeof n=="object"?n:mp(),s=typeof n=="string"?n:"(default)",i=up(e,"firestore").getImmediate({identifier:s});if(!i._initialized){const r=im("firestore");r&&Zy(i,...r)}return i}function sv(n){return n._firestoreClient||kh(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function kh(n){var t,e,s;const i=n._freezeSettings(),r=function(l,c,h,f){return new $p(l,c,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,Mh(f.experimentalLongPollingOptions),f.useFetchStreams)}(n._databaseId,((t=n._app)===null||t===void 0?void 0:t.options.appId)||"",n._persistenceKey,i);n._firestoreClient=new Ky(n._authCredentials,n._appCheckCredentials,n._queue,r),!((e=i.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((s=i.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(t){this._byteString=t}static fromBase64String(t){try{return new ii(vt.fromBase64String(t))}catch(e){throw new U(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new ii(vt.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new U(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vt(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new U(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new U(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Z(this._lat,t._lat)||Z(this._long,t._long)}}const rv=new RegExp("[~\\*/\\[\\]]");function ov(n,t,e){if(t.search(rv)>=0)throw rc(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n);try{return new Nh(...t.split("."))._internalPath}catch{throw rc(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n)}}function rc(n,t,e,s,i){let r=`Function ${t}() called with invalid data`;r+=". ";let a="";return new U(L.INVALID_ARGUMENT,r+n+a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(t,e,s,i,r){this._firestore=t,this._userDataWriter=e,this._key=s,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new je(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new av(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Oh("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class av extends Lh{data(){return super.data()}}function Oh(n,t){return typeof t=="string"?ov(n,t):t instanceof Nh?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lv(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new U(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class cv{convertValue(t,e="none"){switch(Fe(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ct(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Oe(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw H()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const s={};return di(t,(i,r)=>{s[i]=this.convertValue(r,e)}),s}convertGeoPoint(t){return new iv(ct(t.latitude),ct(t.longitude))}convertArray(t,e){return(t.values||[]).map(s=>this.convertValue(s,e))}convertServerTimestamp(t,e){switch(e){case"previous":const s=po(t);return s==null?null:this.convertValue(s,e);case"estimate":return this.convertTimestamp(ns(t));default:return null}}convertTimestamp(t){const e=ge(t);return new Dt(e.seconds,e.nanos)}convertDocumentKey(t,e){const s=it.fromString(t);ut(yh(s));const i=new ss(s.get(1),s.get(3)),r=new $(s.popFirst(5));return i.isEqual(e)||se(`Document ${r} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Fh extends Lh{constructor(t,e,s,i,r,a){super(t,e,s,i,a),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Hs(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const s=this._document.data.field(Oh("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,e.serverTimestamps)}}}class Hs extends Fh{data(t={}){return super.data(t)}}class uv{constructor(t,e,s,i){this._firestore=t,this._userDataWriter=e,this._snapshot=i,this.metadata=new Bn(i.hasPendingWrites,i.fromCache),this.query=s}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(s=>{t.call(e,new Hs(this._firestore,this._userDataWriter,s.key,s,new Bn(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new U(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(l=>{const c=new Hs(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Bn(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>r||l.type!==3).map(l=>{const c=new Hs(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Bn(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,f=-1;return l.type!==0&&(h=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),f=a.indexOf(l.doc.key)),{type:hv(l.type),doc:c,oldIndex:h,newIndex:f}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function hv(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return H()}}class jh extends cv{constructor(t){super(),this.firestore=t}convertBytes(t){return new ii(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new je(this.firestore,null,e)}}function dv(n,...t){var e,s,i;n=Du(n);let r={includeMetadataChanges:!1,source:"default"},a=0;typeof t[a]!="object"||ic(t[a])||(r=t[a],a++);const l={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(ic(t[a])){const m=t[a];t[a]=(e=m.next)===null||e===void 0?void 0:e.bind(m),t[a+1]=(s=m.error)===null||s===void 0?void 0:s.bind(m),t[a+2]=(i=m.complete)===null||i===void 0?void 0:i.bind(m)}let c,h,f;if(n instanceof je)h=qs(n.firestore,Hr),f=_o(n._key.path),c={next:m=>{t[a]&&t[a](fv(h,n,m))},error:t[a+1],complete:t[a+2]};else{const m=qs(n,Ti);h=qs(m.firestore,Hr),f=m._query;const y=new jh(h);c={next:E=>{t[a]&&t[a](new uv(h,y,m,E))},error:t[a+1],complete:t[a+2]},lv(n._query)}return function(y,E,R,x){const b=new Gy(x),D=new Vy(E,b,R);return y.asyncQueue.enqueueAndForget(async()=>Cy(await tc(y),D)),()=>{b.Ga(),y.asyncQueue.enqueueAndForget(async()=>Ry(await tc(y),D))}}(sv(h),f,l,c)}function fv(n,t,e){const s=e.docs.get(t._key),i=new jh(n);return new Fh(n,i,t._key,s,new Bn(e.hasPendingWrites,e.fromCache),t.converter)}(function(t,e=!0){(function(i){mn=i})(fp),Zs(new Zn("firestore",(s,{instanceIdentifier:i,options:r})=>{const a=s.getProvider("app").getImmediate(),l=new Hr(new Sp(s.getProvider("auth-internal")),new xp(s.getProvider("app-check-internal")),function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new U(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ss(h.options.projectId,f)}(a,i),a);return r=Object.assign({useFetchStreams:e},r),l._setSettings(r),l},"PUBLIC").setMultipleInstances(!0)),Je(wl,"4.6.5",t),Je(wl,"4.6.5","esm2017")})();function mv(n){return C.jsxs("nav",{children:[C.jsx("span",{children:n.personName}),C.jsxs("div",{className:"status-button",children:[C.jsx("span",{className:"status-indicator"}),C.jsx("span",{className:"status-text",children:"Chat With Me"})]})]})}const pv="/Azfar731.github.io/assets/whatsappLogo-CV8RNnnA.png";function Bh(){return C.jsxs("div",{className:"whatsapp-button",children:[C.jsx("span",{children:"Happy to chat on WhatsApp"}),C.jsx("img",{src:pv,alt:"WhatsAppLogo"})]})}function gv(n){const t=n.introContent;return C.jsxs("div",{id:"intro-Content",children:[C.jsx("h2",{className:"smallText",children:t.jobTitle}),C.jsx("h1",{children:t.sellingPoint}),C.jsx("p",{children:t.missionStatement}),C.jsx(Bh,{})]})}function yv(n){return C.jsxs("div",{id:"intro",children:[C.jsx("div",{id:"introTopLeftGradient",className:"radialGradient"}),C.jsx("div",{id:"introRightGradient",className:"radialGradient"}),C.jsx(mv,{personName:n.personName}),C.jsx(gv,{introContent:n.introContent})]})}function vv({currentSection:n}){const t=[{name:"ABOUT ME",id:"AboutMe"},{name:"WORK",id:"Work"},{name:"SERVICES",id:"Services"},{name:"PROFILES",id:"Profiles"}],e=t.map((i,r)=>C.jsx("a",{href:`#${i.id}`,children:C.jsx("div",{className:`headerElement ${r<t.length-1?"rightBorder":""} `,children:C.jsx("div",{className:`headerElementName ${n===i.id?"active":""}`,children:i.name})})},i.id)),s={width:`${t.length*15}%`};return C.jsx("header",{style:s,children:C.jsx("div",{className:"headerInner",children:e})})}function _v(n){const[t,e]=j.useState(!0),s=j.useRef({}),i=n.aboutMeList.map((l,c)=>C.jsx("div",{children:C.jsxs("div",{className:"list-item",children:[C.jsx("div",{className:"number",children:c+1}),C.jsx("div",{className:"text",children:l})]})},l));j.useEffect(()=>{let l=document.querySelector(".listContainer");if(l){let c=l.offsetHeight;s.current={default:{height:c,borderLeft:"2px solid #151515"},hover:{height:c,borderLeft:"2px solid #1b878a",boxShadow:"0 0 20px 2px #1b878a"}},e(!1)}},[]);const r=()=>{n.setCurrentSection(),e(!0)},a=()=>{n.unsetCurrentSection(),e(!1)};return C.jsxs("div",{id:"AboutMe",className:"container",onMouseEnter:r,onMouseLeave:a,children:[C.jsx("div",{className:"vl",style:t?s.current.hover:s.current.default}),C.jsx("div",{className:"listContainer",children:i})]})}const Tv="/Azfar731.github.io/assets/google-sOeEoOnC.png",ko="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAmUlEQVR4nO2SOw7CMBAF9wC5Aw0HS0OBRJGO01JwEDLIyRptLNxAHDdvJEuWZenNfsyE+APgmk6v8AvwAmbg1is8c5wEa9tTYMncfBxsK7+H8MkF2nWCItzfFvzeTgIYQ9un8P4RCBJ5HOOeAifgkSuvCQSJJ3DeTSABDFbwTaD2twlUBA4DCTgagWkJe4GW0NEITEsohP3OG9h5XgBUl6hqAAAAAElFTkSuQmCC",Ev="/Azfar731.github.io/assets/usa-rHo2R_-Y.png";function kn(){const[n,t]=j.useState(!1),e={default:{display:"flex",flexDirection:"column",background:"#242629",width:"90%",borderRadius:"1rem",padding:"3%"},hover:{display:"flex",flexDirection:"column",background:"#0d0d0d",width:"90%",borderRadius:"1rem",padding:"3%"}},s={default:{transform:"rotate(90deg)",width:"2em"},hover:{transform:"rotate(45deg)",width:"2em"}},i=()=>{t(!0)},r=()=>{t(!1)};return C.jsxs("div",{className:"workCard",onMouseEnter:i,onMouseLeave:r,children:[C.jsx("img",{src:Tv,className:"workCardImage",alt:""}),C.jsxs("div",{style:n?e.hover:e.default,children:[C.jsxs("div",{className:"workCardHeading",children:[C.jsxs("div",{className:"titleContainer",children:[C.jsx("div",{className:`workCardTitle textLine ${n?"line1-exit":"line1-enter"}`,children:"Google"}),C.jsx("div",{className:`workCardTitleHover textLine ${n?"line2-enter":"line2-exit"}`,children:"Google"})]}),C.jsx("img",{src:ko,alt:"little arrow image",style:n?s.hover:s.default})]}),C.jsxs("div",{className:"workCardLocation",children:[C.jsx("img",{src:Ev,alt:"usa flag",className:"locationFlag"}),C.jsx("span",{className:"locationText",children:"San Francisco - United States"})]}),C.jsxs("div",{className:"workCardPartners",children:["Developed By: AzfarRazzaq   ",C.jsx("span",{className:"dot",children:""}),"   Designed By: AzfarRazzaq"]})]})]})}function wv(n){n.projects.map(s=>C.jsx(kn,{project:s},s.projectTitle));const t=()=>{n.setCurrentSection()},e=()=>{n.unsetCurrentSection()};return C.jsxs("div",{id:"Work",onMouseEnter:t,onMouseLeave:e,children:[C.jsxs("span",{className:"smallText",children:["Happy Clients ","<3"]}),C.jsx("h2",{className:"h2Titles",children:"Recent Work"}),C.jsxs("div",{id:"workCardsContainer",children:[C.jsx(kn,{}),C.jsx(kn,{}),C.jsx(kn,{}),C.jsx(kn,{})]})]})}function cr(){return C.jsxs("div",{className:"serviceCard",children:[C.jsxs("div",{className:"serviceCardNumber",children:[C.jsx("span",{className:"greyLine",children:""}),C.jsx("span",{className:"serviceNumber",children:"   01"})]}),C.jsxs("div",{className:"serviceTitle",children:[C.jsx("h3",{className:"serviceTitleLine",children:"WEBFLOW"}),C.jsx("h3",{className:"serviceTitleLine",children:"DEVELOPMENT"})]}),C.jsx("div",{className:"serviceDescription",children:C.jsx("p",{className:"serviceDescriptionText",children:"Bring your design from Figma, XD, or any other tool, and we'll turn your layout into a kickass website, super organized and following the top standards of the Webflow market."})})]})}function Av(n){return j.useEffect(()=>{const t=document.querySelector(".circularText");if(t){t.innerHTML=n.text+n.text,t.innerHTML=t.textContent.replace(/./g,"<span>$&</span>");const e=Array.from(t.children);for(let s=1;s<e.length;s++)e[s].style.transform="rotate("+s*(360/e.length)+"deg)"}},[]),C.jsxs("div",{className:"circularTextContainer",children:[C.jsx("img",{src:ko,alt:"arrow symbol"}),C.jsx("h5",{className:"circularText"})]})}function Iv(n){const t=()=>{n.setCurrentSection()},e=()=>{n.unsetCurrentSection()};return C.jsxs("div",{id:"Services",onMouseEnter:t,onMouseLeave:e,children:[C.jsx("div",{id:"servicesLogo",children:C.jsx(Av,{text:" React Developer "})}),C.jsx("div",{id:"topDiv",className:"radialGradient"}),C.jsx("div",{id:"bottomLeftDiv",className:"radialGradient"}),C.jsx("div",{id:"bottomRightDiv",className:"radialGradient"}),C.jsxs("div",{id:"servicesContent",children:[C.jsx("span",{className:"smallText",children:"HOW CAN I HELP?"}),C.jsx("h2",{id:"serviceTitle",className:"h2Titles",children:"Services"}),C.jsxs("div",{id:"servicesCardContainer",children:[C.jsx(cr,{}),C.jsx(cr,{}),C.jsx(cr,{})]}),C.jsx(Bh,{})]})]})}function Pv(){const n=[{name:"Instagram",link:"https://www.instagram.com/"},{name:"Linkedin",link:"linkedin.com"},{name:"Github",link:"github.com"}],t=n.map((s,i)=>C.jsx("div",{className:` linkContainer ${i<n.length-1?"rightBorder":""}`,children:C.jsx("a",{href:s.link,target:"_blank",children:C.jsxs("div",{className:"link ",children:[C.jsx("div",{className:"linkName",children:s.name}),C.jsx("img",{src:ko,alt:"arrow symbol"})]})})},s.link)),e={width:`${n.length*20}%`,margin:"auto",maxWidth:"80%",height:"7rem",borderRadius:"5rem",boxShadow:" 0 0 0.1rem 0.1rem rgba(255, 255, 255, 0.3)",display:"flex",alignItems:"center",overflow:"hidden"};return C.jsxs("div",{id:"SocialLinks",children:[C.jsx("div",{className:"slTopGradient"}),C.jsx("div",{className:"linksContainer",style:e,children:t})]})}var Sv="firebase",Cv="10.12.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Je(Sv,Cv,"app");const Rv={apiKey:"AIzaSyCa2nAxarIqw8gfHnT2sK7nVM7rIMwuBrM",authDomain:"portfolio-771f1.firebaseapp.com",projectId:"portfolio-771f1",storageBucket:"portfolio-771f1.appspot.com",messagingSenderId:"1050997976300",appId:"1:1050997976300:web:891e4cb3fdd46c3940c9c9"},bv="azzi",xv=Lu(Rv),Vv=nv(xv),Dv=tv(Vv,bv);function Mv(n){return j.useEffect(()=>{let t=document.querySelector(".scrollingText");if(t){const e=t.cloneNode(!0);document.querySelector(".scrollingTextContainer").append(e)}},[]),C.jsx("div",{className:"scrollingTextContainer",children:C.jsx("div",{className:"scrollingText",children:n.text})})}function kv(n){return C.jsxs("div",{id:"Footer",children:[C.jsxs("div",{className:"nameEmail",children:[C.jsx("span",{className:"footer name",children:n.personName}),C.jsx("div",{className:"email animated-underline",children:"azfarrazzaq23@gmail.com"})]}),C.jsxs("span",{children:["Kayser Web  |  30.289.467/0001-64  ","","  All Rights Reserved"]})]})}const Nv="/Azfar731.github.io/assets/globe-BGmfykm5.png",Lv="/Azfar731.github.io/assets/globe2-C7zE4GIG.png",No=j.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"}),Ei=j.createContext({}),Lo=j.createContext(null),Oo=typeof window<"u",Fo=Oo?j.useLayoutEffect:j.useEffect,Uh=j.createContext({strict:!1}),wi=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Ov="framerAppearId",$h="data-"+wi(Ov),Fv={skipAnimations:!1,useManualTiming:!1};function jv(n){let t=new Set,e=new Set,s=!1,i=!1;const r=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function l(h){r.has(h)&&(c.schedule(h),n()),h(a)}const c={schedule:(h,f=!1,m=!1)=>{const E=m&&s?t:e;return f&&r.add(h),E.has(h)||E.add(h),h},cancel:h=>{e.delete(h),r.delete(h)},process:h=>{if(a=h,s){i=!0;return}s=!0,[t,e]=[e,t],e.clear(),t.forEach(l),s=!1,i&&(i=!1,c.process(h))}};return c}const Fs=["read","resolveKeyframes","update","preRender","render","postRender"],Bv=40;function zh(n,t){let e=!1,s=!0;const i={delta:0,timestamp:0,isProcessing:!1},r=()=>e=!0,a=Fs.reduce((D,k)=>(D[k]=jv(r),D),{}),{read:l,resolveKeyframes:c,update:h,preRender:f,render:m,postRender:y}=a,E=()=>{const D=performance.now();e=!1,i.delta=s?1e3/60:Math.max(Math.min(D-i.timestamp,Bv),1),i.timestamp=D,i.isProcessing=!0,l.process(i),c.process(i),h.process(i),f.process(i),m.process(i),y.process(i),i.isProcessing=!1,e&&t&&(s=!1,n(E))},R=()=>{e=!0,s=!0,i.isProcessing||n(E)};return{schedule:Fs.reduce((D,k)=>{const M=a[k];return D[k]=(F,q=!1,G=!1)=>(e||R(),M.schedule(F,q,G)),D},{}),cancel:D=>{for(let k=0;k<Fs.length;k++)a[Fs[k]].cancel(D)},state:i,steps:a}}const{schedule:jo,cancel:Uw}=zh(queueMicrotask,!1);function Ke(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}const qh=j.createContext({});let oc=!1;function Uv(n,t,e,s,i){var r;const{visualElement:a}=j.useContext(Ei),l=j.useContext(Uh),c=j.useContext(Lo),h=j.useContext(No).reducedMotion,f=j.useRef();s=s||l.renderer,!f.current&&s&&(f.current=s(n,{visualState:t,parent:a,props:e,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:h}));const m=f.current,y=j.useContext(qh);m&&!m.projection&&i&&(m.type==="html"||m.type==="svg")&&zv(f.current,e,i,y),j.useInsertionEffect(()=>{m&&m.update(e,c)});const E=e[$h],R=j.useRef(!!E&&!window.MotionHandoffIsComplete&&((r=window.MotionHasOptimisedAnimation)===null||r===void 0?void 0:r.call(window,E)));return Fo(()=>{m&&(m.updateFeatures(),jo.render(m.render),R.current&&m.animationState&&m.animationState.animateChanges())}),j.useEffect(()=>{m&&(!R.current&&m.animationState&&m.animationState.animateChanges(),R.current=!1,oc||(oc=!0,queueMicrotask($v)))}),m}function $v(){window.MotionHandoffIsComplete=!0}function zv(n,t,e,s){const{layoutId:i,layout:r,drag:a,dragConstraints:l,layoutScroll:c,layoutRoot:h}=t;n.projection=new e(n.latestValues,t["data-framer-portal-id"]?void 0:Hh(n.parent)),n.projection.setOptions({layoutId:i,layout:r,alwaysMeasureLayout:!!a||l&&Ke(l),visualElement:n,animationType:typeof r=="string"?r:"both",initialPromotionConfig:s,layoutScroll:c,layoutRoot:h})}function Hh(n){if(n)return n.options.allowProjection!==!1?n.projection:Hh(n.parent)}function qv(n,t,e){return j.useCallback(s=>{s&&n.mount&&n.mount(s),t&&(s?t.mount(s):t.unmount()),e&&(typeof e=="function"?e(s):Ke(e)&&(e.current=s))},[t])}function rs(n){return typeof n=="string"||Array.isArray(n)}function os(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const Bo=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Uo=["initial",...Bo];function Ai(n){return os(n.animate)||Uo.some(t=>rs(n[t]))}function Gh(n){return!!(Ai(n)||n.variants)}function Hv(n,t){if(Ai(n)){const{initial:e,animate:s}=n;return{initial:e===!1||rs(e)?e:void 0,animate:rs(s)?s:void 0}}return n.inherit!==!1?t:{}}function Gv(n){const{initial:t,animate:e}=Hv(n,j.useContext(Ei));return j.useMemo(()=>({initial:t,animate:e}),[ac(t),ac(e)])}function ac(n){return Array.isArray(n)?n.join(" "):n}const lc={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},un={};for(const n in lc)un[n]={isEnabled:t=>lc[n].some(e=>!!t[e])};function Kv(n){for(const t in n)un[t]={...un[t],...n[t]}}const Kh=j.createContext({}),Wv=Symbol.for("motionComponentSymbol"),yt=n=>n;let Qv=yt,Gr=yt;function Yv({preloadedFeatures:n,createVisualElement:t,useRender:e,useVisualState:s,Component:i}){n&&Kv(n);function r(l,c){let h;const f={...j.useContext(No),...l,layoutId:Xv(l)},{isStatic:m}=f,y=Gv(l),E=s(l,m);if(!m&&Oo){Jv();const R=Zv(f);h=R.MeasureLayout,y.visualElement=Uv(i,E,f,t,R.ProjectionNode)}return C.jsxs(Ei.Provider,{value:y,children:[h&&y.visualElement?C.jsx(h,{visualElement:y.visualElement,...f}):null,e(i,l,qv(E,y.visualElement,c),E,m,y.visualElement)]})}const a=j.forwardRef(r);return a[Wv]=i,a}function Xv({layoutId:n}){const t=j.useContext(Kh).id;return t&&n!==void 0?t+"-"+n:n}function Jv(n,t){j.useContext(Uh).strict}function Zv(n){const{drag:t,layout:e}=un;if(!t&&!e)return{};const s={...t,...e};return{MeasureLayout:t!=null&&t.isEnabled(n)||e!=null&&e.isEnabled(n)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function t0(n){function t(s,i={}){return Yv(n(s,i))}if(typeof Proxy>"u")return t;const e=new Map;return new Proxy(t,{get:(s,i)=>(e.has(i)||e.set(i,t(i)),e.get(i))})}const e0=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function $o(n){return typeof n!="string"||n.includes("-")?!1:!!(e0.indexOf(n)>-1||/[A-Z]/u.test(n))}const ri={};function n0(n){Object.assign(ri,n)}const ds=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Te=new Set(ds);function Wh(n,{layout:t,layoutId:e}){return Te.has(n)||n.startsWith("origin")||(t||e!==void 0)&&(!!ri[n]||n==="opacity")}const Rt=n=>!!(n&&n.getVelocity),Qh=(n,t)=>t&&typeof n=="number"?t.transform(n):n,ve=(n,t,e)=>e>t?t:e<n?n:e,yn={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Kn={...yn,transform:n=>ve(0,1,n)},js={...yn,default:1},Wn=n=>Math.round(n*1e5)/1e5,zo=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu,s0=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu,i0=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu;function fs(n){return typeof n=="string"}function r0(n){return n==null}const ms=n=>({test:t=>fs(t)&&t.endsWith(n)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${n}`}),le=ms("deg"),Ht=ms("%"),B=ms("px"),o0=ms("vh"),a0=ms("vw"),cc={...Ht,parse:n=>Ht.parse(n)/100,transform:n=>Ht.transform(n*100)},uc={...yn,transform:Math.round},qo={borderWidth:B,borderTopWidth:B,borderRightWidth:B,borderBottomWidth:B,borderLeftWidth:B,borderRadius:B,radius:B,borderTopLeftRadius:B,borderTopRightRadius:B,borderBottomRightRadius:B,borderBottomLeftRadius:B,width:B,maxWidth:B,height:B,maxHeight:B,size:B,top:B,right:B,bottom:B,left:B,padding:B,paddingTop:B,paddingRight:B,paddingBottom:B,paddingLeft:B,margin:B,marginTop:B,marginRight:B,marginBottom:B,marginLeft:B,rotate:le,rotateX:le,rotateY:le,rotateZ:le,scale:js,scaleX:js,scaleY:js,scaleZ:js,skew:le,skewX:le,skewY:le,distance:B,translateX:B,translateY:B,translateZ:B,x:B,y:B,z:B,perspective:B,transformPerspective:B,opacity:Kn,originX:cc,originY:cc,originZ:B,zIndex:uc,backgroundPositionX:B,backgroundPositionY:B,fillOpacity:Kn,strokeOpacity:Kn,numOctaves:uc},l0={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},c0=ds.length;function u0(n,t,e){let s="",i=!0;for(let r=0;r<c0;r++){const a=ds[r],l=n[a];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(a.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||e){const h=Qh(l,qo[a]);if(!c){i=!1;const f=l0[a]||a;s+=`${f}(${h}) `}e&&(t[a]=h)}}return s=s.trim(),e?s=e(t,i?"":s):i&&(s="none"),s}const Yh=n=>t=>typeof t=="string"&&t.startsWith(n),Xh=Yh("--"),h0=Yh("var(--"),Ho=n=>h0(n)?d0.test(n.split("/*")[0].trim()):!1,d0=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function Go(n,t,e){const{style:s,vars:i,transformOrigin:r}=n;let a=!1,l=!1;for(const c in t){const h=t[c];if(Te.has(c)){a=!0;continue}else if(Xh(c)){i[c]=h;continue}else{const f=Qh(h,qo[c]);c.startsWith("origin")?(l=!0,r[c]=f):s[c]=f}}if(t.transform||(a||e?s.transform=u0(t,n.transform,e):s.transform&&(s.transform="none")),l){const{originX:c="50%",originY:h="50%",originZ:f=0}=r;s.transformOrigin=`${c} ${h} ${f}`}}const Ko=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Jh(n,t,e){for(const s in t)!Rt(t[s])&&!Wh(s,e)&&(n[s]=t[s])}function f0({transformTemplate:n},t){return j.useMemo(()=>{const e=Ko();return Go(e,t,n),Object.assign({},e.vars,e.style)},[t])}function m0(n,t){const e=n.style||{},s={};return Jh(s,e,n),Object.assign(s,f0(n,t)),s}function p0(n,t){const e={},s=m0(n,t);return n.drag&&n.dragListener!==!1&&(e.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(e.tabIndex=0),e.style=s,e}const g0=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function oi(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||g0.has(n)}let Zh=n=>!oi(n);function y0(n){n&&(Zh=t=>t.startsWith("on")?!oi(t):n(t))}try{y0(require("@emotion/is-prop-valid").default)}catch{}function v0(n,t,e){const s={};for(const i in n)i==="values"&&typeof n.values=="object"||(Zh(i)||e===!0&&oi(i)||!t&&!oi(i)||n.draggable&&i.startsWith("onDrag"))&&(s[i]=n[i]);return s}function hc(n,t,e){return typeof n=="string"?n:B.transform(t+e*n)}function _0(n,t,e){const s=hc(t,n.x,n.width),i=hc(e,n.y,n.height);return`${s} ${i}`}const T0={offset:"stroke-dashoffset",array:"stroke-dasharray"},E0={offset:"strokeDashoffset",array:"strokeDasharray"};function w0(n,t,e=1,s=0,i=!0){n.pathLength=1;const r=i?T0:E0;n[r.offset]=B.transform(-s);const a=B.transform(t),l=B.transform(e);n[r.array]=`${a} ${l}`}function Wo(n,{attrX:t,attrY:e,attrScale:s,originX:i,originY:r,pathLength:a,pathSpacing:l=1,pathOffset:c=0,...h},f,m){if(Go(n,h,m),f){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:y,style:E,dimensions:R}=n;y.transform&&(R&&(E.transform=y.transform),delete y.transform),R&&(i!==void 0||r!==void 0||E.transform)&&(E.transformOrigin=_0(R,i!==void 0?i:.5,r!==void 0?r:.5)),t!==void 0&&(y.x=t),e!==void 0&&(y.y=e),s!==void 0&&(y.scale=s),a!==void 0&&w0(y,a,l,c,!1)}const td=()=>({...Ko(),attrs:{}}),Qo=n=>typeof n=="string"&&n.toLowerCase()==="svg";function A0(n,t,e,s){const i=j.useMemo(()=>{const r=td();return Wo(r,t,Qo(s),n.transformTemplate),{...r.attrs,style:{...r.style}}},[t]);if(n.style){const r={};Jh(r,n.style,n),i.style={...r,...i.style}}return i}function I0(n=!1){return(e,s,i,{latestValues:r},a)=>{const c=($o(e)?A0:p0)(s,r,a,e),h=v0(s,typeof e=="string",n),f=e!==j.Fragment?{...h,...c,ref:i}:{},{children:m}=s,y=j.useMemo(()=>Rt(m)?m.get():m,[m]);return j.createElement(e,{...f,children:y})}}function ed(n,{style:t,vars:e},s,i){Object.assign(n.style,t,i&&i.getProjectionStyles(s));for(const r in e)n.style.setProperty(r,e[r])}const nd=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function sd(n,t,e,s){ed(n,t,void 0,s);for(const i in t.attrs)n.setAttribute(nd.has(i)?i:wi(i),t.attrs[i])}function Yo(n,t,e){var s;const{style:i}=n,r={};for(const a in i)(Rt(i[a])||t.style&&Rt(t.style[a])||Wh(a,n)||((s=e==null?void 0:e.getValue(a))===null||s===void 0?void 0:s.liveStyle)!==void 0)&&(r[a]=i[a]);return e&&i&&typeof i.willChange=="string"&&(e.applyWillChange=!1),r}function id(n,t,e){const s=Yo(n,t,e);for(const i in n)if(Rt(n[i])||Rt(t[i])){const r=ds.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;s[r]=n[i]}return s}function dc(n){const t=[{},{}];return n==null||n.values.forEach((e,s)=>{t[0][s]=e.get(),t[1][s]=e.getVelocity()}),t}function Xo(n,t,e,s){if(typeof t=="function"){const[i,r]=dc(s);t=t(e!==void 0?e:n.custom,i,r)}if(typeof t=="string"&&(t=n.variants&&n.variants[t]),typeof t=="function"){const[i,r]=dc(s);t=t(e!==void 0?e:n.custom,i,r)}return t}function Ii(n){const t=j.useRef(null);return t.current===null&&(t.current=n()),t.current}const Kr=n=>Array.isArray(n),P0=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),S0=n=>Kr(n)?n[n.length-1]||0:n;function Gs(n){const t=Rt(n)?n.get():n;return P0(t)?t.toValue():t}const rd=new Set(["opacity","clipPath","filter","transform"]);function od(n){if(Te.has(n))return"transform";if(rd.has(n))return wi(n)}function Pi(n,t){n.indexOf(t)===-1&&n.push(t)}function Si(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}function C0({applyWillChange:n=!1,scrapeMotionValuesFromProps:t,createRenderState:e,onMount:s},i,r,a,l){const c={latestValues:b0(i,r,a,l?!1:n,t),renderState:e()};return s&&(c.mount=h=>s(i,h,c)),c}const ad=n=>(t,e)=>{const s=j.useContext(Ei),i=j.useContext(Lo),r=()=>C0(n,t,s,i,e);return e?r():Ii(r)};function R0(n,t){const e=od(t);e&&Pi(n,e)}function fc(n,t,e){const s=Array.isArray(t)?t:[t];for(let i=0;i<s.length;i++){const r=Xo(n,s[i]);if(r){const{transitionEnd:a,transition:l,...c}=r;e(c,a)}}}function b0(n,t,e,s,i){var r;const a={},l=[],c=s&&((r=n.style)===null||r===void 0?void 0:r.willChange)===void 0,h=i(n,{});for(const b in h)a[b]=Gs(h[b]);let{initial:f,animate:m}=n;const y=Ai(n),E=Gh(n);t&&E&&!y&&n.inherit!==!1&&(f===void 0&&(f=t.initial),m===void 0&&(m=t.animate));let R=e?e.initial===!1:!1;R=R||f===!1;const x=R?m:f;return x&&typeof x!="boolean"&&!os(x)&&fc(n,x,(b,D)=>{for(const k in b){let M=b[k];if(Array.isArray(M)){const F=R?M.length-1:0;M=M[F]}M!==null&&(a[k]=M)}for(const k in D)a[k]=D[k]}),c&&(m&&f!==!1&&!os(m)&&fc(n,m,b=>{for(const D in b)R0(l,D)}),l.length&&(a.willChange=l.join(","))),a}const{schedule:X,cancel:Bt,state:dt,steps:ur}=zh(typeof requestAnimationFrame<"u"?requestAnimationFrame:yt,!0),x0={useVisualState:ad({scrapeMotionValuesFromProps:id,createRenderState:td,onMount:(n,t,{renderState:e,latestValues:s})=>{X.read(()=>{try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}),X.render(()=>{Wo(e,s,Qo(t.tagName),n.transformTemplate),sd(t,e)})}})},V0={useVisualState:ad({applyWillChange:!0,scrapeMotionValuesFromProps:Yo,createRenderState:Ko})};function D0(n,{forwardMotionProps:t=!1},e,s){return{...$o(n)?x0:V0,preloadedFeatures:e,useRender:I0(t),createVisualElement:s,Component:n}}function Jt(n,t,e,s={passive:!0}){return n.addEventListener(t,e,s),()=>n.removeEventListener(t,e)}const ld=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1;function Ci(n,t="page"){return{point:{x:n[`${t}X`],y:n[`${t}Y`]}}}const M0=n=>t=>ld(t)&&n(t,Ci(t));function Zt(n,t,e,s){return Jt(n,t,M0(e),s)}const k0=(n,t)=>e=>t(n(e)),te=(...n)=>n.reduce(k0);function cd(n){let t=null;return()=>{const e=()=>{t=null};return t===null?(t=n,e):!1}}const mc=cd("dragHorizontal"),pc=cd("dragVertical");function ud(n){let t=!1;if(n==="y")t=pc();else if(n==="x")t=mc();else{const e=mc(),s=pc();e&&s?t=()=>{e(),s()}:(e&&e(),s&&s())}return t}function hd(){const n=ud(!0);return n?(n(),!1):!0}class Ee{constructor(t){this.isMounted=!1,this.node=t}update(){}}function gc(n,t){const e=t?"pointerenter":"pointerleave",s=t?"onHoverStart":"onHoverEnd",i=(r,a)=>{if(r.pointerType==="touch"||hd())return;const l=n.getProps();n.animationState&&l.whileHover&&n.animationState.setActive("whileHover",t);const c=l[s];c&&X.postRender(()=>c(r,a))};return Zt(n.current,e,i,{passive:!n.getProps()[s]})}class N0 extends Ee{mount(){this.unmount=te(gc(this.node,!0),gc(this.node,!1))}unmount(){}}class L0 extends Ee{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=te(Jt(this.node.current,"focus",()=>this.onFocus()),Jt(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const dd=(n,t)=>t?n===t?!0:dd(n,t.parentElement):!1;function hr(n,t){if(!t)return;const e=new PointerEvent("pointer"+n);t(e,Ci(e))}class O0 extends Ee{constructor(){super(...arguments),this.removeStartListeners=yt,this.removeEndListeners=yt,this.removeAccessibleListeners=yt,this.startPointerPress=(t,e)=>{if(this.isPressing)return;this.removeEndListeners();const s=this.node.getProps(),r=Zt(window,"pointerup",(l,c)=>{if(!this.checkPressEnd())return;const{onTap:h,onTapCancel:f,globalTapTarget:m}=this.node.getProps(),y=!m&&!dd(this.node.current,l.target)?f:h;y&&X.update(()=>y(l,c))},{passive:!(s.onTap||s.onPointerUp)}),a=Zt(window,"pointercancel",(l,c)=>this.cancelPress(l,c),{passive:!(s.onTapCancel||s.onPointerCancel)});this.removeEndListeners=te(r,a),this.startPress(t,e)},this.startAccessiblePress=()=>{const t=r=>{if(r.key!=="Enter"||this.isPressing)return;const a=l=>{l.key!=="Enter"||!this.checkPressEnd()||hr("up",(c,h)=>{const{onTap:f}=this.node.getProps();f&&X.postRender(()=>f(c,h))})};this.removeEndListeners(),this.removeEndListeners=Jt(this.node.current,"keyup",a),hr("down",(l,c)=>{this.startPress(l,c)})},e=Jt(this.node.current,"keydown",t),s=()=>{this.isPressing&&hr("cancel",(r,a)=>this.cancelPress(r,a))},i=Jt(this.node.current,"blur",s);this.removeAccessibleListeners=te(e,i)}}startPress(t,e){this.isPressing=!0;const{onTapStart:s,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),s&&X.postRender(()=>s(t,e))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!hd()}cancelPress(t,e){if(!this.checkPressEnd())return;const{onTapCancel:s}=this.node.getProps();s&&X.postRender(()=>s(t,e))}mount(){const t=this.node.getProps(),e=Zt(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),s=Jt(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=te(e,s)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Wr=new WeakMap,dr=new WeakMap,F0=n=>{const t=Wr.get(n.target);t&&t(n)},j0=n=>{n.forEach(F0)};function B0({root:n,...t}){const e=n||document;dr.has(e)||dr.set(e,{});const s=dr.get(e),i=JSON.stringify(t);return s[i]||(s[i]=new IntersectionObserver(j0,{root:n,...t})),s[i]}function U0(n,t,e){const s=B0(t);return Wr.set(n,e),s.observe(n),()=>{Wr.delete(n),s.unobserve(n)}}const $0={some:0,all:1};class z0 extends Ee{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:e,margin:s,amount:i="some",once:r}=t,a={root:e?e.current:void 0,rootMargin:s,threshold:typeof i=="number"?i:$0[i]},l=c=>{const{isIntersecting:h}=c;if(this.isInView===h||(this.isInView=h,r&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:f,onViewportLeave:m}=this.node.getProps(),y=h?f:m;y&&y(c)};return U0(this.node.current,a,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:e}=this.node;["amount","margin","root"].some(q0(t,e))&&this.startObserver()}unmount(){}}function q0({viewport:n={}},{viewport:t={}}={}){return e=>n[e]!==t[e]}const H0={inView:{Feature:z0},tap:{Feature:O0},focus:{Feature:L0},hover:{Feature:N0}};function fd(n,t){if(!Array.isArray(t))return!1;const e=t.length;if(e!==n.length)return!1;for(let s=0;s<e;s++)if(t[s]!==n[s])return!1;return!0}function Ri(n,t,e){const s=n.getProps();return Xo(s,t,e!==void 0?e:s.custom,n)}const ee=n=>n*1e3,ne=n=>n/1e3,G0={type:"spring",stiffness:500,damping:25,restSpeed:10},K0=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),W0={type:"keyframes",duration:.8},Q0={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Y0=(n,{keyframes:t})=>t.length>2?W0:Te.has(n)?n.startsWith("scale")?K0(t[1]):G0:Q0;function X0({when:n,delay:t,delayChildren:e,staggerChildren:s,staggerDirection:i,repeat:r,repeatType:a,repeatDelay:l,from:c,elapsed:h,...f}){return!!Object.keys(f).length}function Jo(n,t){return n[t]||n.default||n}const J0=n=>n!==null;function bi(n,{repeat:t,repeatType:e="loop"},s){const i=n.filter(J0),r=t&&e!=="loop"&&t%2===1?0:i.length-1;return!r||s===void 0?i[r]:s}let Ks;function Z0(){Ks=void 0}const me={now:()=>(Ks===void 0&&me.set(dt.isProcessing||Fv.useManualTiming?dt.timestamp:performance.now()),Ks),set:n=>{Ks=n,queueMicrotask(Z0)}},md=n=>/^0[^.\s]+$/u.test(n);function t_(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||md(n):!0}const pd=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n),e_=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function n_(n){const t=e_.exec(n);if(!t)return[,];const[,e,s,i]=t;return[`--${e??s}`,i]}function gd(n,t,e=1){const[s,i]=n_(n);if(!s)return;const r=window.getComputedStyle(t).getPropertyValue(s);if(r){const a=r.trim();return pd(a)?parseFloat(a):a}return Ho(i)?gd(i,t,e+1):i}const s_=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),yc=n=>n===yn||n===B,vc=(n,t)=>parseFloat(n.split(", ")[t]),_c=(n,t)=>(e,{transform:s})=>{if(s==="none"||!s)return 0;const i=s.match(/^matrix3d\((.+)\)$/u);if(i)return vc(i[1],t);{const r=s.match(/^matrix\((.+)\)$/u);return r?vc(r[1],n):0}},i_=new Set(["x","y","z"]),r_=ds.filter(n=>!i_.has(n));function o_(n){const t=[];return r_.forEach(e=>{const s=n.getValue(e);s!==void 0&&(t.push([e,s.get()]),s.set(e.startsWith("scale")?1:0))}),t}const hn={width:({x:n},{paddingLeft:t="0",paddingRight:e="0"})=>n.max-n.min-parseFloat(t)-parseFloat(e),height:({y:n},{paddingTop:t="0",paddingBottom:e="0"})=>n.max-n.min-parseFloat(t)-parseFloat(e),top:(n,{top:t})=>parseFloat(t),left:(n,{left:t})=>parseFloat(t),bottom:({y:n},{top:t})=>parseFloat(t)+(n.max-n.min),right:({x:n},{left:t})=>parseFloat(t)+(n.max-n.min),x:_c(4,13),y:_c(5,14)};hn.translateX=hn.x;hn.translateY=hn.y;const yd=n=>t=>t.test(n),a_={test:n=>n==="auto",parse:n=>n},vd=[yn,B,Ht,le,a0,o0,a_],Tc=n=>vd.find(yd(n)),ke=new Set;let Qr=!1,Yr=!1;function _d(){if(Yr){const n=Array.from(ke).filter(s=>s.needsMeasurement),t=new Set(n.map(s=>s.element)),e=new Map;t.forEach(s=>{const i=o_(s);i.length&&(e.set(s,i),s.render())}),n.forEach(s=>s.measureInitialState()),t.forEach(s=>{s.render();const i=e.get(s);i&&i.forEach(([r,a])=>{var l;(l=s.getValue(r))===null||l===void 0||l.set(a)})}),n.forEach(s=>s.measureEndState()),n.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}Yr=!1,Qr=!1,ke.forEach(n=>n.complete()),ke.clear()}function Td(){ke.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(Yr=!0)})}function l_(){Td(),_d()}class Zo{constructor(t,e,s,i,r,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=e,this.name=s,this.motionValue=i,this.element=r,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(ke.add(this),Qr||(Qr=!0,X.read(Td),X.resolveKeyframes(_d))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:e,element:s,motionValue:i}=this;for(let r=0;r<t.length;r++)if(t[r]===null)if(r===0){const a=i==null?void 0:i.get(),l=t[t.length-1];if(a!==void 0)t[0]=a;else if(s&&e){const c=s.readValue(e,l);c!=null&&(t[0]=c)}t[0]===void 0&&(t[0]=l),i&&a===void 0&&i.set(t[0])}else t[r]=t[r-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),ke.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,ke.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const ta=(n,t)=>e=>!!(fs(e)&&i0.test(e)&&e.startsWith(n)||t&&!r0(e)&&Object.prototype.hasOwnProperty.call(e,t)),Ed=(n,t,e)=>s=>{if(!fs(s))return s;const[i,r,a,l]=s.match(zo);return{[n]:parseFloat(i),[t]:parseFloat(r),[e]:parseFloat(a),alpha:l!==void 0?parseFloat(l):1}},c_=n=>ve(0,255,n),fr={...yn,transform:n=>Math.round(c_(n))},Ve={test:ta("rgb","red"),parse:Ed("red","green","blue"),transform:({red:n,green:t,blue:e,alpha:s=1})=>"rgba("+fr.transform(n)+", "+fr.transform(t)+", "+fr.transform(e)+", "+Wn(Kn.transform(s))+")"};function u_(n){let t="",e="",s="",i="";return n.length>5?(t=n.substring(1,3),e=n.substring(3,5),s=n.substring(5,7),i=n.substring(7,9)):(t=n.substring(1,2),e=n.substring(2,3),s=n.substring(3,4),i=n.substring(4,5),t+=t,e+=e,s+=s,i+=i),{red:parseInt(t,16),green:parseInt(e,16),blue:parseInt(s,16),alpha:i?parseInt(i,16)/255:1}}const Xr={test:ta("#"),parse:u_,transform:Ve.transform},We={test:ta("hsl","hue"),parse:Ed("hue","saturation","lightness"),transform:({hue:n,saturation:t,lightness:e,alpha:s=1})=>"hsla("+Math.round(n)+", "+Ht.transform(Wn(t))+", "+Ht.transform(Wn(e))+", "+Wn(Kn.transform(s))+")"},Pt={test:n=>Ve.test(n)||Xr.test(n)||We.test(n),parse:n=>Ve.test(n)?Ve.parse(n):We.test(n)?We.parse(n):Xr.parse(n),transform:n=>fs(n)?n:n.hasOwnProperty("red")?Ve.transform(n):We.transform(n)};function h_(n){var t,e;return isNaN(n)&&fs(n)&&(((t=n.match(zo))===null||t===void 0?void 0:t.length)||0)+(((e=n.match(s0))===null||e===void 0?void 0:e.length)||0)>0}const wd="number",Ad="color",d_="var",f_="var(",Ec="${}",m_=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function as(n){const t=n.toString(),e=[],s={color:[],number:[],var:[]},i=[];let r=0;const l=t.replace(m_,c=>(Pt.test(c)?(s.color.push(r),i.push(Ad),e.push(Pt.parse(c))):c.startsWith(f_)?(s.var.push(r),i.push(d_),e.push(c)):(s.number.push(r),i.push(wd),e.push(parseFloat(c))),++r,Ec)).split(Ec);return{values:e,split:l,indexes:s,types:i}}function Id(n){return as(n).values}function Pd(n){const{split:t,types:e}=as(n),s=t.length;return i=>{let r="";for(let a=0;a<s;a++)if(r+=t[a],i[a]!==void 0){const l=e[a];l===wd?r+=Wn(i[a]):l===Ad?r+=Pt.transform(i[a]):r+=i[a]}return r}}const p_=n=>typeof n=="number"?0:n;function g_(n){const t=Id(n);return Pd(n)(t.map(p_))}const _e={test:h_,parse:Id,createTransformer:Pd,getAnimatableNone:g_},y_=new Set(["brightness","contrast","saturate","opacity"]);function v_(n){const[t,e]=n.slice(0,-1).split("(");if(t==="drop-shadow")return n;const[s]=e.match(zo)||[];if(!s)return n;const i=e.replace(s,"");let r=y_.has(t)?1:0;return s!==e&&(r*=100),t+"("+r+i+")"}const __=/\b([a-z-]*)\(.*?\)/gu,Jr={..._e,getAnimatableNone:n=>{const t=n.match(__);return t?t.map(v_).join(" "):n}},T_={...qo,color:Pt,backgroundColor:Pt,outlineColor:Pt,fill:Pt,stroke:Pt,borderColor:Pt,borderTopColor:Pt,borderRightColor:Pt,borderBottomColor:Pt,borderLeftColor:Pt,filter:Jr,WebkitFilter:Jr},ea=n=>T_[n];function Sd(n,t){let e=ea(n);return e!==Jr&&(e=_e),e.getAnimatableNone?e.getAnimatableNone(t):void 0}const E_=new Set(["auto","none","0"]);function w_(n,t,e){let s=0,i;for(;s<n.length&&!i;){const r=n[s];typeof r=="string"&&!E_.has(r)&&as(r).values.length&&(i=n[s]),s++}if(i&&e)for(const r of t)n[r]=Sd(e,i)}class Cd extends Zo{constructor(t,e,s,i){super(t,e,s,i,i==null?void 0:i.owner,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:e,name:s}=this;if(!e.current)return;super.readKeyframes();for(let c=0;c<t.length;c++){let h=t[c];if(typeof h=="string"&&(h=h.trim(),Ho(h))){const f=gd(h,e.current);f!==void 0&&(t[c]=f),c===t.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!s_.has(s)||t.length!==2)return;const[i,r]=t,a=Tc(i),l=Tc(r);if(a!==l)if(yc(a)&&yc(l))for(let c=0;c<t.length;c++){const h=t[c];typeof h=="string"&&(t[c]=parseFloat(h))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:e}=this,s=[];for(let i=0;i<t.length;i++)t_(t[i])&&s.push(i);s.length&&w_(t,s,e)}measureInitialState(){const{element:t,unresolvedKeyframes:e,name:s}=this;if(!t.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=hn[s](t.measureViewportBox(),window.getComputedStyle(t.current)),e[0]=this.measuredOrigin;const i=e[e.length-1];i!==void 0&&t.getValue(s,i).jump(i,!1)}measureEndState(){var t;const{element:e,name:s,unresolvedKeyframes:i}=this;if(!e.current)return;const r=e.getValue(s);r&&r.jump(this.measuredOrigin,!1);const a=i.length-1,l=i[a];i[a]=hn[s](e.measureViewportBox(),window.getComputedStyle(e.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([c,h])=>{e.getValue(c).set(h)}),this.resolveNoneKeyframes()}}function Rd(n){let t;return()=>(t===void 0&&(t=n()),t)}const wc=(n,t)=>t==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(_e.test(n)||n==="0")&&!n.startsWith("url("));function A_(n){const t=n[0];if(n.length===1)return!0;for(let e=0;e<n.length;e++)if(n[e]!==t)return!0}function I_(n,t,e,s){const i=n[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const r=n[n.length-1],a=wc(i,t),l=wc(r,t);return!a||!l?!1:A_(n)||e==="spring"&&s}class bd{constructor({autoplay:t=!0,delay:e=0,type:s="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:a="loop",...l}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.options={autoplay:t,delay:e,type:s,repeat:i,repeatDelay:r,repeatType:a,...l},this.updateFinishedPromise()}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&l_(),this._resolved}onKeyframesResolved(t,e){this.hasAttemptedResolve=!0;const{name:s,type:i,velocity:r,delay:a,onComplete:l,onUpdate:c,isGenerator:h}=this.options;if(!h&&!I_(t,s,i,r))if(a)this.options.duration=0;else{c==null||c(bi(t,this.options,e)),l==null||l(),this.resolveFinishedPromise();return}const f=this.initPlayback(t,e);f!==!1&&(this._resolved={keyframes:t,finalKeyframe:e,...f},this.onPostResolved())}onPostResolved(){}then(t,e){return this.currentFinishedPromise.then(t,e)}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}function na(n,t){return t?n*(1e3/t):0}const P_=5;function xd(n,t,e){const s=Math.max(t-P_,0);return na(e-n(s),t-s)}const mr=.001,S_=.01,C_=10,R_=.05,b_=1;function x_({duration:n=800,bounce:t=.25,velocity:e=0,mass:s=1}){let i,r,a=1-t;a=ve(R_,b_,a),n=ve(S_,C_,ne(n)),a<1?(i=h=>{const f=h*a,m=f*n,y=f-e,E=Zr(h,a),R=Math.exp(-m);return mr-y/E*R},r=h=>{const m=h*a*n,y=m*e+e,E=Math.pow(a,2)*Math.pow(h,2)*n,R=Math.exp(-m),x=Zr(Math.pow(h,2),a);return(-i(h)+mr>0?-1:1)*((y-E)*R)/x}):(i=h=>{const f=Math.exp(-h*n),m=(h-e)*n+1;return-mr+f*m},r=h=>{const f=Math.exp(-h*n),m=(e-h)*(n*n);return f*m});const l=5/n,c=D_(i,r,l);if(n=ee(n),isNaN(c))return{stiffness:100,damping:10,duration:n};{const h=Math.pow(c,2)*s;return{stiffness:h,damping:a*2*Math.sqrt(s*h),duration:n}}}const V_=12;function D_(n,t,e){let s=e;for(let i=1;i<V_;i++)s=s-n(s)/t(s);return s}function Zr(n,t){return n*Math.sqrt(1-t*t)}const M_=["duration","bounce"],k_=["stiffness","damping","mass"];function Ac(n,t){return t.some(e=>n[e]!==void 0)}function N_(n){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...n};if(!Ac(n,k_)&&Ac(n,M_)){const e=x_(n);t={...t,...e,mass:1},t.isResolvedFromDuration=!0}return t}function Vd({keyframes:n,restDelta:t,restSpeed:e,...s}){const i=n[0],r=n[n.length-1],a={done:!1,value:i},{stiffness:l,damping:c,mass:h,duration:f,velocity:m,isResolvedFromDuration:y}=N_({...s,velocity:-ne(s.velocity||0)}),E=m||0,R=c/(2*Math.sqrt(l*h)),x=r-i,b=ne(Math.sqrt(l/h)),D=Math.abs(x)<5;e||(e=D?.01:2),t||(t=D?.005:.5);let k;if(R<1){const M=Zr(b,R);k=F=>{const q=Math.exp(-R*b*F);return r-q*((E+R*b*x)/M*Math.sin(M*F)+x*Math.cos(M*F))}}else if(R===1)k=M=>r-Math.exp(-b*M)*(x+(E+b*x)*M);else{const M=b*Math.sqrt(R*R-1);k=F=>{const q=Math.exp(-R*b*F),G=Math.min(M*F,300);return r-q*((E+R*b*x)*Math.sinh(G)+M*x*Math.cosh(G))/M}}return{calculatedDuration:y&&f||null,next:M=>{const F=k(M);if(y)a.done=M>=f;else{let q=0;R<1&&(q=M===0?ee(E):xd(k,M,F));const G=Math.abs(q)<=e,A=Math.abs(r-F)<=t;a.done=G&&A}return a.value=a.done?r:F,a}}}function Ic({keyframes:n,velocity:t=0,power:e=.8,timeConstant:s=325,bounceDamping:i=10,bounceStiffness:r=500,modifyTarget:a,min:l,max:c,restDelta:h=.5,restSpeed:f}){const m=n[0],y={done:!1,value:m},E=g=>l!==void 0&&g<l||c!==void 0&&g>c,R=g=>l===void 0?c:c===void 0||Math.abs(l-g)<Math.abs(c-g)?l:c;let x=e*t;const b=m+x,D=a===void 0?b:a(b);D!==b&&(x=D-m);const k=g=>-x*Math.exp(-g/s),M=g=>D+k(g),F=g=>{const v=k(g),T=M(g);y.done=Math.abs(v)<=h,y.value=y.done?D:T};let q,G;const A=g=>{E(y.value)&&(q=g,G=Vd({keyframes:[y.value,R(y.value)],velocity:xd(M,g,y.value),damping:i,stiffness:r,restDelta:h,restSpeed:f}))};return A(0),{calculatedDuration:null,next:g=>{let v=!1;return!G&&q===void 0&&(v=!0,F(g),A(g)),q!==void 0&&g>=q?G.next(g-q):(!v&&F(g),y)}}}const Dd=(n,t,e)=>(((1-3*e+3*t)*n+(3*e-6*t))*n+3*t)*n,L_=1e-7,O_=12;function F_(n,t,e,s,i){let r,a,l=0;do a=t+(e-t)/2,r=Dd(a,s,i)-n,r>0?e=a:t=a;while(Math.abs(r)>L_&&++l<O_);return a}function ps(n,t,e,s){if(n===t&&e===s)return yt;const i=r=>F_(r,0,1,n,e);return r=>r===0||r===1?r:Dd(i(r),t,s)}const j_=ps(.42,0,1,1),B_=ps(0,0,.58,1),Md=ps(.42,0,.58,1),U_=n=>Array.isArray(n)&&typeof n[0]!="number",kd=n=>t=>t<=.5?n(2*t)/2:(2-n(2*(1-t)))/2,Nd=n=>t=>1-n(1-t),sa=n=>1-Math.sin(Math.acos(n)),Ld=Nd(sa),$_=kd(sa),Od=ps(.33,1.53,.69,.99),ia=Nd(Od),z_=kd(ia),q_=n=>(n*=2)<1?.5*ia(n):.5*(2-Math.pow(2,-10*(n-1))),Pc={linear:yt,easeIn:j_,easeInOut:Md,easeOut:B_,circIn:sa,circInOut:$_,circOut:Ld,backIn:ia,backInOut:z_,backOut:Od,anticipate:q_},Sc=n=>{if(Array.isArray(n)){Gr(n.length===4);const[t,e,s,i]=n;return ps(t,e,s,i)}else if(typeof n=="string")return Gr(Pc[n]!==void 0),Pc[n];return n},dn=(n,t,e)=>{const s=t-n;return s===0?1:(e-n)/s},nt=(n,t,e)=>n+(t-n)*e;function pr(n,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+(t-n)*6*e:e<1/2?t:e<2/3?n+(t-n)*(2/3-e)*6:n}function H_({hue:n,saturation:t,lightness:e,alpha:s}){n/=360,t/=100,e/=100;let i=0,r=0,a=0;if(!t)i=r=a=e;else{const l=e<.5?e*(1+t):e+t-e*t,c=2*e-l;i=pr(c,l,n+1/3),r=pr(c,l,n),a=pr(c,l,n-1/3)}return{red:Math.round(i*255),green:Math.round(r*255),blue:Math.round(a*255),alpha:s}}function ai(n,t){return e=>e>0?t:n}const gr=(n,t,e)=>{const s=n*n,i=e*(t*t-s)+s;return i<0?0:Math.sqrt(i)},G_=[Xr,Ve,We],K_=n=>G_.find(t=>t.test(n));function Cc(n){const t=K_(n);if(!t)return!1;let e=t.parse(n);return t===We&&(e=H_(e)),e}const Rc=(n,t)=>{const e=Cc(n),s=Cc(t);if(!e||!s)return ai(n,t);const i={...e};return r=>(i.red=gr(e.red,s.red,r),i.green=gr(e.green,s.green,r),i.blue=gr(e.blue,s.blue,r),i.alpha=nt(e.alpha,s.alpha,r),Ve.transform(i))},to=new Set(["none","hidden"]);function W_(n,t){return to.has(n)?e=>e<=0?n:t:e=>e>=1?t:n}function Q_(n,t){return e=>nt(n,t,e)}function ra(n){return typeof n=="number"?Q_:typeof n=="string"?Ho(n)?ai:Pt.test(n)?Rc:J_:Array.isArray(n)?Fd:typeof n=="object"?Pt.test(n)?Rc:Y_:ai}function Fd(n,t){const e=[...n],s=e.length,i=n.map((r,a)=>ra(r)(r,t[a]));return r=>{for(let a=0;a<s;a++)e[a]=i[a](r);return e}}function Y_(n,t){const e={...n,...t},s={};for(const i in e)n[i]!==void 0&&t[i]!==void 0&&(s[i]=ra(n[i])(n[i],t[i]));return i=>{for(const r in s)e[r]=s[r](i);return e}}function X_(n,t){var e;const s=[],i={color:0,var:0,number:0};for(let r=0;r<t.values.length;r++){const a=t.types[r],l=n.indexes[a][i[a]],c=(e=n.values[l])!==null&&e!==void 0?e:0;s[r]=c,i[a]++}return s}const J_=(n,t)=>{const e=_e.createTransformer(t),s=as(n),i=as(t);return s.indexes.var.length===i.indexes.var.length&&s.indexes.color.length===i.indexes.color.length&&s.indexes.number.length>=i.indexes.number.length?to.has(n)&&!i.values.length||to.has(t)&&!s.values.length?W_(n,t):te(Fd(X_(s,i),i.values),e):ai(n,t)};function jd(n,t,e){return typeof n=="number"&&typeof t=="number"&&typeof e=="number"?nt(n,t,e):ra(n)(n,t)}function Z_(n,t,e){const s=[],i=e||jd,r=n.length-1;for(let a=0;a<r;a++){let l=i(n[a],n[a+1]);if(t){const c=Array.isArray(t)?t[a]||yt:t;l=te(c,l)}s.push(l)}return s}function oa(n,t,{clamp:e=!0,ease:s,mixer:i}={}){const r=n.length;if(Gr(r===t.length),r===1)return()=>t[0];if(r===2&&n[0]===n[1])return()=>t[1];n[0]>n[r-1]&&(n=[...n].reverse(),t=[...t].reverse());const a=Z_(t,s,i),l=a.length,c=h=>{let f=0;if(l>1)for(;f<n.length-2&&!(h<n[f+1]);f++);const m=dn(n[f],n[f+1],h);return a[f](m)};return e?h=>c(ve(n[0],n[r-1],h)):c}function tT(n,t){const e=n[n.length-1];for(let s=1;s<=t;s++){const i=dn(0,t,s);n.push(nt(e,1,i))}}function Bd(n){const t=[0];return tT(t,n.length-1),t}function eT(n,t){return n.map(e=>e*t)}function nT(n,t){return n.map(()=>t||Md).splice(0,n.length-1)}function li({duration:n=300,keyframes:t,times:e,ease:s="easeInOut"}){const i=U_(s)?s.map(Sc):Sc(s),r={done:!1,value:t[0]},a=eT(e&&e.length===t.length?e:Bd(t),n),l=oa(a,t,{ease:Array.isArray(i)?i:nT(t,i)});return{calculatedDuration:n,next:c=>(r.value=l(c),r.done=c>=n,r)}}const bc=2e4;function sT(n){let t=0;const e=50;let s=n.next(t);for(;!s.done&&t<bc;)t+=e,s=n.next(t);return t>=bc?1/0:t}const iT=n=>{const t=({timestamp:e})=>n(e);return{start:()=>X.update(t,!0),stop:()=>Bt(t),now:()=>dt.isProcessing?dt.timestamp:me.now()}},rT={decay:Ic,inertia:Ic,tween:li,keyframes:li,spring:Vd},oT=n=>n/100;class aa extends bd{constructor({KeyframeResolver:t=Zo,...e}){super(e),this.holdTime=null,this.startTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:s,motionValue:i,keyframes:r}=this.options,a=(l,c)=>this.onKeyframesResolved(l,c);s&&i&&i.owner?this.resolver=i.owner.resolveKeyframes(r,a,s,i):this.resolver=new t(r,a,s,i),this.resolver.scheduleResolve()}initPlayback(t){const{type:e="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:r,velocity:a=0}=this.options,l=rT[e]||li;let c,h;l!==li&&typeof t[0]!="number"&&(c=te(oT,jd(t[0],t[1])),t=[0,100]);const f=l({...this.options,keyframes:t});r==="mirror"&&(h=l({...this.options,keyframes:[...t].reverse(),velocity:-a})),f.calculatedDuration===null&&(f.calculatedDuration=sT(f));const{calculatedDuration:m}=f,y=m+i,E=y*(s+1)-i;return{generator:f,mirroredGenerator:h,mapPercentToKeyframes:c,calculatedDuration:m,resolvedDuration:y,totalDuration:E}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,e=!1){const{resolved:s}=this;if(!s){const{keyframes:g}=this.options;return{done:!0,value:g[g.length-1]}}const{finalKeyframe:i,generator:r,mirroredGenerator:a,mapPercentToKeyframes:l,keyframes:c,calculatedDuration:h,totalDuration:f,resolvedDuration:m}=s;if(this.startTime===null)return r.next(0);const{delay:y,repeat:E,repeatType:R,repeatDelay:x,onUpdate:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-f/this.speed,this.startTime)),e?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const D=this.currentTime-y*(this.speed>=0?1:-1),k=this.speed>=0?D<0:D>f;this.currentTime=Math.max(D,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=f);let M=this.currentTime,F=r;if(E){const g=Math.min(this.currentTime,f)/m;let v=Math.floor(g),T=g%1;!T&&g>=1&&(T=1),T===1&&v--,v=Math.min(v,E+1),!!(v%2)&&(R==="reverse"?(T=1-T,x&&(T-=x/m)):R==="mirror"&&(F=a)),M=ve(0,1,T)*m}const q=k?{done:!1,value:c[0]}:F.next(M);l&&(q.value=l(q.value));let{done:G}=q;!k&&h!==null&&(G=this.speed>=0?this.currentTime>=f:this.currentTime<=0);const A=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&G);return A&&i!==void 0&&(q.value=bi(c,this.options,i)),b&&b(q.value),A&&this.finish(),q}get duration(){const{resolved:t}=this;return t?ne(t.calculatedDuration):0}get time(){return ne(this.currentTime)}set time(t){t=ee(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const e=this.playbackSpeed!==t;this.playbackSpeed=t,e&&(this.time=ne(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=iT,onPlay:e}=this.options;this.driver||(this.driver=t(i=>this.tick(i))),e&&e();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:(!this.startTime||this.state==="finished")&&(this.startTime=s),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const Ud=n=>Array.isArray(n)&&typeof n[0]=="number";function $d(n){return!!(!n||typeof n=="string"&&n in la||Ud(n)||Array.isArray(n)&&n.every($d))}const Un=([n,t,e,s])=>`cubic-bezier(${n}, ${t}, ${e}, ${s})`,la={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Un([0,.65,.55,1]),circOut:Un([.55,0,1,.45]),backIn:Un([.31,.01,.66,-.59]),backOut:Un([.33,1.53,.69,.99])};function aT(n){return zd(n)||la.easeOut}function zd(n){if(n)return Ud(n)?Un(n):Array.isArray(n)?n.map(aT):la[n]}function lT(n,t,e,{delay:s=0,duration:i=300,repeat:r=0,repeatType:a="loop",ease:l,times:c}={}){const h={[t]:e};c&&(h.offset=c);const f=zd(l);return Array.isArray(f)&&(h.easing=f),n.animate(h,{delay:s,duration:i,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:r+1,direction:a==="reverse"?"alternate":"normal"})}const cT=Rd(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),ci=10,uT=2e4;function hT(n){return n.type==="spring"||!$d(n.ease)}function dT(n,t){const e=new aa({...t,keyframes:n,repeat:0,delay:0,isGenerator:!0});let s={done:!1,value:n[0]};const i=[];let r=0;for(;!s.done&&r<uT;)s=e.sample(r),i.push(s.value),r+=ci;return{times:void 0,keyframes:i,duration:r-ci,ease:"linear"}}class xc extends bd{constructor(t){super(t);const{name:e,motionValue:s,keyframes:i}=this.options;this.resolver=new Cd(i,(r,a)=>this.onKeyframesResolved(r,a),e,s),this.resolver.scheduleResolve()}initPlayback(t,e){var s;let{duration:i=300,times:r,ease:a,type:l,motionValue:c,name:h}=this.options;if(!(!((s=c.owner)===null||s===void 0)&&s.current))return!1;if(hT(this.options)){const{onComplete:m,onUpdate:y,motionValue:E,...R}=this.options,x=dT(t,R);t=x.keyframes,t.length===1&&(t[1]=t[0]),i=x.duration,r=x.times,a=x.ease,l="keyframes"}const f=lT(c.owner.current,h,t,{...this.options,duration:i,times:r,ease:a});return f.startTime=me.now(),this.pendingTimeline?(f.timeline=this.pendingTimeline,this.pendingTimeline=void 0):f.onfinish=()=>{const{onComplete:m}=this.options;c.set(bi(t,this.options,e)),m&&m(),this.cancel(),this.resolveFinishedPromise()},{animation:f,duration:i,times:r,type:l,ease:a,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:e}=t;return ne(e)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:e}=t;return ne(e.currentTime||0)}set time(t){const{resolved:e}=this;if(!e)return;const{animation:s}=e;s.currentTime=ee(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:e}=t;return e.playbackRate}set speed(t){const{resolved:e}=this;if(!e)return;const{animation:s}=e;s.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:e}=t;return e.playState}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:e}=this;if(!e)return yt;const{animation:s}=e;s.timeline=t,s.onfinish=null}return yt}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:e}=t;e.playState==="finished"&&this.updateFinishedPromise(),e.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:e}=t;e.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:e,keyframes:s,duration:i,type:r,ease:a,times:l}=t;if(e.playState==="idle"||e.playState==="finished")return;if(this.time){const{motionValue:h,onUpdate:f,onComplete:m,...y}=this.options,E=new aa({...y,keyframes:s,duration:i,type:r,ease:a,times:l,isGenerator:!0}),R=ee(this.time);h.setWithVelocity(E.sample(R-ci).value,E.sample(R).value,ci)}const{onStop:c}=this.options;c&&c(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:e,name:s,repeatDelay:i,repeatType:r,damping:a,type:l}=t;return cT()&&s&&rd.has(s)&&e&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate&&!i&&r!=="mirror"&&a!==0&&l!=="inertia"}}function fT(n,t){let e;const s=()=>{const{currentTime:i}=t,a=(i===null?0:i.value)/100;e!==a&&n(a),e=a};return X.update(s,!0),()=>Bt(s)}const mT=Rd(()=>window.ScrollTimeline!==void 0);class pT{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}then(t,e){return Promise.all(this.animations).then(t).catch(e)}getAll(t){return this.animations[0][t]}setAll(t,e){for(let s=0;s<this.animations.length;s++)this.animations[s][t]=e}attachTimeline(t){const e=this.animations.map(s=>{if(mT()&&s.attachTimeline)s.attachTimeline(t);else return s.pause(),fT(i=>{s.time=s.duration*i},t)});return()=>{e.forEach((s,i)=>{s&&s(),this.animations[i].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get duration(){let t=0;for(let e=0;e<this.animations.length;e++)t=Math.max(t,this.animations[e].duration);return t}runAll(t){this.animations.forEach(e=>e[t]())}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}const ca=(n,t,e,s={},i,r,a)=>l=>{const c=Jo(s,n)||{},h=c.delay||s.delay||0;let{elapsed:f=0}=s;f=f-ee(h);let m={keyframes:Array.isArray(e)?e:[null,e],ease:"easeOut",velocity:t.getVelocity(),...c,delay:-f,onUpdate:E=>{t.set(E),c.onUpdate&&c.onUpdate(E)},onComplete:()=>{l(),c.onComplete&&c.onComplete(),a&&a()},onStop:a,name:n,motionValue:t,element:r?void 0:i};X0(c)||(m={...m,...Y0(n,m)}),m.duration&&(m.duration=ee(m.duration)),m.repeatDelay&&(m.repeatDelay=ee(m.repeatDelay)),m.from!==void 0&&(m.keyframes[0]=m.from);let y=!1;if((m.type===!1||m.duration===0&&!m.repeatDelay)&&(m.duration=0,m.delay===0&&(y=!0)),y&&!r&&t.get()!==void 0){const E=bi(m.keyframes,c);if(E!==void 0)return X.update(()=>{m.onUpdate(E),m.onComplete()}),new pT([])}return!r&&xc.supports(m)?new xc(m):new aa(m)};class ua{constructor(){this.subscriptions=[]}add(t){return Pi(this.subscriptions,t),()=>Si(this.subscriptions,t)}notify(t,e,s){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,e,s);else for(let r=0;r<i;r++){const a=this.subscriptions[r];a&&a(t,e,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Vc=30,gT=n=>!isNaN(parseFloat(n)),Qn={current:void 0};class qd{constructor(t,e={}){this.version="11.3.23",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(s,i=!0)=>{const r=me.now();this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=e.owner}setCurrent(t){this.current=t,this.updatedAt=me.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=gT(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new ua);const s=this.events[t].add(e);return t==="change"?()=>{s(),X.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t,e=!0){!e||!this.passiveEffect?this.updateAndNotify(t,e):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,e,s){this.set(e),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-s}jump(t,e=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,e&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return Qn.current&&Qn.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const t=me.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>Vc)return 0;const e=Math.min(this.updatedAt-this.prevUpdatedAt,Vc);return na(parseFloat(this.current)-parseFloat(this.prevFrameValue),e)}start(t){return this.stop(),new Promise(e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function zt(n,t){return new qd(n,t)}function yT(n,t,e){n.hasValue(t)?n.getValue(t).set(e):n.addValue(t,zt(e))}function vT(n,t){const e=Ri(n,t);let{transitionEnd:s={},transition:i={},...r}=e||{};r={...r,...s};for(const a in r){const l=S0(r[a]);yT(n,a,l)}}function Hd(n){return n.getProps()[$h]}class _T extends qd{constructor(){super(...arguments),this.output=[],this.counts=new Map}add(t){const e=od(t);if(!e)return;const s=this.counts.get(e)||0;this.counts.set(e,s+1),s===0&&(this.output.push(e),this.update());let i=!1;return()=>{if(i)return;i=!0;const r=this.counts.get(e)-1;this.counts.set(e,r),r===0&&(Si(this.output,e),this.update())}}update(){this.set(this.output.length?this.output.join(", "):"auto")}}function TT(n){return!!(Rt(n)&&n.add)}function eo(n,t){var e;if(!n.applyWillChange)return;let s=n.getValue("willChange");if(!s&&!(!((e=n.props.style)===null||e===void 0)&&e.willChange)&&(s=new _T("auto"),n.addValue("willChange",s)),TT(s))return s.add(t)}function ET({protectedKeys:n,needsAnimating:t},e){const s=n.hasOwnProperty(e)&&t[e]!==!0;return t[e]=!1,s}function Gd(n,t,{delay:e=0,transitionOverride:s,type:i}={}){var r;let{transition:a=n.getDefaultTransition(),transitionEnd:l,...c}=t;s&&(a=s);const h=[],f=i&&n.animationState&&n.animationState.getState()[i];for(const m in c){const y=n.getValue(m,(r=n.latestValues[m])!==null&&r!==void 0?r:null),E=c[m];if(E===void 0||f&&ET(f,m))continue;const R={delay:e,elapsed:0,...Jo(a||{},m)};let x=!1;if(window.MotionHandoffAnimation){const D=Hd(n);if(D){const k=window.MotionHandoffAnimation(D,m,X);k!==null&&(R.elapsed=k,x=!0)}}y.start(ca(m,y,E,n.shouldReduceMotion&&Te.has(m)?{type:!1}:R,n,x,eo(n,m)));const b=y.animation;b&&h.push(b)}return l&&Promise.all(h).then(()=>{X.update(()=>{l&&vT(n,l)})}),h}function no(n,t,e={}){var s;const i=Ri(n,t,e.type==="exit"?(s=n.presenceContext)===null||s===void 0?void 0:s.custom:void 0);let{transition:r=n.getDefaultTransition()||{}}=i||{};e.transitionOverride&&(r=e.transitionOverride);const a=i?()=>Promise.all(Gd(n,i,e)):()=>Promise.resolve(),l=n.variantChildren&&n.variantChildren.size?(h=0)=>{const{delayChildren:f=0,staggerChildren:m,staggerDirection:y}=r;return wT(n,t,f+h,m,y,e)}:()=>Promise.resolve(),{when:c}=r;if(c){const[h,f]=c==="beforeChildren"?[a,l]:[l,a];return h().then(()=>f())}else return Promise.all([a(),l(e.delay)])}function wT(n,t,e=0,s=0,i=1,r){const a=[],l=(n.variantChildren.size-1)*s,c=i===1?(h=0)=>h*s:(h=0)=>l-h*s;return Array.from(n.variantChildren).sort(AT).forEach((h,f)=>{h.notify("AnimationStart",t),a.push(no(h,t,{...r,delay:e+c(f)}).then(()=>h.notify("AnimationComplete",t)))}),Promise.all(a)}function AT(n,t){return n.sortNodePosition(t)}function IT(n,t,e={}){n.notify("AnimationStart",t);let s;if(Array.isArray(t)){const i=t.map(r=>no(n,r,e));s=Promise.all(i)}else if(typeof t=="string")s=no(n,t,e);else{const i=typeof t=="function"?Ri(n,t,e.custom):t;s=Promise.all(Gd(n,i,e))}return s.then(()=>{n.notify("AnimationComplete",t)})}const PT=[...Bo].reverse(),ST=Bo.length;function CT(n){return t=>Promise.all(t.map(({animation:e,options:s})=>IT(n,e,s)))}function RT(n){let t=CT(n),e=Dc(),s=!0;const i=c=>(h,f)=>{var m;const y=Ri(n,f,c==="exit"?(m=n.presenceContext)===null||m===void 0?void 0:m.custom:void 0);if(y){const{transition:E,transitionEnd:R,...x}=y;h={...h,...x,...R}}return h};function r(c){t=c(n)}function a(c){const h=n.getProps(),f=n.getVariantContext(!0)||{},m=[],y=new Set;let E={},R=1/0;for(let b=0;b<ST;b++){const D=PT[b],k=e[D],M=h[D]!==void 0?h[D]:f[D],F=rs(M),q=D===c?k.isActive:null;q===!1&&(R=b);let G=M===f[D]&&M!==h[D]&&F;if(G&&s&&n.manuallyAnimateOnMount&&(G=!1),k.protectedKeys={...E},!k.isActive&&q===null||!M&&!k.prevProp||os(M)||typeof M=="boolean")continue;let g=bT(k.prevProp,M)||D===c&&k.isActive&&!G&&F||b>R&&F,v=!1;const T=Array.isArray(M)?M:[M];let w=T.reduce(i(D),{});q===!1&&(w={});const{prevResolvedValues:P={}}=k,_={...P,...w},Nt=rt=>{g=!0,y.has(rt)&&(v=!0,y.delete(rt)),k.needsAnimating[rt]=!0;const Ft=n.getValue(rt);Ft&&(Ft.liveStyle=!1)};for(const rt in _){const Ft=w[rt],Wt=P[rt];if(E.hasOwnProperty(rt))continue;let Qt=!1;Kr(Ft)&&Kr(Wt)?Qt=!fd(Ft,Wt):Qt=Ft!==Wt,Qt?Ft!=null?Nt(rt):y.add(rt):Ft!==void 0&&y.has(rt)?Nt(rt):k.protectedKeys[rt]=!0}k.prevProp=M,k.prevResolvedValues=w,k.isActive&&(E={...E,...w}),s&&n.blockInitialAnimation&&(g=!1),g&&(!G||v)&&m.push(...T.map(rt=>({animation:rt,options:{type:D}})))}if(y.size){const b={};y.forEach(D=>{const k=n.getBaseTarget(D),M=n.getValue(D);M&&(M.liveStyle=!0),b[D]=k??null}),m.push({animation:b})}let x=!!m.length;return s&&(h.initial===!1||h.initial===h.animate)&&!n.manuallyAnimateOnMount&&(x=!1),s=!1,x?t(m):Promise.resolve()}function l(c,h){var f;if(e[c].isActive===h)return Promise.resolve();(f=n.variantChildren)===null||f===void 0||f.forEach(y=>{var E;return(E=y.animationState)===null||E===void 0?void 0:E.setActive(c,h)}),e[c].isActive=h;const m=a(c);for(const y in e)e[y].protectedKeys={};return m}return{animateChanges:a,setActive:l,setAnimateFunction:r,getState:()=>e,reset:()=>{e=Dc(),s=!0}}}function bT(n,t){return typeof t=="string"?t!==n:Array.isArray(t)?!fd(t,n):!1}function Se(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Dc(){return{animate:Se(!0),whileInView:Se(),whileHover:Se(),whileTap:Se(),whileDrag:Se(),whileFocus:Se(),exit:Se()}}class xT extends Ee{constructor(t){super(t),t.animationState||(t.animationState=RT(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();os(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let VT=0;class DT extends Ee{constructor(){super(...arguments),this.id=VT++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:e}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===s)return;const i=this.node.animationState.setActive("exit",!t);e&&!t&&i.then(()=>e(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const MT={animation:{Feature:xT},exit:{Feature:DT}},Mc=(n,t)=>Math.abs(n-t);function kT(n,t){const e=Mc(n.x,t.x),s=Mc(n.y,t.y);return Math.sqrt(e**2+s**2)}class Kd{constructor(t,e,{transformPagePoint:s,contextWindow:i,dragSnapToOrigin:r=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=vr(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,E=kT(m.offset,{x:0,y:0})>=3;if(!y&&!E)return;const{point:R}=m,{timestamp:x}=dt;this.history.push({...R,timestamp:x});const{onStart:b,onMove:D}=this.handlers;y||(b&&b(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),D&&D(this.lastMoveEvent,m)},this.handlePointerMove=(m,y)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=yr(y,this.transformPagePoint),X.update(this.updatePoint,!0)},this.handlePointerUp=(m,y)=>{this.end();const{onEnd:E,onSessionEnd:R,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=vr(m.type==="pointercancel"?this.lastMoveEventInfo:yr(y,this.transformPagePoint),this.history);this.startEvent&&E&&E(m,b),R&&R(m,b)},!ld(t))return;this.dragSnapToOrigin=r,this.handlers=e,this.transformPagePoint=s,this.contextWindow=i||window;const a=Ci(t),l=yr(a,this.transformPagePoint),{point:c}=l,{timestamp:h}=dt;this.history=[{...c,timestamp:h}];const{onSessionStart:f}=e;f&&f(t,vr(l,this.history)),this.removeListeners=te(Zt(this.contextWindow,"pointermove",this.handlePointerMove),Zt(this.contextWindow,"pointerup",this.handlePointerUp),Zt(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Bt(this.updatePoint)}}function yr(n,t){return t?{point:t(n.point)}:n}function kc(n,t){return{x:n.x-t.x,y:n.y-t.y}}function vr({point:n},t){return{point:n,delta:kc(n,Wd(t)),offset:kc(n,NT(t)),velocity:LT(t,.1)}}function NT(n){return n[0]}function Wd(n){return n[n.length-1]}function LT(n,t){if(n.length<2)return{x:0,y:0};let e=n.length-1,s=null;const i=Wd(n);for(;e>=0&&(s=n[e],!(i.timestamp-s.timestamp>ee(t)));)e--;if(!s)return{x:0,y:0};const r=ne(i.timestamp-s.timestamp);if(r===0)return{x:0,y:0};const a={x:(i.x-s.x)/r,y:(i.y-s.y)/r};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}const Qd=1e-4,OT=1-Qd,FT=1+Qd,Yd=.01,jT=0-Yd,BT=0+Yd;function kt(n){return n.max-n.min}function UT(n,t,e){return Math.abs(n-t)<=e}function Nc(n,t,e,s=.5){n.origin=s,n.originPoint=nt(t.min,t.max,n.origin),n.scale=kt(e)/kt(t),n.translate=nt(e.min,e.max,n.origin)-n.originPoint,(n.scale>=OT&&n.scale<=FT||isNaN(n.scale))&&(n.scale=1),(n.translate>=jT&&n.translate<=BT||isNaN(n.translate))&&(n.translate=0)}function Yn(n,t,e,s){Nc(n.x,t.x,e.x,s?s.originX:void 0),Nc(n.y,t.y,e.y,s?s.originY:void 0)}function Lc(n,t,e){n.min=e.min+t.min,n.max=n.min+kt(t)}function $T(n,t,e){Lc(n.x,t.x,e.x),Lc(n.y,t.y,e.y)}function Oc(n,t,e){n.min=t.min-e.min,n.max=n.min+kt(t)}function Xn(n,t,e){Oc(n.x,t.x,e.x),Oc(n.y,t.y,e.y)}function zT(n,{min:t,max:e},s){return t!==void 0&&n<t?n=s?nt(t,n,s.min):Math.max(n,t):e!==void 0&&n>e&&(n=s?nt(e,n,s.max):Math.min(n,e)),n}function Fc(n,t,e){return{min:t!==void 0?n.min+t:void 0,max:e!==void 0?n.max+e-(n.max-n.min):void 0}}function qT(n,{top:t,left:e,bottom:s,right:i}){return{x:Fc(n.x,e,i),y:Fc(n.y,t,s)}}function jc(n,t){let e=t.min-n.min,s=t.max-n.max;return t.max-t.min<n.max-n.min&&([e,s]=[s,e]),{min:e,max:s}}function HT(n,t){return{x:jc(n.x,t.x),y:jc(n.y,t.y)}}function GT(n,t){let e=.5;const s=kt(n),i=kt(t);return i>s?e=dn(t.min,t.max-s,n.min):s>i&&(e=dn(n.min,n.max-i,t.min)),ve(0,1,e)}function KT(n,t){const e={};return t.min!==void 0&&(e.min=t.min-n.min),t.max!==void 0&&(e.max=t.max-n.min),e}const so=.35;function WT(n=so){return n===!1?n=0:n===!0&&(n=so),{x:Bc(n,"left","right"),y:Bc(n,"top","bottom")}}function Bc(n,t,e){return{min:Uc(n,t),max:Uc(n,e)}}function Uc(n,t){return typeof n=="number"?n:n[t]||0}const $c=()=>({translate:0,scale:1,origin:0,originPoint:0}),Qe=()=>({x:$c(),y:$c()}),zc=()=>({min:0,max:0}),ot=()=>({x:zc(),y:zc()});function Ot(n){return[n("x"),n("y")]}function Xd({top:n,left:t,right:e,bottom:s}){return{x:{min:t,max:e},y:{min:n,max:s}}}function QT({x:n,y:t}){return{top:t.min,right:n.max,bottom:t.max,left:n.min}}function YT(n,t){if(!t)return n;const e=t({x:n.left,y:n.top}),s=t({x:n.right,y:n.bottom});return{top:e.y,left:e.x,bottom:s.y,right:s.x}}function _r(n){return n===void 0||n===1}function io({scale:n,scaleX:t,scaleY:e}){return!_r(n)||!_r(t)||!_r(e)}function Re(n){return io(n)||Jd(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function Jd(n){return qc(n.x)||qc(n.y)}function qc(n){return n&&n!=="0%"}function ui(n,t,e){const s=n-e,i=t*s;return e+i}function Hc(n,t,e,s,i){return i!==void 0&&(n=ui(n,i,s)),ui(n,e,s)+t}function ro(n,t=0,e=1,s,i){n.min=Hc(n.min,t,e,s,i),n.max=Hc(n.max,t,e,s,i)}function Zd(n,{x:t,y:e}){ro(n.x,t.translate,t.scale,t.originPoint),ro(n.y,e.translate,e.scale,e.originPoint)}const Gc=.999999999999,Kc=1.0000000000001;function XT(n,t,e,s=!1){const i=e.length;if(!i)return;t.x=t.y=1;let r,a;for(let l=0;l<i;l++){r=e[l],a=r.projectionDelta;const{visualElement:c}=r.options;c&&c.props.style&&c.props.style.display==="contents"||(s&&r.options.layoutScroll&&r.scroll&&r!==r.root&&Xe(n,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,Zd(n,a)),s&&Re(r.latestValues)&&Xe(n,r.latestValues))}t.x<Kc&&t.x>Gc&&(t.x=1),t.y<Kc&&t.y>Gc&&(t.y=1)}function Ye(n,t){n.min=n.min+t,n.max=n.max+t}function Wc(n,t,e,s,i=.5){const r=nt(n.min,n.max,i);ro(n,t,e,r,s)}function Xe(n,t){Wc(n.x,t.x,t.scaleX,t.scale,t.originX),Wc(n.y,t.y,t.scaleY,t.scale,t.originY)}function tf(n,t){return Xd(YT(n.getBoundingClientRect(),t))}function JT(n,t,e){const s=tf(n,e),{scroll:i}=t;return i&&(Ye(s.x,i.offset.x),Ye(s.y,i.offset.y)),s}const ef=({current:n})=>n?n.ownerDocument.defaultView:null,ZT=new WeakMap;class tE{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ot(),this.visualElement=t}start(t,{snapToCursor:e=!1}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const i=f=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),e&&this.snapToCursor(Ci(f,"page").point)},r=(f,m)=>{var y;const{drag:E,dragPropagation:R,onDragStart:x}=this.getProps();if(E&&!R&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=ud(E),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ot(D=>{let k=this.getAxisMotionValue(D).get()||0;if(Ht.test(k)){const{projection:M}=this.visualElement;if(M&&M.layout){const F=M.layout.layoutBox[D];F&&(k=kt(F)*(parseFloat(k)/100))}}this.originPoint[D]=k}),x&&X.postRender(()=>x(f,m)),(y=this.removeWillChange)===null||y===void 0||y.call(this),this.removeWillChange=eo(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},a=(f,m)=>{const{dragPropagation:y,dragDirectionLock:E,onDirectionLock:R,onDrag:x}=this.getProps();if(!y&&!this.openGlobalLock)return;const{offset:b}=m;if(E&&this.currentDirection===null){this.currentDirection=eE(b),this.currentDirection!==null&&R&&R(this.currentDirection);return}this.updateAxis("x",m.point,b),this.updateAxis("y",m.point,b),this.visualElement.render(),x&&x(f,m)},l=(f,m)=>this.stop(f,m),c=()=>Ot(f=>{var m;return this.getAnimationState(f)==="paused"&&((m=this.getAxisMotionValue(f).animation)===null||m===void 0?void 0:m.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new Kd(t,{onSessionStart:i,onStart:r,onMove:a,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,contextWindow:ef(this.visualElement)})}stop(t,e){var s;(s=this.removeWillChange)===null||s===void 0||s.call(this);const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=e;this.startAnimation(r);const{onDragEnd:a}=this.getProps();a&&X.postRender(()=>a(t,e))}cancel(){this.isDragging=!1;const{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),e&&e.setActive("whileDrag",!1)}updateAxis(t,e,s){const{drag:i}=this.getProps();if(!s||!Bs(t,i,this.currentDirection))return;const r=this.getAxisMotionValue(t);let a=this.originPoint[t]+s[t];this.constraints&&this.constraints[t]&&(a=zT(a,this.constraints[t],this.elastic[t])),r.set(a)}resolveConstraints(){var t;const{dragConstraints:e,dragElastic:s}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,r=this.constraints;e&&Ke(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=qT(i.layoutBox,e):this.constraints=!1,this.elastic=WT(s),r!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Ot(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=KT(i.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!Ke(t))return!1;const s=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const r=JT(s,i.root,this.visualElement.getTransformPagePoint());let a=HT(i.layout.layoutBox,r);if(e){const l=e(QT(a));this.hasMutatedConstraints=!!l,l&&(a=Xd(l))}return a}startAnimation(t){const{drag:e,dragMomentum:s,dragElastic:i,dragTransition:r,dragSnapToOrigin:a,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},h=Ot(f=>{if(!Bs(f,e,this.currentDirection))return;let m=c&&c[f]||{};a&&(m={min:0,max:0});const y=i?200:1e6,E=i?40:1e7,R={type:"inertia",velocity:s?t[f]:0,bounceStiffness:y,bounceDamping:E,timeConstant:750,restDelta:1,restSpeed:10,...r,...m};return this.startAxisValueAnimation(f,R)});return Promise.all(h).then(l)}startAxisValueAnimation(t,e){const s=this.getAxisMotionValue(t);return s.start(ca(t,s,0,e,this.visualElement,!1,eo(this.visualElement,t)))}stopAnimation(){Ot(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Ot(t=>{var e;return(e=this.getAxisMotionValue(t).animation)===null||e===void 0?void 0:e.pause()})}getAnimationState(t){var e;return(e=this.getAxisMotionValue(t).animation)===null||e===void 0?void 0:e.state}getAxisMotionValue(t){const e=`_drag${t.toUpperCase()}`,s=this.visualElement.getProps(),i=s[e];return i||this.visualElement.getValue(t,(s.initial?s.initial[t]:void 0)||0)}snapToCursor(t){Ot(e=>{const{drag:s}=this.getProps();if(!Bs(e,s,this.currentDirection))return;const{projection:i}=this.visualElement,r=this.getAxisMotionValue(e);if(i&&i.layout){const{min:a,max:l}=i.layout.layoutBox[e];r.set(t[e]-nt(a,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:e}=this.getProps(),{projection:s}=this.visualElement;if(!Ke(e)||!s||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Ot(a=>{const l=this.getAxisMotionValue(a);if(l&&this.constraints!==!1){const c=l.get();i[a]=GT({min:c,max:c},this.constraints[a])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),Ot(a=>{if(!Bs(a,t,null))return;const l=this.getAxisMotionValue(a),{min:c,max:h}=this.constraints[a];l.set(nt(c,h,i[a]))})}addListeners(){if(!this.visualElement.current)return;ZT.set(this.visualElement,this);const t=this.visualElement.current,e=Zt(t,"pointerdown",c=>{const{drag:h,dragListener:f=!0}=this.getProps();h&&f&&this.start(c)}),s=()=>{const{dragConstraints:c}=this.getProps();Ke(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,r=i.addEventListener("measure",s);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),X.read(s);const a=Jt(window,"resize",()=>this.scalePositionWithinConstraints()),l=i.addEventListener("didUpdate",({delta:c,hasLayoutChanged:h})=>{this.isDragging&&h&&(Ot(f=>{const m=this.getAxisMotionValue(f);m&&(this.originPoint[f]+=c[f].translate,m.set(m.get()+c[f].translate))}),this.visualElement.render())});return()=>{a(),e(),r(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:s=!1,dragPropagation:i=!1,dragConstraints:r=!1,dragElastic:a=so,dragMomentum:l=!0}=t;return{...t,drag:e,dragDirectionLock:s,dragPropagation:i,dragConstraints:r,dragElastic:a,dragMomentum:l}}}function Bs(n,t,e){return(t===!0||t===n)&&(e===null||e===n)}function eE(n,t=10){let e=null;return Math.abs(n.y)>t?e="y":Math.abs(n.x)>t&&(e="x"),e}class nE extends Ee{constructor(t){super(t),this.removeGroupControls=yt,this.removeListeners=yt,this.controls=new tE(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||yt}unmount(){this.removeGroupControls(),this.removeListeners()}}const Qc=n=>(t,e)=>{n&&X.postRender(()=>n(t,e))};class sE extends Ee{constructor(){super(...arguments),this.removePointerDownListener=yt}onPointerDown(t){this.session=new Kd(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:ef(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:e,onPan:s,onPanEnd:i}=this.node.getProps();return{onSessionStart:Qc(t),onStart:Qc(e),onMove:s,onEnd:(r,a)=>{delete this.session,i&&X.postRender(()=>i(r,a))}}}mount(){this.removePointerDownListener=Zt(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function iE(){const n=j.useContext(Lo);if(n===null)return[!0,null];const{isPresent:t,onExitComplete:e,register:s}=n,i=j.useId();j.useEffect(()=>s(i),[]);const r=j.useCallback(()=>e&&e(i),[i,e]);return!t&&e?[!1,r]:[!0]}const Ws={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Yc(n,t){return t.max===t.min?0:n/(t.max-t.min)*100}const Nn={correct:(n,t)=>{if(!t.target)return n;if(typeof n=="string")if(B.test(n))n=parseFloat(n);else return n;const e=Yc(n,t.target.x),s=Yc(n,t.target.y);return`${e}% ${s}%`}},rE={correct:(n,{treeScale:t,projectionDelta:e})=>{const s=n,i=_e.parse(n);if(i.length>5)return s;const r=_e.createTransformer(n),a=typeof i[0]!="number"?1:0,l=e.x.scale*t.x,c=e.y.scale*t.y;i[0+a]/=l,i[1+a]/=c;const h=nt(l,c,.5);return typeof i[2+a]=="number"&&(i[2+a]/=h),typeof i[3+a]=="number"&&(i[3+a]/=h),r(i)}};class oE extends j.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:s,layoutId:i}=this.props,{projection:r}=t;n0(aE),r&&(e.group&&e.group.add(r),s&&s.register&&i&&s.register(r),r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),Ws.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:s,drag:i,isPresent:r}=this.props,a=s.projection;return a&&(a.isPresent=r,i||t.layoutDependency!==e||e===void 0?a.willUpdate():this.safeToRemove(),t.isPresent!==r&&(r?a.promote():a.relegate()||X.postRender(()=>{const l=a.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),jo.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:s}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(i),s&&s.deregister&&s.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function nf(n){const[t,e]=iE(),s=j.useContext(Kh);return C.jsx(oE,{...n,layoutGroup:s,switchLayoutGroup:j.useContext(qh),isPresent:t,safeToRemove:e})}const aE={borderRadius:{...Nn,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Nn,borderTopRightRadius:Nn,borderBottomLeftRadius:Nn,borderBottomRightRadius:Nn,boxShadow:rE},sf=["TopLeft","TopRight","BottomLeft","BottomRight"],lE=sf.length,Xc=n=>typeof n=="string"?parseFloat(n):n,Jc=n=>typeof n=="number"||B.test(n);function cE(n,t,e,s,i,r){i?(n.opacity=nt(0,e.opacity!==void 0?e.opacity:1,uE(s)),n.opacityExit=nt(t.opacity!==void 0?t.opacity:1,0,hE(s))):r&&(n.opacity=nt(t.opacity!==void 0?t.opacity:1,e.opacity!==void 0?e.opacity:1,s));for(let a=0;a<lE;a++){const l=`border${sf[a]}Radius`;let c=Zc(t,l),h=Zc(e,l);if(c===void 0&&h===void 0)continue;c||(c=0),h||(h=0),c===0||h===0||Jc(c)===Jc(h)?(n[l]=Math.max(nt(Xc(c),Xc(h),s),0),(Ht.test(h)||Ht.test(c))&&(n[l]+="%")):n[l]=h}(t.rotate||e.rotate)&&(n.rotate=nt(t.rotate||0,e.rotate||0,s))}function Zc(n,t){return n[t]!==void 0?n[t]:n.borderRadius}const uE=rf(0,.5,Ld),hE=rf(.5,.95,yt);function rf(n,t,e){return s=>s<n?0:s>t?1:e(dn(n,t,s))}function tu(n,t){n.min=t.min,n.max=t.max}function Lt(n,t){tu(n.x,t.x),tu(n.y,t.y)}function eu(n,t){n.translate=t.translate,n.scale=t.scale,n.originPoint=t.originPoint,n.origin=t.origin}function nu(n,t,e,s,i){return n-=t,n=ui(n,1/e,s),i!==void 0&&(n=ui(n,1/i,s)),n}function dE(n,t=0,e=1,s=.5,i,r=n,a=n){if(Ht.test(t)&&(t=parseFloat(t),t=nt(a.min,a.max,t/100)-a.min),typeof t!="number")return;let l=nt(r.min,r.max,s);n===r&&(l-=t),n.min=nu(n.min,t,e,l,i),n.max=nu(n.max,t,e,l,i)}function su(n,t,[e,s,i],r,a){dE(n,t[e],t[s],t[i],t.scale,r,a)}const fE=["x","scaleX","originX"],mE=["y","scaleY","originY"];function iu(n,t,e,s){su(n.x,t,fE,e?e.x:void 0,s?s.x:void 0),su(n.y,t,mE,e?e.y:void 0,s?s.y:void 0)}function ru(n){return n.translate===0&&n.scale===1}function of(n){return ru(n.x)&&ru(n.y)}function ou(n,t){return n.min===t.min&&n.max===t.max}function pE(n,t){return ou(n.x,t.x)&&ou(n.y,t.y)}function au(n,t){return Math.round(n.min)===Math.round(t.min)&&Math.round(n.max)===Math.round(t.max)}function af(n,t){return au(n.x,t.x)&&au(n.y,t.y)}function lu(n){return kt(n.x)/kt(n.y)}function cu(n,t){return n.translate===t.translate&&n.scale===t.scale&&n.originPoint===t.originPoint}class gE{constructor(){this.members=[]}add(t){Pi(this.members,t),t.scheduleRender()}remove(t){if(Si(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(t){const e=this.members.findIndex(i=>t===i);if(e===0)return!1;let s;for(let i=e;i>=0;i--){const r=this.members[i];if(r.isPresent!==!1){s=r;break}}return s?(this.promote(s),!0):!1}promote(t,e){const s=this.lead;if(t!==s&&(this.prevLead=s,this.lead=t,t.show(),s)){s.instance&&s.scheduleRender(),t.scheduleRender(),t.resumeFrom=s,e&&(t.resumeFrom.preserveOpacity=!0),s.snapshot&&(t.snapshot=s.snapshot,t.snapshot.latestValues=s.animationValues||s.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:e,resumingFrom:s}=t;e.onExitComplete&&e.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function yE(n,t,e){let s="";const i=n.x.translate/t.x,r=n.y.translate/t.y,a=(e==null?void 0:e.z)||0;if((i||r||a)&&(s=`translate3d(${i}px, ${r}px, ${a}px) `),(t.x!==1||t.y!==1)&&(s+=`scale(${1/t.x}, ${1/t.y}) `),e){const{transformPerspective:h,rotate:f,rotateX:m,rotateY:y,skewX:E,skewY:R}=e;h&&(s=`perspective(${h}px) ${s}`),f&&(s+=`rotate(${f}deg) `),m&&(s+=`rotateX(${m}deg) `),y&&(s+=`rotateY(${y}deg) `),E&&(s+=`skewX(${E}deg) `),R&&(s+=`skewY(${R}deg) `)}const l=n.x.scale*t.x,c=n.y.scale*t.y;return(l!==1||c!==1)&&(s+=`scale(${l}, ${c})`),s||"none"}const vE=(n,t)=>n.depth-t.depth;class _E{constructor(){this.children=[],this.isDirty=!1}add(t){Pi(this.children,t),this.isDirty=!0}remove(t){Si(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(vE),this.isDirty=!1,this.children.forEach(t)}}function TE(n,t){const e=me.now(),s=({timestamp:i})=>{const r=i-e;r>=t&&(Bt(s),n(r-t))};return X.read(s,!0),()=>Bt(s)}function EE(n){return n instanceof SVGElement&&n.tagName!=="svg"}function wE(n,t,e){const s=Rt(n)?n:zt(n);return s.start(ca("",s,t,e)),s.animation}const be={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},$n=typeof window<"u"&&window.MotionDebug!==void 0,Tr=["","X","Y","Z"],AE={visibility:"hidden"},uu=1e3;let IE=0;function Er(n,t,e,s){const{latestValues:i}=t;i[n]&&(e[n]=i[n],t.setStaticValue(n,0),s&&(s[n]=0))}function lf(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return!1;const{visualElement:t}=n.options;return t?window.MotionHasOptimisedTransformAnimation(Hd(t))?!0:n.parent&&!n.parent.hasCheckedOptimisedAppear?lf(n.parent):!1:!1}function cf({attachResizeListener:n,defaultParent:t,measureScroll:e,checkIsScrollRoot:s,resetTransform:i}){return class{constructor(a={},l=t==null?void 0:t()){this.id=IE++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,$n&&(be.totalNodes=be.resolvedTargetDeltas=be.recalculatedProjection=0),this.nodes.forEach(CE),this.nodes.forEach(DE),this.nodes.forEach(ME),this.nodes.forEach(RE),$n&&window.MotionDebug.record(be)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new _E)}addEventListener(a,l){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new ua),this.eventHandlers.get(a).add(l)}notifyListeners(a,...l){const c=this.eventHandlers.get(a);c&&c.notify(...l)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=EE(a),this.instance=a;const{layoutId:c,layout:h,visualElement:f}=this.options;if(f&&!f.current&&f.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(h||c)&&(this.isLayoutDirty=!0),n){let m;const y=()=>this.root.updateBlockedByResize=!1;n(a,()=>{this.root.updateBlockedByResize=!0,m&&m(),m=TE(y,250),Ws.hasAnimatedSinceResize&&(Ws.hasAnimatedSinceResize=!1,this.nodes.forEach(du))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&f&&(c||h)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:y,hasRelativeTargetChanged:E,layout:R})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||f.getDefaultTransition()||FE,{onLayoutAnimationStart:b,onLayoutAnimationComplete:D}=f.getProps(),k=!this.targetLayout||!af(this.targetLayout,R)||E,M=!y&&E;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||M||y&&(k||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(m,M);const F={...Jo(x,"layout"),onPlay:b,onComplete:D};(f.shouldReduceMotion||this.options.layoutRoot)&&(F.delay=0,F.type=!1),this.startAnimation(F)}else y||du(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=R})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Bt(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(kE),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionHandoffCancelAll&&lf(this)&&window.MotionHandoffCancelAll(),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const m=this.path[f];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(hu);return}this.isUpdating||this.nodes.forEach(xE),this.isUpdating=!1,this.nodes.forEach(VE),this.nodes.forEach(PE),this.nodes.forEach(SE),this.clearAllSnapshots();const l=me.now();dt.delta=ve(0,1e3/60,l-dt.timestamp),dt.timestamp=l,dt.isProcessing=!0,ur.update.process(dt),ur.preRender.process(dt),ur.render.process(dt),dt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,jo.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(bE),this.sharedNodes.forEach(NE)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,X.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){X.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ot(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(l=!1),l){const c=s(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:c,offset:e(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!of(this.projectionDelta),c=this.getTransformTemplate(),h=c?c(this.latestValues,""):void 0,f=h!==this.prevTransformTemplateValue;a&&(l||Re(this.latestValues)||f)&&(i(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return a&&(c=this.removeTransform(c)),jE(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var a;const{visualElement:l}=this.options;if(!l)return ot();const c=l.measureViewportBox();if(!(((a=this.scroll)===null||a===void 0?void 0:a.wasRoot)||this.path.some(BE))){const{scroll:f}=this.root;f&&(Ye(c.x,f.offset.x),Ye(c.y,f.offset.y))}return c}removeElementScroll(a){var l;const c=ot();if(Lt(c,a),!((l=this.scroll)===null||l===void 0)&&l.wasRoot)return c;for(let h=0;h<this.path.length;h++){const f=this.path[h],{scroll:m,options:y}=f;f!==this.root&&m&&y.layoutScroll&&(m.wasRoot&&Lt(c,a),Ye(c.x,m.offset.x),Ye(c.y,m.offset.y))}return c}applyTransform(a,l=!1){const c=ot();Lt(c,a);for(let h=0;h<this.path.length;h++){const f=this.path[h];!l&&f.options.layoutScroll&&f.scroll&&f!==f.root&&Xe(c,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),Re(f.latestValues)&&Xe(c,f.latestValues)}return Re(this.latestValues)&&Xe(c,this.latestValues),c}removeTransform(a){const l=ot();Lt(l,a);for(let c=0;c<this.path.length;c++){const h=this.path[c];if(!h.instance||!Re(h.latestValues))continue;io(h.latestValues)&&h.updateSnapshot();const f=ot(),m=h.measurePageBox();Lt(f,m),iu(l,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,f)}return Re(this.latestValues)&&iu(l,this.latestValues),l}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==dt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==c;if(!(a||h&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:m,layoutId:y}=this.options;if(!(!this.layout||!(m||y))){if(this.resolvedRelativeTargetAt=dt.timestamp,!this.targetDelta&&!this.relativeTarget){const E=this.getClosestProjectingParent();E&&E.layout&&this.animationProgress!==1?(this.relativeParent=E,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ot(),this.relativeTargetOrigin=ot(),Xn(this.relativeTargetOrigin,this.layout.layoutBox,E.layout.layoutBox),Lt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ot(),this.targetWithTransforms=ot()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),$T(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Lt(this.target,this.layout.layoutBox),Zd(this.target,this.targetDelta)):Lt(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const E=this.getClosestProjectingParent();E&&!!E.resumingFrom==!!this.resumingFrom&&!E.options.layoutScroll&&E.target&&this.animationProgress!==1?(this.relativeParent=E,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ot(),this.relativeTargetOrigin=ot(),Xn(this.relativeTargetOrigin,this.target,E.target),Lt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}$n&&be.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||io(this.parent.latestValues)||Jd(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let h=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(h=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===dt.timestamp&&(h=!1),h)return;const{layout:f,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||m))return;Lt(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,E=this.treeScale.y;XT(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=ot());const{target:R}=l;if(!R){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(eu(this.prevProjectionDelta.x,this.projectionDelta.x),eu(this.prevProjectionDelta.y,this.projectionDelta.y)),Yn(this.projectionDelta,this.layoutCorrected,R,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==E||!cu(this.projectionDelta.x,this.prevProjectionDelta.x)||!cu(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",R)),$n&&be.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var l;if((l=this.options.visualElement)===null||l===void 0||l.scheduleRender(),a){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Qe(),this.projectionDelta=Qe(),this.projectionDeltaWithTransform=Qe()}setAnimationOrigin(a,l=!1){const c=this.snapshot,h=c?c.latestValues:{},f={...this.latestValues},m=Qe();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const y=ot(),E=c?c.source:void 0,R=this.layout?this.layout.source:void 0,x=E!==R,b=this.getStack(),D=!b||b.members.length<=1,k=!!(x&&!D&&this.options.crossfade===!0&&!this.path.some(OE));this.animationProgress=0;let M;this.mixTargetDelta=F=>{const q=F/1e3;fu(m.x,a.x,q),fu(m.y,a.y,q),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Xn(y,this.layout.layoutBox,this.relativeParent.layout.layoutBox),LE(this.relativeTarget,this.relativeTargetOrigin,y,q),M&&pE(this.relativeTarget,M)&&(this.isProjectionDirty=!1),M||(M=ot()),Lt(M,this.relativeTarget)),x&&(this.animationValues=f,cE(f,h,this.latestValues,q,k,D)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=q},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Bt(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=X.update(()=>{Ws.hasAnimatedSinceResize=!0,this.currentAnimation=wE(0,uu,{...a,onUpdate:l=>{this.mixTargetDelta(l),a.onUpdate&&a.onUpdate(l)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(uu),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:l,target:c,layout:h,latestValues:f}=a;if(!(!l||!c||!h)){if(this!==a&&this.layout&&h&&uf(this.options.animationType,this.layout.layoutBox,h.layoutBox)){c=this.target||ot();const m=kt(this.layout.layoutBox.x);c.x.min=a.target.x.min,c.x.max=c.x.min+m;const y=kt(this.layout.layoutBox.y);c.y.min=a.target.y.min,c.y.max=c.y.min+y}Lt(l,c),Xe(l,f),Yn(this.projectionDeltaWithTransform,this.layoutCorrected,l,f)}}registerSharedNode(a,l){this.sharedNodes.has(a)||this.sharedNodes.set(a,new gE),this.sharedNodes.get(a).add(l);const h=l.options.initialPromotionConfig;l.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(l):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:l}=this.options;return l?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:l}=this.options;return l?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:l,preserveFollowOpacity:c}={}){const h=this.getStack();h&&h.promote(this,c),a&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let l=!1;const{latestValues:c}=a;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const h={};c.z&&Er("z",a,h,this.animationValues);for(let f=0;f<Tr.length;f++)Er(`rotate${Tr[f]}`,a,h,this.animationValues),Er(`skew${Tr[f]}`,a,h,this.animationValues);a.render();for(const f in h)a.setStaticValue(f,h[f]),this.animationValues&&(this.animationValues[f]=h[f]);a.scheduleRender()}getProjectionStyles(a){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return AE;const h={visibility:""},f=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,h.opacity="",h.pointerEvents=Gs(a==null?void 0:a.pointerEvents)||"",h.transform=f?f(this.latestValues,""):"none",h;const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){const x={};return this.options.layoutId&&(x.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,x.pointerEvents=Gs(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Re(this.latestValues)&&(x.transform=f?f({},""):"none",this.hasProjected=!1),x}const y=m.animationValues||m.latestValues;this.applyTransformsToTarget(),h.transform=yE(this.projectionDeltaWithTransform,this.treeScale,y),f&&(h.transform=f(y,h.transform));const{x:E,y:R}=this.projectionDelta;h.transformOrigin=`${E.origin*100}% ${R.origin*100}% 0`,m.animationValues?h.opacity=m===this?(c=(l=y.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:y.opacityExit:h.opacity=m===this?y.opacity!==void 0?y.opacity:"":y.opacityExit!==void 0?y.opacityExit:0;for(const x in ri){if(y[x]===void 0)continue;const{correct:b,applyTo:D}=ri[x],k=h.transform==="none"?y[x]:b(y[x],m);if(D){const M=D.length;for(let F=0;F<M;F++)h[D[F]]=k}else h[x]=k}return this.options.layoutId&&(h.pointerEvents=m===this?Gs(a==null?void 0:a.pointerEvents)||"":"none"),h}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var l;return(l=a.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(hu),this.root.sharedNodes.clear()}}}function PE(n){n.updateLayout()}function SE(n){var t;const e=((t=n.resumeFrom)===null||t===void 0?void 0:t.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:i}=n.layout,{animationType:r}=n.options,a=e.source!==n.layout.source;r==="size"?Ot(m=>{const y=a?e.measuredBox[m]:e.layoutBox[m],E=kt(y);y.min=s[m].min,y.max=y.min+E}):uf(r,e.layoutBox,s)&&Ot(m=>{const y=a?e.measuredBox[m]:e.layoutBox[m],E=kt(s[m]);y.max=y.min+E,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[m].max=n.relativeTarget[m].min+E)});const l=Qe();Yn(l,s,e.layoutBox);const c=Qe();a?Yn(c,n.applyTransform(i,!0),e.measuredBox):Yn(c,s,e.layoutBox);const h=!of(l);let f=!1;if(!n.resumeFrom){const m=n.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:y,layout:E}=m;if(y&&E){const R=ot();Xn(R,e.layoutBox,y.layoutBox);const x=ot();Xn(x,s,E.layoutBox),af(R,x)||(f=!0),m.options.layoutRoot&&(n.relativeTarget=x,n.relativeTargetOrigin=R,n.relativeParent=m)}}}n.notifyListeners("didUpdate",{layout:s,snapshot:e,delta:c,layoutDelta:l,hasLayoutChanged:h,hasRelativeTargetChanged:f})}else if(n.isLead()){const{onExitComplete:s}=n.options;s&&s()}n.options.transition=void 0}function CE(n){$n&&be.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function RE(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function bE(n){n.clearSnapshot()}function hu(n){n.clearMeasurements()}function xE(n){n.isLayoutDirty=!1}function VE(n){const{visualElement:t}=n.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),n.resetTransform()}function du(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function DE(n){n.resolveTargetDelta()}function ME(n){n.calcProjection()}function kE(n){n.resetSkewAndRotation()}function NE(n){n.removeLeadSnapshot()}function fu(n,t,e){n.translate=nt(t.translate,0,e),n.scale=nt(t.scale,1,e),n.origin=t.origin,n.originPoint=t.originPoint}function mu(n,t,e,s){n.min=nt(t.min,e.min,s),n.max=nt(t.max,e.max,s)}function LE(n,t,e,s){mu(n.x,t.x,e.x,s),mu(n.y,t.y,e.y,s)}function OE(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const FE={duration:.45,ease:[.4,0,.1,1]},pu=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),gu=pu("applewebkit/")&&!pu("chrome/")?Math.round:yt;function yu(n){n.min=gu(n.min),n.max=gu(n.max)}function jE(n){yu(n.x),yu(n.y)}function uf(n,t,e){return n==="position"||n==="preserve-aspect"&&!UT(lu(t),lu(e),.2)}function BE(n){var t;return n!==n.root&&((t=n.scroll)===null||t===void 0?void 0:t.wasRoot)}const UE=cf({attachResizeListener:(n,t)=>Jt(n,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),wr={current:void 0},hf=cf({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!wr.current){const n=new UE({});n.mount(window),n.setOptions({layoutScroll:!0}),wr.current=n}return wr.current},resetTransform:(n,t)=>{n.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),$E={pan:{Feature:sE},drag:{Feature:nE,ProjectionNode:hf,MeasureLayout:nf}},oo={current:null},df={current:!1};function zE(){if(df.current=!0,!!Oo)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),t=()=>oo.current=n.matches;n.addListener(t),t()}else oo.current=!1}function qE(n,t,e){for(const s in t){const i=t[s],r=e[s];if(Rt(i))n.addValue(s,i);else if(Rt(r))n.addValue(s,zt(i,{owner:n}));else if(r!==i)if(n.hasValue(s)){const a=n.getValue(s);a.liveStyle===!0?a.jump(i):a.hasAnimated||a.set(i)}else{const a=n.getStaticValue(s);n.addValue(s,zt(a!==void 0?a:i,{owner:n}))}}for(const s in e)t[s]===void 0&&n.removeValue(s);return t}const vu=new WeakMap,HE=[...vd,Pt,_e],GE=n=>HE.find(yd(n)),_u=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],KE=Uo.length;class WE{scrapeMotionValuesFromProps(t,e,s){return{}}constructor({parent:t,props:e,presenceContext:s,reducedMotionConfig:i,blockInitialAnimation:r,visualState:a},l={}){this.applyWillChange=!1,this.resolveKeyframes=(y,E,R,x)=>new this.KeyframeResolver(y,E,R,x,this),this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Zo,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.isRenderScheduled=!1,this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.isRenderScheduled=!1,this.scheduleRender=()=>{this.isRenderScheduled||(this.isRenderScheduled=!0,X.render(this.render,!1,!0))};const{latestValues:c,renderState:h}=a;this.latestValues=c,this.baseTarget={...c},this.initialValues=e.initial?{...c}:{},this.renderState=h,this.parent=t,this.props=e,this.presenceContext=s,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=l,this.blockInitialAnimation=!!r,this.isControllingVariants=Ai(e),this.isVariantNode=Gh(e),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:f,...m}=this.scrapeMotionValuesFromProps(e,{},this);for(const y in m){const E=m[y];c[y]!==void 0&&Rt(E)&&E.set(c[y],!1)}}mount(t){this.current=t,vu.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,s)=>this.bindToMotionValue(s,e)),df.current||zE(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:oo.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){vu.delete(this.current),this.projection&&this.projection.unmount(),Bt(this.notifyUpdate),Bt(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}bindToMotionValue(t,e){const s=Te.has(t),i=e.on("change",a=>{this.latestValues[t]=a,this.props.onUpdate&&X.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0)}),r=e.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{i(),r(),e.owner&&e.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in un){const e=un[t];if(!e)continue;const{isEnabled:s,Feature:i}=e;if(!this.features[t]&&i&&s(this.props)&&(this.features[t]=new i(this)),this.features[t]){const r=this.features[t];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ot()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let s=0;s<_u.length;s++){const i=_u[s];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const r="on"+i,a=t[r];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=qE(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const s=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(s.initial=this.props.initial),s}const e={};for(let s=0;s<KE;s++){const i=Uo[s],r=this.props[i];(rs(r)||r===!1)&&(e[i]=r)}return e}addVariantChild(t){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){const s=this.values.get(t);e!==s&&(s&&this.removeValue(t),this.bindToMotionValue(t,e),this.values.set(t,e),this.latestValues[t]=e.get())}removeValue(t){this.values.delete(t);const e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let s=this.values.get(t);return s===void 0&&e!==void 0&&(s=zt(e===null?void 0:e,{owner:this}),this.addValue(t,s)),s}readValue(t,e){var s;let i=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(s=this.getBaseTargetFromProps(this.props,t))!==null&&s!==void 0?s:this.readValueFromInstance(this.current,t,this.options);return i!=null&&(typeof i=="string"&&(pd(i)||md(i))?i=parseFloat(i):!GE(i)&&_e.test(e)&&(i=Sd(t,e)),this.setBaseTarget(t,Rt(i)?i.get():i)),Rt(i)?i.get():i}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){var e;const{initial:s}=this.props;let i;if(typeof s=="string"||typeof s=="object"){const a=Xo(this.props,s,(e=this.presenceContext)===null||e===void 0?void 0:e.custom);a&&(i=a[t])}if(s&&i!==void 0)return i;const r=this.getBaseTargetFromProps(this.props,t);return r!==void 0&&!Rt(r)?r:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,e){return this.events[t]||(this.events[t]=new ua),this.events[t].add(e)}notify(t,...e){this.events[t]&&this.events[t].notify(...e)}}class ff extends WE{constructor(){super(...arguments),this.KeyframeResolver=Cd}sortInstanceNodePosition(t,e){return t.compareDocumentPosition(e)&2?1:-1}getBaseTargetFromProps(t,e){return t.style?t.style[e]:void 0}removeValueFromRenderState(t,{vars:e,style:s}){delete e[t],delete s[t]}}function QE(n){return window.getComputedStyle(n)}class YE extends ff{constructor(){super(...arguments),this.type="html",this.applyWillChange=!0,this.renderInstance=ed}readValueFromInstance(t,e){if(Te.has(e)){const s=ea(e);return s&&s.default||0}else{const s=QE(t),i=(Xh(e)?s.getPropertyValue(e):s[e])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:e}){return tf(t,e)}build(t,e,s){Go(t,e,s.transformTemplate)}scrapeMotionValuesFromProps(t,e,s){return Yo(t,e,s)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Rt(t)&&(this.childSubscription=t.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}class XE extends ff{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ot}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(Te.has(e)){const s=ea(e);return s&&s.default||0}return e=nd.has(e)?e:wi(e),t.getAttribute(e)}scrapeMotionValuesFromProps(t,e,s){return id(t,e,s)}build(t,e,s){Wo(t,e,this.isSVGTag,s.transformTemplate)}renderInstance(t,e,s,i){sd(t,e,s,i)}mount(t){this.isSVGTag=Qo(t.tagName),super.mount(t)}}const JE=(n,t)=>$o(n)?new XE(t):new YE(t,{allowProjection:n!==j.Fragment}),ZE={layout:{ProjectionNode:hf,MeasureLayout:nf}},tw={...MT,...H0,...$E,...ZE},ew=t0((n,t)=>D0(n,t,tw,JE));function nw(n){const t=Ii(()=>zt(n)),{isStatic:e}=j.useContext(No);if(e){const[,s]=j.useState(n);j.useEffect(()=>t.on("change",s),[])}return t}const sw=n=>n&&typeof n=="object"&&n.mix,iw=n=>sw(n)?n.mix:void 0;function rw(...n){const t=!Array.isArray(n[0]),e=t?0:-1,s=n[0+e],i=n[1+e],r=n[2+e],a=n[3+e],l=oa(i,r,{mixer:iw(r[0]),...a});return t?l(s):l}function mf(n,t){const e=nw(t()),s=()=>e.set(t());return s(),Fo(()=>{const i=()=>X.preRender(s,!1,!0),r=n.map(a=>a.on("change",i));return()=>{r.forEach(a=>a()),Bt(s)}}),e}function ow(n){Qn.current=[],n();const t=mf(Qn.current,n);return Qn.current=void 0,t}function Tu(n,t,e,s){if(typeof n=="function")return ow(n);const i=typeof t=="function"?t:rw(t,e,s);return Array.isArray(n)?Eu(n,i):Eu([n],([r])=>i(r))}function Eu(n,t){const e=Ii(()=>[]);return mf(n,()=>{e.length=0;const s=n.length;for(let i=0;i<s;i++)e[i]=n[i].get();return t(e)})}function aw(n,t,e){return typeof n=="string"?n=document.querySelectorAll(n):n instanceof Element&&(n=[n]),Array.from(n||[])}const Qs=new WeakMap;let ce;function lw(n,t){if(t){const{inlineSize:e,blockSize:s}=t[0];return{width:e,height:s}}else return n instanceof SVGElement&&"getBBox"in n?n.getBBox():{width:n.offsetWidth,height:n.offsetHeight}}function cw({target:n,contentRect:t,borderBoxSize:e}){var s;(s=Qs.get(n))===null||s===void 0||s.forEach(i=>{i({target:n,contentSize:t,get size(){return lw(n,e)}})})}function uw(n){n.forEach(cw)}function hw(){typeof ResizeObserver>"u"||(ce=new ResizeObserver(uw))}function dw(n,t){ce||hw();const e=aw(n);return e.forEach(s=>{let i=Qs.get(s);i||(i=new Set,Qs.set(s,i)),i.add(t),ce==null||ce.observe(s)}),()=>{e.forEach(s=>{const i=Qs.get(s);i==null||i.delete(t),i!=null&&i.size||ce==null||ce.unobserve(s)})}}const Ys=new Set;let Jn;function fw(){Jn=()=>{const n={width:window.innerWidth,height:window.innerHeight},t={target:window,size:n,contentSize:n};Ys.forEach(e=>e(t))},window.addEventListener("resize",Jn)}function mw(n){return Ys.add(n),Jn||fw(),()=>{Ys.delete(n),!Ys.size&&Jn&&(Jn=void 0)}}function pw(n,t){return typeof n=="function"?mw(n):dw(n,t)}const gw=50,wu=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),yw=()=>({time:0,x:wu(),y:wu()}),vw={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function Au(n,t,e,s){const i=e[t],{length:r,position:a}=vw[t],l=i.current,c=e.time;i.current=n[`scroll${a}`],i.scrollLength=n[`scroll${r}`]-n[`client${r}`],i.offset.length=0,i.offset[0]=0,i.offset[1]=i.scrollLength,i.progress=dn(0,i.scrollLength,i.current);const h=s-c;i.velocity=h>gw?0:na(i.current-l,h)}function _w(n,t,e){Au(n,"x",t,e),Au(n,"y",t,e),t.time=e}function Tw(n,t){const e={x:0,y:0};let s=n;for(;s&&s!==t;)if(s instanceof HTMLElement)e.x+=s.offsetLeft,e.y+=s.offsetTop,s=s.offsetParent;else if(s.tagName==="svg"){const i=s.getBoundingClientRect();s=s.parentElement;const r=s.getBoundingClientRect();e.x+=i.left-r.left,e.y+=i.top-r.top}else if(s instanceof SVGGraphicsElement){const{x:i,y:r}=s.getBBox();e.x+=i,e.y+=r;let a=null,l=s.parentNode;for(;!a;)l.tagName==="svg"&&(a=l),l=s.parentNode;s=a}else break;return e}const Ew={Enter:[[0,1],[1,1]],Exit:[[0,0],[1,0]],Any:[[1,0],[0,1]],All:[[0,0],[1,1]]},ao={start:0,center:.5,end:1};function Iu(n,t,e=0){let s=0;if(n in ao&&(n=ao[n]),typeof n=="string"){const i=parseFloat(n);n.endsWith("px")?s=i:n.endsWith("%")?n=i/100:n.endsWith("vw")?s=i/100*document.documentElement.clientWidth:n.endsWith("vh")?s=i/100*document.documentElement.clientHeight:n=i}return typeof n=="number"&&(s=t*n),e+s}const ww=[0,0];function Aw(n,t,e,s){let i=Array.isArray(n)?n:ww,r=0,a=0;return typeof n=="number"?i=[n,n]:typeof n=="string"&&(n=n.trim(),n.includes(" ")?i=n.split(" "):i=[n,ao[n]?n:"0"]),r=Iu(i[0],e,s),a=Iu(i[1],t),r-a}const Iw={x:0,y:0};function Pw(n){return"getBBox"in n&&n.tagName!=="svg"?n.getBBox():{width:n.clientWidth,height:n.clientHeight}}function Sw(n,t,e){const{offset:s=Ew.All}=e,{target:i=n,axis:r="y"}=e,a=r==="y"?"height":"width",l=i!==n?Tw(i,n):Iw,c=i===n?{width:n.scrollWidth,height:n.scrollHeight}:Pw(i),h={width:n.clientWidth,height:n.clientHeight};t[r].offset.length=0;let f=!t[r].interpolate;const m=s.length;for(let y=0;y<m;y++){const E=Aw(s[y],h[a],c[a],l[r]);!f&&E!==t[r].interpolatorOffsets[y]&&(f=!0),t[r].offset[y]=E}f&&(t[r].interpolate=oa(t[r].offset,Bd(s)),t[r].interpolatorOffsets=[...t[r].offset]),t[r].progress=t[r].interpolate(t[r].current)}function Cw(n,t=n,e){if(e.x.targetOffset=0,e.y.targetOffset=0,t!==n){let s=t;for(;s&&s!==n;)e.x.targetOffset+=s.offsetLeft,e.y.targetOffset+=s.offsetTop,s=s.offsetParent}e.x.targetLength=t===n?t.scrollWidth:t.clientWidth,e.y.targetLength=t===n?t.scrollHeight:t.clientHeight,e.x.containerLength=n.clientWidth,e.y.containerLength=n.clientHeight}function Rw(n,t,e,s={}){return{measure:()=>Cw(n,s.target,e),update:i=>{_w(n,e,i),(s.offset||s.target)&&Sw(n,e,s)},notify:()=>t(e)}}const Ln=new WeakMap,Pu=new WeakMap,Ar=new WeakMap,Su=n=>n===document.documentElement?window:n;function bw(n,{container:t=document.documentElement,...e}={}){let s=Ar.get(t);s||(s=new Set,Ar.set(t,s));const i=yw(),r=Rw(t,n,i,e);if(s.add(r),!Ln.has(t)){const l=()=>{for(const y of s)y.measure()},c=()=>{for(const y of s)y.update(dt.timestamp)},h=()=>{for(const y of s)y.notify()},f=()=>{X.read(l,!1,!0),X.read(c,!1,!0),X.update(h,!1,!0)};Ln.set(t,f);const m=Su(t);window.addEventListener("resize",f,{passive:!0}),t!==document.documentElement&&Pu.set(t,pw(t,f)),m.addEventListener("scroll",f,{passive:!0})}const a=Ln.get(t);return X.read(a,!1,!0),()=>{var l;Bt(a);const c=Ar.get(t);if(!c||(c.delete(r),c.size))return;const h=Ln.get(t);Ln.delete(t),h&&(Su(t).removeEventListener("scroll",h),(l=Pu.get(t))===null||l===void 0||l(),window.removeEventListener("resize",h))}}function Cu(n,t){Qv(!!(!t||t.current))}const xw=()=>({scrollX:zt(0),scrollY:zt(0),scrollXProgress:zt(0),scrollYProgress:zt(0)});function Vw({container:n,target:t,layoutEffect:e=!0,...s}={}){const i=Ii(xw);return(e?Fo:j.useEffect)(()=>(Cu("target",t),Cu("container",n),bw(({x:a,y:l})=>{i.scrollX.set(a.current),i.scrollXProgress.set(a.progress),i.scrollY.set(l.current),i.scrollYProgress.set(l.progress)},{...s,container:(n==null?void 0:n.current)||void 0,target:(t==null?void 0:t.current)||void 0})),[n,t,JSON.stringify(s.offset)]),i}function Dw(){return C.jsx("svg",{width:"2.8rem",height:"2.8rem",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:C.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.00005 2.04999H5.52505C4.71043 2.04999 4.05005 2.71037 4.05005 3.52499C4.05005 4.33961 4.71043 4.99999 5.52505 4.99999H7.00005V2.04999ZM7.00005 1.04999H8.00005H9.47505C10.842 1.04999 11.95 2.15808 11.95 3.52499C11.95 4.33163 11.5642 5.04815 10.9669 5.49999C11.5642 5.95184 11.95 6.66836 11.95 7.475C11.95 8.8419 10.842 9.95 9.47505 9.95C8.92236 9.95 8.41198 9.76884 8.00005 9.46266V9.95L8.00005 11.425C8.00005 12.7919 6.89195 13.9 5.52505 13.9C4.15814 13.9 3.05005 12.7919 3.05005 11.425C3.05005 10.6183 3.43593 9.90184 4.03317 9.44999C3.43593 8.99814 3.05005 8.28163 3.05005 7.475C3.05005 6.66836 3.43594 5.95184 4.03319 5.5C3.43594 5.04815 3.05005 4.33163 3.05005 3.52499C3.05005 2.15808 4.15814 1.04999 5.52505 1.04999H7.00005ZM8.00005 2.04999V4.99999H9.47505C10.2897 4.99999 10.95 4.33961 10.95 3.52499C10.95 2.71037 10.2897 2.04999 9.47505 2.04999H8.00005ZM5.52505 8.94998H7.00005L7.00005 7.4788L7.00005 7.475L7.00005 7.4712V6H5.52505C4.71043 6 4.05005 6.66038 4.05005 7.475C4.05005 8.28767 4.70727 8.94684 5.5192 8.94999L5.52505 8.94998ZM4.05005 11.425C4.05005 10.6123 4.70727 9.95315 5.5192 9.94999L5.52505 9.95H7.00005L7.00005 11.425C7.00005 12.2396 6.33967 12.9 5.52505 12.9C4.71043 12.9 4.05005 12.2396 4.05005 11.425ZM8.00005 7.47206C8.00164 6.65879 8.66141 6 9.47505 6C10.2897 6 10.95 6.66038 10.95 7.475C10.95 8.28962 10.2897 8.95 9.47505 8.95C8.66141 8.95 8.00164 8.29121 8.00005 7.47794V7.47206Z",fill:"#FFFFFF"})})}function Ir(n){const t=Tu(n.scrollYProgress,[0,1],[n.x.start,n.x.end]),e=Tu(n.scrollYProgress,[0,1],[n.y.start,n.y.end]);return C.jsx(ew.div,{style:{x:t,y:e},children:C.jsxs("div",{className:"technologyContainer",children:[C.jsx(Dw,{}),n.text]})})}function Mw(){const n=j.useRef(null),{scrollYProgress:t}=Vw({target:n,offset:["start end","end end"]});return C.jsxs("div",{id:"Technologies",children:[C.jsx("div",{className:"radialGradient technologiesCenterdiv centered"}),C.jsx("div",{id:"technologiesOuterCircle",className:"circle centered"}),C.jsx("div",{id:"technologiesInnerCircle",className:"circle centered"}),C.jsx("div",{className:"globeImageContainer centered",children:C.jsx("img",{src:Nv,alt:"",className:"globeImage"})}),C.jsx("div",{className:"globeIconContainer",children:C.jsx("div",{className:"rotationAxis",children:C.jsx("div",{className:"globeImageContainer2",children:C.jsx("img",{src:Lv,alt:"",className:"globeImage2"})})})}),C.jsx("div",{className:"centered technologiesText",children:"10+  YEARS OF EXPERIENCE IN WEB DEVELOPMENT"}),C.jsxs("div",{ref:n,className:"scrollingAnimationContainer",children:[C.jsx(Ir,{text:"Figma",scrollYProgress:t,x:{start:"0rem",end:"-15rem"},y:{start:"0rem",end:"15rem"}}),C.jsx(Ir,{text:"Figma",scrollYProgress:t,x:{start:"0rem",end:"-20rem"},y:{start:"0rem",end:"-15rem"}}),C.jsx(Ir,{text:"Figma",scrollYProgress:t,x:{start:"0rem",end:"-10rem"},y:{start:"0rem",end:"25rem"}})]})]})}var Ut=function(){return Ut=Object.assign||function(n){for(var t,e=1,s=arguments.length;e<s;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Ut.apply(this,arguments)};function kw(n){var t,e,s,i,r=Number(String((t=n.speed)!==null&&t!==void 0?t:1)),a=(e=n.fill)!==null&&e!==void 0?e:"#fff",l=n.stroke,c=n.fillOpacity,h=n.strokeOpacity;return At.createElement("svg",Ut({},Ut(Ut({},n),{className:n.className?"icon-loading ".concat(n.className):"icon-loading",fill:void 0,fillOpacity:void 0,height:(s=n.height)!==null&&s!==void 0?s:140,speed:void 0,stroke:void 0,strokeOpacity:void 0,strokeWidth:void 0,width:(i=n.width)!==null&&i!==void 0?i:135}),{viewBox:"0 0 135 140"}),At.createElement("rect",Ut({y:10,width:15,height:120,rx:6},{fill:a,stroke:l,fillOpacity:c,strokeOpacity:h}),At.createElement("animate",{attributeName:"height",begin:"0.5s",dur:"".concat(1/r,"s"),values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),At.createElement("animate",{attributeName:"y",begin:"0.5s",dur:"".concat(1/r,"s"),values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),At.createElement("rect",Ut({x:30,y:10,width:15,height:120,rx:6},{fill:a,stroke:l,fillOpacity:c,strokeOpacity:h}),At.createElement("animate",{attributeName:"height",begin:"0.25s",dur:"".concat(1/r,"s"),values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),At.createElement("animate",{attributeName:"y",begin:"0.25s",dur:"".concat(1/r,"s"),values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),At.createElement("rect",Ut({x:60,width:15,height:140,rx:6},{fill:a,stroke:l,fillOpacity:c,strokeOpacity:h}),At.createElement("animate",{attributeName:"height",begin:"0s",dur:"".concat(1/r,"s"),values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),At.createElement("animate",{attributeName:"y",begin:"0s",dur:"".concat(1/r,"s"),values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),At.createElement("rect",Ut({x:90,y:10,width:15,height:120,rx:6},{fill:a,stroke:l,fillOpacity:c,strokeOpacity:h}),At.createElement("animate",{attributeName:"height",begin:"0.25s",dur:"".concat(1/r,"s"),values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),At.createElement("animate",{attributeName:"y",begin:"0.25s",dur:"".concat(1/r,"s"),values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),At.createElement("rect",Ut({x:120,y:10,width:15,height:120,rx:6},{fill:a,stroke:l,fillOpacity:c,strokeOpacity:h}),At.createElement("animate",{attributeName:"height",begin:"0.5s",dur:"".concat(1/r,"s"),values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),At.createElement("animate",{attributeName:"y",begin:"0.5s",dur:"".concat(1/r,"s"),values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})))}var Nw=kw;function Lw(){return C.jsx("div",{className:"loadingScreen",children:C.jsx(Nw,{fill:"#19eada"})})}function zw(){const[n,t]=j.useState(""),[e,s]=j.useState({}),[i,r]=j.useState(!1),a=l=>{l!==n&&t(l)};return j.useEffect(()=>dv(Dv,c=>{const f=c.docs[0].data();s(f),r(()=>(console.log("data loaded"),!0))}),[]),C.jsx(C.Fragment,{children:i?C.jsxs("div",{className:"appPage",children:[C.jsxs("div",{className:"scrollablePart",children:[C.jsx(yv,{personName:e.name,introContent:e.introContent}),C.jsxs("div",{id:"infoSection",children:[C.jsx(vv,{currentSection:n}),C.jsx(Mw,{}),C.jsx(_v,{aboutMeList:e.aboutMeList,unsetCurrentSection:()=>a(""),setCurrentSection:()=>a("AboutMe")}),C.jsx(wv,{projects:e.projects,unsetCurrentSection:()=>a(""),setCurrentSection:()=>a("Work")}),C.jsx(Iv,{unsetCurrentSection:()=>a(""),setCurrentSection:()=>a("Services")}),C.jsx(Mv,{text:" - Let's Connect"})]})]}),C.jsx("div",{id:"Profiles",className:"transparentDiv",onMouseEnter:()=>a("Profiles"),onMouseLeave:()=>a(""),children:C.jsxs("div",{className:"fixedPart",children:[C.jsx(Pv,{}),C.jsx(kv,{personName:e.name})]})})]}):C.jsx(Lw,{})})}export{zw as default};
